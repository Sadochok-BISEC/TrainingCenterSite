function t_searchWidget__init(){var timerID=0,currentInput,widgetPagination,currentPage,scrollPos,xhr,lang=(window.navigator.userLanguage||window.navigator.language).toUpperCase().slice(0,2);window.t_searchWidget__searchTarget="";var allrecords=document.getElementById("allrecords"),acceptedLangs;if(allrecords){var projectLang=allrecords.getAttribute("data-tilda-project-lang");projectLang&&(lang=projectLang)}-1===["EN","RU","FR","DE","ES","PT","UK","JA","ZH","PL","KK","IT","LV"].indexOf(lang)&&(lang="EN");var translation={placeholder:{EN:"Search",RU:"Поиск",FR:"Rechercher",DE:"Suche",ES:"Buscar",PT:"Procurar",UK:"Пошук",JA:"探す",ZH:"搜索",PL:"Wyszukiwanie",KK:"Іздеу",IT:"Ricerca",LV:"Meklēt"},button:{EN:"Search",RU:"Поиск",FR:"Rechercher",DE:"Suche",ES:"Buscar",PT:"Procurar",UK:"Пошук",JA:"探す",ZH:"搜索",PL:"Wyszukiwanie",KK:"Іздеу",IT:"Ricerca",LV:"Meklēt"},loading:{EN:"Search in progress...",RU:"Идет поиск...",FR:"Recherche en cours...",DE:"Suche läuft...",ES:"Búsqueda en curso...",PT:"Pesquisa em andamento...",UK:"Йде пошук...",JA:"進行中の検索",ZH:"搜索中",PL:"Wyszukiwanie w toku...",KK:"Іздеу жүріп жатыр...",IT:"Ricerca in corso...",LV:"Meklēšana notiek..."},noResult:{EN:"Nothing found",RU:"Ничего не найдено",FR:"Rien n'a été trouvé",DE:"Nichts gefunden",ES:"Nada Encontrado",PT:"Nada encontrado",UK:"Нічого не знайдено",JA:"何も見つかりません",ZH:"没有发现",PL:"Nic nie znaleziono",KK:"Ештеңе табылмады",IT:"Non abbiamo trovato nulla",LV:"Nekas nav atrasts"},showMore:{EN:"Show more",RU:"Показать ещё",FR:"Afficher plus",DE:"Mehr anzeigen",ES:"Mostrar más",PT:"Mostrar mais",UK:"Показати ще",JA:"もっと見せる",ZH:"展示更多",PL:"Pokaż więcej",KK:"Көбірек көрсет",IT:"Mostra di più",LV:"Rādīt vairāk"},showAlltitle:{EN:["result for:","results for:","results for:"],RU:["результат по запросу:","результата по запросу:","результатов по запросу:"],FR:["résultat pour:","résultats pour:","résultats pour:"],DE:["Ergebnis für:","Ergebnisse für:","Ergebnisse für:"],ES:["resultado para:","resultados para:","resultados para:"],PT:["resultado para:","resultados para:","resultados para:"],UK:["результат за запитом:","результати за запитом:","результатів за запитом:"],JA:["の結果：","の結果：","の結果："],ZH:["结果：","结果：","结果："],PL:["wynik wyszukiwania:","wyniki wyszukiwania:","wyników wyszukiwania:"],KK:"Арналған нәтижелері",IT:["risultato per","risultati per","risultati per"],LV:["rezultātu par","rezultāti par","rezultāti par"]},errorOccurred:{EN:"An error occurred while sending the request",RU:"При отправке запроса произошла ошибка",FR:"Une erreur est survenue pendant l'envoi de la demande",DE:"Fehler beim Senden der Anforderung",ES:"Se produjo un error al enviar la solicitud",PT:"Ocorreu um erro ao enviar o pedido",UK:"При відправленні запиту виникла помилка",JA:"リクエストを送信中にエラーが発生しました",ZH:"发送请求时出错",PL:"Wystąpił błąd podczas wysyłania żądania",KK:"Сұрау жіберу кезінде қате пайда болды",IT:"Si è verificato un errore durante l'invio della richiesta",LV:"Radās kļūda nosūtot pieprasījumu"},errorOccurredText:{EN:"The server could not respond to the request",RU:"Сервер не смог ответить на запрос",FR:"Le serveur n'a pas pu répondre à la demande",DE:"Der Server konnte nicht auf die Anfrage antworten",ES:"El servidor no ha podido responder a la solicitud",PT:"O servidor não conseguiu responder ao pedido",UK:"Сервер не зміг відповісти на запит",JA:"サーバが要求に応答することができませんでした",ZH:"服务器无法响应请求",PL:"Serwer nie odpowiada",KK:"Сервер сұрауына жауап алмады,",IT:"Il server non ha potuto rispondere alla richiesta",LV:"Serveris nevarēja atbildēt uz pieprasījumu"},description:{EN:"Description",RU:"Описание",FR:"La description",DE:"Beschreibung",ES:"Descripción",PT:"Descrição",UK:"Опис",JA:"説明",ZH:"描述",PL:"Opis",KK:"Сипаттамасы",IT:"Descrizione",LV:"Apraksts"}};function t_searchWidget_addListeners(){var searchWidgetBtns=document.querySelectorAll(".t-search-widget__button");searchWidgetBtns.length&&Array.prototype.forEach.call(searchWidgetBtns,(function(searchWidgetBtn){searchWidgetBtn.addEventListener("click",t_searchWidget_drawSearchBar)}));var searchMenu=document.querySelector(".t985");if(searchMenu)var linkhook=searchMenu.getAttribute("data-search-hook")?searchMenu.getAttribute("data-search-hook"):"#opensearch";document.body.addEventListener("click",(function(e){if(e.target.closest('a[href="'+linkhook+'"]')&&(e.preventDefault(),t_searchWidget_drawSearchBar()),e.target.closest(".t-search-widget__search-icon")&&(currentInput=document.querySelector("input.t-search-widget__input")).value.length>=2&&t_searchWidget__sendRequest(currentPage),e.target.closest("span[page].t-search-widget__pagination-item")){var paginationItem=e.target.closest("span[page].t-search-widget__pagination-item");paginationItem.classList.add("t-search-widget__pagination-active"),currentPage=paginationItem.getAttribute("page"),(widgetPagination=document.querySelector(".t-search-widget__pagination"))&&widgetPagination.setAttribute("data-search-active-page",currentPage),t_searchWidget__sendRequest(currentPage)}if(e.target.closest(".t-search-widget__loadmore-btn")){var loadMoreBtn=e.target.closest(".t-search-widget__loadmore-btn"),widgetPaginationCurrentPage=(widgetPagination=document.querySelector(".t-search-widget__pagination"))?widgetPagination.getAttribute("data-search-active-page"):"";if(widgetPaginationCurrentPage){currentPage=parseInt(widgetPaginationCurrentPage,10)+1,loadMoreBtn.classList.add("t-search-widget__spinner"),t_searchWidget__sendRequest(currentPage,null,!0);var activePaginationItem=document.querySelector('.t-search-widget__pagination-item[data-search-active-page="'+currentPage+'"]');activePaginationItem&&activePaginationItem.classList.add("t-search-widget__pagination-active"),widgetPagination.setAttribute("data-search-active-page",currentPage)}}if(e.target.closest(".t-search-widget__pagination-prev")&&t_searchWidget__sendRequest(--currentPage),e.target.closest(".t-search-widget__pagination-next")&&t_searchWidget__sendRequest(++currentPage),e.target.closest(".t985__searchvariant")){var searchVariant=e.target.closest(".t985__searchvariant");(currentInput=document.querySelector("input.t-search-widget__input")).value=searchVariant.textContent,document.querySelector(".t985__searchvariants").style.display="none",window.t_searchWidget__searchTarget=currentInput.getAttribute("data-search-target"),t_searchWidget__sendRequest()}e.target.closest(".t-search-widget__close-icon")&&t_searchWidget_hideOverlay(),e.target.closest(".t-search-widget__clear-icon")&&(t_searchWidget_clearInput(),e.target.closest(".t-search-widget__clear-icon").classList.remove("t-search-widget__clear_show")),!e.target.closest(".t-search-widget__overlay")||e.target.closest(".t-search-widget__header")||e.target.closest(".t-search-widget__popup")||t_searchWidget_hideOverlay()})),document.body.addEventListener("input",(function(e){if(e.target.closest("input.t-search-widget__input")){var searchInput=e.target.closest("input.t-search-widget__input"),documentHeight;if(window.t_searchWidget__searchTarget=searchInput.getAttribute("data-search-target"),Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-searchInput.getBoundingClientRect().top<400)return!1;if((currentInput=searchInput).value.length>=2&&(timerID>0&&clearTimeout(timerID),timerID=setTimeout((function(){t_searchWidget__sendRequest()}),300)),!currentInput.value.length){t_searchWidget_clearInput();var searchList=document.querySelector(".t985__searchvariants");searchList&&(searchList.style.display="")}}})),document.body.addEventListener("keyup",(function(e){e.target.closest(".t-search-widget__input")&&13===e.keyCode&&(currentInput=e.target.closest(".t-search-widget__input"),window.t_searchWidget__searchTarget=currentInput.getAttribute("data-search-target"),currentInput.value.length>=2&&(t_searchWidget__sendRequest(),e.target.closest(".t-search-widget__input").blur()))}))}if(t_searchWidget_addListeners(),"URLSearchParams"in window){var search=new URLSearchParams(window.location.search),query=search.get("search"),slice=search.get("slice");if(null===slice&&(slice=1),null!==query){var newCurrentInput=document.createElement("input");newCurrentInput.value=t_searchWidget__escapeHtml(query),currentInput=newCurrentInput,currentPage=slice,t_searchWidget_drawSearchBar(),document.querySelector("input.t-search-widget__input").value=query,t_searchWidget__sendRequest(slice,query)}}function t_searchWidget_drawSearchBar(){var widgetInput=document.querySelector("input.t-search-widget__input");widgetInput.value="",widgetInput.focus(),document.querySelector(".t-search-widget__overlay").classList.add("t-search-widget__overlay_opened"),document.querySelector(".t-search-widget__clear-icon").classList.remove("t-search-widget__clear_show")}function t_searchWidget_clearInput(){var searchWidgetPopup=document.querySelector(".t-search-widget__popup"),queryResults=document.querySelector(".t-search-widget__query-result"),searchList=document.querySelector(".t985__searchvariants");t_searchWidget_clearURL(),document.body.classList.remove("t-search-widget__body-fix"),document.querySelector(".t-search-widget__input").value="",searchWidgetPopup&&searchWidgetPopup.parentNode&&searchWidgetPopup.parentNode.removeChild(searchWidgetPopup),queryResults&&queryResults.parentNode&&queryResults.parentNode.removeChild(queryResults),searchList&&(searchList.style.display=""),document.querySelector(".t-search-widget__header").classList.remove("t-search-widget__header_popup-opened"),currentPage=1}function t_searchWidget_hideOverlay(){document.body.classList.remove("t-search-widget__body-fix"),document.querySelector(".t-search-widget__overlay").classList.remove("t-search-widget__overlay_opened"),document.querySelector(".t-search-widget__clear-icon").classList.remove("t-search-widget__clear_show"),t_searchWidget_clearInput()}function t_searchWidget_clearURL(){if("URLSearchParams"in window){var search=new URLSearchParams(window.location.search),query=search.get("search"),slice=search.get("slice"),searchTarget=search.get("searchtarget");null!==query&&search.delete("search"),null!==slice&&search.delete("slice"),null!==searchTarget&&search.delete("searchtarget"),""!==search.toString()?history.replaceState(null,"",location.pathname+"?"+t_searchWidget__escapeHtml(search.toString())):history.replaceState(null,"",location.pathname)}}function t_searchWidget__drawOverlay(){if(document.querySelector(".t-search-widget__header").classList.add("t-search-widget__header_popup-opened"),document.body.classList.add("t-search-widget__body-fix"),!document.querySelector(".t-search-widget__popup")){var html='<div class="t-search-widget__popup"><div class="t-container"><div class="t-search-widget__popup-container t-col t-col_8 t-prefix_2"><div class="t-search-widget__popup-preloaderwrapper"><div class="t-text t-text_md">'+translation.loading[lang]+"</div></div></div></div></div>";document.querySelector(".t-search-widget__overlay").insertAdjacentHTML("beforeend",html);var searchWidgetPreloadWrap=document.querySelector(".t-search-widget__popup-preloaderwrapper");searchWidgetPreloadWrap&&(searchWidgetPreloadWrap.style.display="")}}function t_searchWidget__drawPopup(sResults,activePage){activePage=activePage||1;var widgetQueryResult=document.querySelector(".t-search-widget__query-result"),widgetPopupContainer=document.querySelector(".t-search-widget__popup-container"),widgetResultWrap=document.querySelector(".t-search-widget__resultwrapper"),widgetProductWrap=document.querySelector(".t-search-widget__productwrapper"),widgetLoadmoreBtn=document.querySelector(".t-search-widget__loadmore-btn-wrap");if(widgetQueryResult&&widgetQueryResult.parentNode&&widgetQueryResult.parentNode.removeChild(widgetQueryResult),widgetPopupContainer&&(widgetPopupContainer.innerHTML=""),widgetResultWrap&&(widgetResultWrap.innerHTML=""),widgetProductWrap&&widgetProductWrap.parentNode&&widgetProductWrap.parentNode.removeChild(widgetProductWrap),widgetLoadmoreBtn&&widgetLoadmoreBtn.parentNode&&widgetLoadmoreBtn.parentNode.removeChild(widgetLoadmoreBtn),sResults){var resultNum='<div class="t-container t-search-widget__query-result t-descr t-opacity_50">'+sResults.total+" "+t_searchWidget__pluralizeWord(sResults.total,translation.showAlltitle[lang])+" "+t_searchWidget__escapeHtml(currentInput.value)+"</div>";sResults.total&&!sResults.error&&widgetPopupContainer.insertAdjacentHTML("beforeend",resultNum),widgetPopupContainer.insertAdjacentHTML("beforeend",'<div class="t-search-widget__resultwrapper"></div>'),t_searchWidget__appendResults(sResults,activePage)}}function t_searchWidget__appendResults(sResults,activePage){if("URLSearchParams"in window){var search=new URLSearchParams(window.location.search),query=search.get("search"),slice=search.get("slice"),searchTarget=search.get("searchtarget");void 0!==currentInput&&query!==currentInput.value&&search.set("search",t_searchWidget__escapeHtml(currentInput.value)),slice!==activePage&&activePage>0&&search.set("slice",activePage>0?activePage:1),searchTarget||""===window.t_searchWidget__searchTarget||search.set("searchtarget",window.t_searchWidget__searchTarget),history.replaceState(null,"",location.pathname+"?"+search.toString())}var str="",productStr="";if(sResults.total>0&&void 0!==sResults.pages){var searchWidgetPopupPreload=document.querySelector(".t-search-widget__popup-preloaderwrapper");searchWidgetPopupPreload&&(searchWidgetPopupPreload.style.display="none"),Array.prototype.forEach.call(sResults.pages,(function(value){var highlight=value.highlight;if(sResults.error)str+='<div class="t-search-widget__result t-search-widget__result_error"><div class="t-search-widget__result__title t-title">'+value.title+'</div><div class="t-search-widget__result__body t-descr">'+highlight+"</div></div>";else if(void 0!==value.product){var productTitle=value.product.title,title=productTitle.length<2?highlight:productTitle,desc=highlight.replace(productTitle,"").trim(),currency=value.product.currency,currency_dec=value.product.currency_dec,currency_side=value.product.currency_side,price=(""===currency_dec?parseFloat(value.product.price):value.product.price)||"";""!==currency&&""!==price&&(price="r"===currency_side?price+" "+currency:"l"===currency_side?currency+" "+price:price),productStr+='<div class="t-search-widget__result t-search-widget__result_product">',productStr+='<a class="t-search-widget__result_product-link" target="_blank" href="'+value.pageurl+'">',value.product.img&&(productStr+='<div class="t-search-widget__thubmnail">',productStr+='<div class="t-search-widget__result_product-img" style="background-image:url(\''+value.product.img+"')\"></div>",productStr+="</div>"),productStr+='<div class="t-search-widget__result_product-text">',productStr+='<div class="t-search-widget__result_product-title t-name t-name_xs">',productStr+=title,productStr+="</div>","..."!=desc&&(productStr+='<div class="t-search-widget__result_product-desc t-descr t-descr_xs">',productStr+=desc,productStr+="</div>"),""!==price&&(productStr+='<div class="t-search-widget__result_product-price t-descr t-descr_xs">',productStr+=price,productStr+="</div>"),productStr+="</div>",productStr+="</a>",productStr+="</div>"}else str+='<div class="t-search-widget__result"><a target="_blank" href="'+value.pageurl+'"><div class="t-search-widget__result__title t-name t-name_xs">'+value.title+'</div><div class="t-search-widget__result__body t-descr t-descr_xs">'+value.highlight+"</div></a></div>"}))}else 0==sResults.total?(str+='<div class="t-search-widget__notfound">',str+='<div class="t-search-widget__notfound-img"><svg width="35" height="43" viewBox="0 0 35 43" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.56"><path d="M15.1899 12.513C15.1899 11.3091 14.2139 10.3331 13.01 10.3331C11.8061 10.3331 10.8301 11.3091 10.8301 12.513C10.8301 13.7169 11.8061 14.6929 13.01 14.6929C14.2139 14.6929 15.1899 13.7169 15.1899 12.513Z" fill="#464646"/><path d="M24.9145 12.513C24.9145 11.3091 23.9385 10.3331 22.7346 10.3331C21.5307 10.3331 20.5547 11.3091 20.5547 12.513C20.5547 13.7169 21.5307 14.6929 22.7346 14.6929C23.9385 14.6929 24.9145 13.7169 24.9145 12.513Z" fill="#464646"/><path d="M22.9029 24.4184C22.9029 23.0263 20.6506 17.7111 17.8723 17.7111C15.094 17.7111 12.8418 23.0263 12.8418 24.4184C12.8418 24.4184 15.094 24.4185 17.8723 24.4185C20.6506 24.4185 22.9029 24.4184 22.9029 24.4184Z" fill="#464646"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 37.9787C0 35.2369 2.2227 33.0142 4.96454 33.0142H35V35.4964H4.96454C3.59362 35.4964 2.48227 36.6078 2.48227 37.9787C2.48227 39.3496 3.59362 40.461 4.96454 40.461H35V42.9432H4.96454C2.2227 42.9432 0 40.7205 0 37.9787Z" fill="#464646"/><path fill-rule="evenodd" clip-rule="evenodd" d="M34.9998 1.24119L34.9998 34.2554L32.5176 34.2554L32.5176 1.24119L34.9998 1.24119Z" fill="#464646"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 6.20567C0 2.77838 2.77838 0 6.20567 0H35V2.48227H6.20567C4.14929 2.48227 2.48227 4.14929 2.48227 6.20567V38.1028H0V6.20567Z" fill="#464646"/></g></svg></div>',str+='<div class="t-search-widget__result t-text">'+translation.noResult[lang]+"</div>",str+="</div>",searchWidgetPopupPreload&&(searchWidgetPopupPreload.style.display="none")):void 0===sResults.pages&&sResults.total>0&&sResults.pagin>0&&(str+='<div class="t-search-widget__result t-text">'+translation.noResult[lang]+"</div>",searchWidgetPopupPreload&&(searchWidgetPopupPreload.style.display="none"));var wrapper=document.querySelector(".t-search-widget__resultwrapper");productStr&&wrapper&&wrapper.insertAdjacentHTML("beforeend",'<div class="t-search-widget__productwrapper">'+productStr+"</div>"),wrapper&&wrapper.insertAdjacentHTML("beforeend",str)}function t_searchWidget__appendPagination(page,sResults){var searchWidgetPopupContainer=document.querySelector(".t-search-widget__popup-container"),searchWidgetLoadmoreBtn=document.querySelector(".t-search-widget__loadmore-btn-wrap");searchWidgetLoadmoreBtn&&searchWidgetLoadmoreBtn.parentNode&&searchWidgetLoadmoreBtn.parentNode.removeChild(searchWidgetLoadmoreBtn);var searchWidgetPagination=document.querySelector(".t-search-widget__pagination");searchWidgetPagination&&searchWidgetPagination.parentNode&&searchWidgetPagination.parentNode.removeChild(searchWidgetPagination);var str="";sResults.pagin>1&&page<sResults.pagin&&(str+='<div class="t-search-widget__loadmore-btn-wrap t-align_center"><div class="t-search-widget__loadmore-btn t-btn t-btn_sm">'+translation.showMore[lang]+"</div></div>"),sResults.pagin>1&&(str+='<div class="t-search-widget__pagination" data-search-active-page="'+page+'"></div>'),searchWidgetPopupContainer&&searchWidgetPopupContainer.insertAdjacentHTML("beforeend",str),(searchWidgetPagination=document.querySelector(".t-search-widget__pagination"))&&searchWidgetPagination.insertAdjacentHTML("beforeend",t_searchWidget__createPagination(page,sResults.pagin))}function t_searchWidget__createPagination(currentPage,totalcount){var str="";if(currentPage>1&&(str+='<div class="t-search-widget__pagination-button t-search-widget__pagination-prev"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="14" viewBox="0 0 8 14" fill="none"><path d="M7 1L1 7L7 13" stroke="black"/></svg></div>'),totalcount<=6)for(var i=1;i<=totalcount;i++)str+=t_searchWidget__addPage(i,currentPage);else str+=t_searchWidget__addPage("1",currentPage),currentPage>3&&(str+='<span class="t-text t-search-widget__pagination-item t-search-widget__pagination-dots">...</span>'),currentPage==totalcount&&(str+=t_searchWidget__addPage(currentPage-2,currentPage)),currentPage>2&&(str+=t_searchWidget__addPage(currentPage-1,currentPage)),1!=currentPage&&currentPage!=totalcount&&(str+=t_searchWidget__addPage(currentPage,currentPage)),currentPage<totalcount-1&&(str+=t_searchWidget__addPage(currentPage+1,currentPage)),1==currentPage&&(str+=t_searchWidget__addPage(currentPage+2,currentPage)),currentPage<totalcount-2&&(str+='<span class="t-text t-search-widget__pagination-item t-search-widget__pagination-dots">...</span>'),totalcount>1&&(str+=t_searchWidget__addPage(totalcount,currentPage));return currentPage<totalcount&&(str+='<div class="t-search-widget__pagination-button t-search-widget__pagination-next"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="14" viewBox="0 0 8 14" fill="none"><path d="M1 1L7 7L1 13" stroke="black"/></svg></div>'),str}function t_searchWidget__addPage(number,currentPage){var str="";return str+='<span class="t-text t-search-widget__pagination-item',number==currentPage&&(str+=" t-search-widget__pagination-active"),str+='" page="'+number+'">'+number+"</span>"}function t_searchWidget__sendRequest(page,query,addPage){page=parseInt(page,10)||1;var allRec=document.getElementById("allrecords"),blockT985=document.querySelector(".t985"),searchVariants=document.querySelector(".t985__searchvariants");if(""!==window.t_searchWidget__searchTarget)var searchTarget=window.t_searchWidget__searchTarget;else var search,searchTarget=new URLSearchParams(window.location.search).get("searchtarget")||"all";if(!allRec)return!1;var projectId=allRec.getAttribute("data-tilda-project-id"),num=blockT985&&blockT985.getAttribute("data-search-showby")||10,descrLength=50;function t_searchWidget__createEventBeforeSend(){var currentInputParent=currentInput.closest("div");if(currentInputParent){var searchClose=currentInputParent.querySelector(".t-site-search-close");searchClose&&(searchClose.style.display="none")}var searchWidgetClearIcon=document.querySelector(".t-search-widget__clear-icon");searchWidgetClearIcon&&searchWidgetClearIcon.classList.remove("t-search-widget__clear_show");var searchWidget=document.querySelector(".t-search-widget__loading");searchWidget&&("none"===searchWidget.style.display?searchWidget.style.display="block":searchWidget.style.display=""),t_searchWidget__drawOverlay();var searchWidgetSearchIcon=document.querySelector(".t-search-widget__search-icon");searchWidgetSearchIcon&&window.innerWidth<=960&&(searchWidgetSearchIcon.style.display="none"),currentPage=currentPage||1}function t_searchWidget__scrollTo(element,to,duration){if(!(duration<=0)){var difference,perTick=(to-element.scrollTop)/duration*10;setTimeout((function(){element.scrollTop=element.scrollTop+perTick,element.scrollTop!==to&&scrollTo(element,to,duration-10)}),10)}}searchVariants&&(searchVariants.style.display="none"),currentInput&&null==query&&(query=currentInput.value),query.length<2||(xhr&&xhr.abort(),t_searchWidget__createEventBeforeSend(),(xhr=new XMLHttpRequest).open("GET","https://search.tildacdn.com/search/?p="+projectId+"&q="+encodeURIComponent(query)+"&page="+page+"&num="+num+"&hs=50&st="+searchTarget),xhr.send(),xhr.onprogress=function(){var response={};try{response=JSON.parse(xhr.response)}catch(e){}if(addPage){var allWidgetRes=document.querySelectorAll(".t-search-widget__result"),widgetResultLast=allWidgetRes[allWidgetRes.length-1],widgetResLastPosTop=widgetResultLast?widgetResultLast.offsetTop:0,widgetResLastScrollTop=widgetResultLast?widgetResultLast.scrollTop:0,widgetResLastHeight=widgetResultLast?widgetResultLast.offsetHeight:0,searchWidgetOver=document.querySelector(".t-search-widget__overlay"),searchWidgetOverPosTop=searchWidgetOver?searchWidgetOver.offsetTop:0;scrollPos=widgetResLastPosTop-searchWidgetOverPosTop+widgetResLastScrollTop-widgetResLastHeight,t_searchWidget__appendResults(response,page),searchWidgetOver&&t_searchWidget__scrollTo(searchWidgetOver,scrollPos,300)}else{t_searchWidget__drawPopup(response,page);var searchWidgetOverlay=document.querySelector(".t-search-widget__overlay");searchWidgetOverlay&&t_searchWidget__scrollTo(searchWidgetOverlay,0,300)}if(t_searchWidget__appendPagination(page,response),page==response.pagin){var btnWrap=document.querySelector(".t-search-widget__loadmore-btn-wrap");btnWrap&&btnWrap.parentNode&&btnWrap.parentNode.removeChild(btnWrap)}},xhr.onload=function(){var currentInputParent=currentInput.closest("div");if(query.length>1&&currentInputParent){var searchCloseItem=currentInputParent.querySelector(".t-site-search-close");searchCloseItem&&(searchCloseItem.style.display="")}if(window.innerWidth<=960){var searchWidgetIcon=document.querySelector(".t-search-widget__search-icon");searchWidgetIcon&&(searchWidgetIcon.style.display="")}var searchWidgetLoading=document.querySelector(".t-search-widget__loading");searchWidgetLoading&&(searchWidgetLoading.style.display="none");var searchWidgetClearIcon=document.querySelector(".t-search-widget__clear-icon");if(searchWidgetClearIcon&&searchWidgetClearIcon.classList.add("t-search-widget__clear_show"),currentInputParent){var searchWidgetBtn=currentInputParent.querySelector("button");searchWidgetBtn&&(searchWidgetBtn.removeAttribute("disabled"),searchWidgetBtn.style.opacity="1")}var showAllLoader=document.querySelector(".t-site-search-showAllLoader");showAllLoader&&showAllLoader.parentNode&&showAllLoader.parentNode.removeChild(showAllLoader)},xhr.onerror=function(){var failData;0!==xhr.status&&t_searchWidget__drawPopup({total:1,error:!0,pages:{0:{id:0,pageurl:"#",title:translation.errorOccurred[lang],highlight:translation.errorOccurredText[lang]+". <br>"+translation.description[lang]+": "+xhr.status+" "+xhr.statusText}}})})}function t_searchWidget__escapeHtml(text){var map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return text.replace(/[&<>"']/g,(function(el){return map[el]}))}function t_searchWidget__pluralizeWord(value,words){var num=(value=Math.abs(value)%100)%10;return"string"==typeof words?words:value>10&&value<20?words[2]:num>1&&num<5?words[1]:1==num?words[0]:words[2]}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(s){for(var el=this;el&&1===el.nodeType;){if(Element.prototype.matches.call(el,s))return el;el=el.parentElement||el.parentNode}return null})}"loading"!==document.readyState?t_searchWidget__init():document.addEventListener("DOMContentLoaded",t_searchWidget__init);