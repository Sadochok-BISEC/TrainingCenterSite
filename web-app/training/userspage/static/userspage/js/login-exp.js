"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},__assign.apply(this,arguments)};!function(e,t){var r,n,a,i,o;!function(e){e.CssInsert="css-insert",e.TextInsert="text-insert",e.Href="href-insert",e.ImageSrc="image-insert",e.Html="html-replace",e.JS="js-insert"}(n||(n={})),function(e){e.LocalStorage="localstorage",e.Cookie="cookie",e.GetParam="get"}(a||(a={})),function(e){e.ExpFlags="ab__exp_flags",e.RedirParam="vq__redir_param"}(i||(i={})),function(e){e.Init="init",e.Param="getParam",e.Flags="getFlags",e.Experiments="getExperiments",e.SetConfig="setConfig",e.GetConfig="getConfig"}(o||(o={}));var c={},s={},u={},l={enableRedir:!0,enableVisual:!0,enableHTML:!0,enableJS:!1,enableWatch:!1,storeRedirParam:!0,metrikaTimeout:100,nonce:void 0},f={enableRedir:["boolean"],enableVisual:["boolean"],enableHTML:["boolean"],enableJS:["boolean"],enableWatch:["boolean"],metrikaTimeout:["number"],storeRedirParam:["boolean","string"],nonce:["string"]},m={},v="https://uaas.yandex.ru/v1/exps/";var d,h="_ymab_param",p=36e5,g=31536e6,b=/\/$/;function y(e,r,n){void 0===n&&(n=g);var a=new Date(Date.now()+n).toUTCString();t.cookie="".concat(e,"=").concat(r,"; path=/; expires=").concat(a,";")}function x(e){var r=new RegExp("(?:^|; )".concat(e,"=([^;]*)")),n=t.cookie.match(r);return n&&n[1]||void 0}function I(e,t){var r=e.indexOf(t);return-1===r?[]:[e.slice(0,r).trim(),e.slice(r+1)]}function S(e,t){return e.reduce((function(e,r){var a=r.t,i=r.n,o=r.v;function c(){var t=e.flags[i];t||(e.flags[i]=t=[]),t.push(o)}if("visual"===a&&t.enableVisual){var s=I(o,"|"),u=s[0],l=s[1];if(!u||void 0===l)return e;switch(i){case n.CssInsert:e.cssInsert.push({selector:u,value:l});break;case n.TextInsert:e.textInsert.push({selector:u,value:l});break;case n.Href:e.hrefInsert.push({selector:u,value:l});break;case n.ImageSrc:e.imageSrcInsert.push({selector:u,value:l});break;case n.Html:t.enableHTML?e.htmlReplace.push({selector:u,value:l}):c();break;case n.JS:t.enableJS?e.jsInsert.push({selector:u,value:l}):c()}return e}return"redir"===a&&t.enableRedir?(e.redirect.push(o),e):(c(),e)}),{cssInsert:[],textInsert:[],redirect:[],hrefInsert:[],imageSrcInsert:[],htmlReplace:[],jsInsert:[],flags:{}})}function P(e,r,n,a){try{var i=t.createElement("script");i.nonce=e,i.setAttribute("type","text/javascript"),i.innerHTML="\n            (function(element) {\n                ".concat(n,"\n            })(document.querySelector('").concat(a,"'));"),t.body.appendChild(i)}catch(r){}}var w=new Set([n.JS,n.CssInsert]),R={cache:{},getItem:function(e,t){var r=this.cache[e];r||(r=this.cache[e]={});var n=r[t.selector];n||(n=r[t.selector]={});var a=n[t.value];return a||(a=n[t.value]=new Set),a},has:function(e,t,r){return w.has(e)&&this.getItem(e,t).has(r)},add:function(e,t,r){return this.getItem(e,t).add(r)}};function T(e,r,n,a){var i=n.selector,o=n.value;if(i&&void 0!==o){var c=function(e){return e?t.querySelector(e):void 0}(i);c?R.has(e,n,c)||(r(c,o,i),R.add(e,n,c)):a>0&&setTimeout((function(){return T(e,r,n,a-1)}),100)}}function k(e,t,r,n){r.length&&r.forEach((function(r){return T(e,t,r,n?100:0)}))}var _,C={},E=0;var L=k.bind(null,n.TextInsert,(function(e,t){return e.textContent===t||(e.textContent=t)})),j=k.bind(null,n.Href,(function(e,t){return e.getAttribute("href")===t.trim()||e.setAttribute("href",t.trim())})),H=k.bind(null,n.ImageSrc,(function(e,t){return e.getAttribute("src")===t.trim()||e.setAttribute("src",t.trim())})),O=k.bind(null,n.Html,(function(e,t){return e.innerHTML===t||(e.innerHTML=t)})),A=k.bind(null,n.CssInsert,(function(e,t){try{for(var r=t.trim().split(";"),n=0,a=r;n<a.length;n++){var i=a[n];if(i){var o=I(i,":"),c=o[0],s=o[1];c&&void 0!==s&&(e.style[c]=s)}}}catch(e){}})),J=function(e,t,r){k(n.JS,P.bind(null,t),e,r)};var F=!1;function M(t,r){return new Promise((function(n){var a,i=I(t,"."),o=(i[0],i[1]);if(o)try{null===(a=e.ym)||void 0===a||a.call(e,o,"experiments",r)}catch(e){}!function a(){if(o){var i=function(t){var r,n,a="yaCounter".concat(t),i=e[a];if(!i)try{var o=(null===(n=null===(r=e.Ya)||void 0===r?void 0:r._metrika)||void 0===n?void 0:n.counters)||{};return o[Object.keys(o).find((function(e){return 0===e.indexOf("".concat(t,":"))}))||""]}catch(e){}return i}(o);if(i){try{i.experiments(r)}catch(e){}F=!0,n(!0)}else setTimeout(a,10)}else console.error("Bad clientId = ".concat(t))}()}))}function G(t,r){if(void 0===r&&(r=e.location.href),0!==t.length){var n=new URL(r),a=n.pathname;n.pathname="";var o=new URL(t,n.toString());o.protocol=n.protocol,o.hostname=n.hostname;var c=0,s=!0;return n.searchParams.forEach((function(e,t){t!==i.ExpFlags&&t!==i.RedirParam&&(c++,o.searchParams.has(t)?s&&o.searchParams.get(t)!==e&&(s=!1):o.searchParams.set(t,e))})),s&&(s=c===Array.from(o.searchParams.keys()).length),s&&a.replace(b,"")===o.pathname.replace(b,"")?void 0:o}}function U(e,t,r){var n=6,a=0;!function e(){var i;try{for(;a<r.length;a++)null===(i=r[a])||void 0===i||i.call(null,t)}catch(t){n-- >0?setTimeout(e,50):console.error(t)}}(),function(e){if(d&&"object"==typeof d){!0===d[e]&&(d[e]=!1);var t=d.callback;if(t){for(var r=0,n=Object.entries(d);r<n.length;r++){var a=n[r],i=a[0],o=a[1],c=I(i,"."),s=c[0],u=c[1];if(s&&u&&!0===o&&s.length>0&&!isNaN(Number(u)))return}setTimeout(t,0)}}}(e)}function N(r,n,o,f){if("string"!=typeof r)throw new Error("clientId: should be string");u[r]=!0;var d=10,b=new URL(v),I=b.searchParams;I.set("client_id",String(r)),I.set("url",e.location.href),I.set("i",n||x(h)||""),o&&I.set("client_features",JSON.stringify(o));var P=b.toString(),w=s[P];if(w)return f(w);var R=c[P];if(R)R.push(f);else{R=[f],c[P]=R;var T=setTimeout(k,5e3);q(P,N,(function e(){if(--d>0)return q(P,N,e);clearTimeout(T),k()}))}function k(){if(!s[P]){var e={flags:{},i:n,experiments:void 0};s[P]=e,M(r,"wSIKtymTfos,"),R&&U(r,e,R)}}function N(o){var c=m[r]||l,u=S(o.flags,c),f=u.flags,v=u.cssInsert,d=u.textInsert,b=u.hrefInsert,I=u.jsInsert,w=u.imageSrcInsert,k=u.redirect,N=u.htmlReplace,q={i:o.i,experiments:o.experiments,flags:f};o.i&&(n=o.i);var W=function(t){try{switch(t){case a.Cookie:return x(i.RedirParam);case a.GetParam:return new URLSearchParams(e.location.search).get(i.RedirParam)||void 0;case a.LocalStorage:case!0:return e.localStorage.getItem(i.RedirParam)||void 0}}catch(e){}}(c.storeRedirParam);function D(e){void 0===e&&(e=!1),O(N,e),j(b,e),H(w,e),L(d,e),A(v,e),J(I,c.nonce,e)}W&&W!==o.experiments?M(r,W).then((function(){return function(t){try{switch(t){case a.Cookie:return y(i.RedirParam,"",-g);case a.GetParam:var r=new URL(e.location.href);r.searchParams.delete(i.RedirParam),e.history.replaceState(e.history.state,"",r.toString());break;case a.LocalStorage:case!0:return e.localStorage.removeItem(i.RedirParam)}}catch(e){}}(c.storeRedirParam)})).then((function(){return M(r,o.experiments)})):M(r,o.experiments),clearTimeout(T),s[P]=q,q.i&&y(h,q.i),function(t,r,n){if(!t||!t.length)return!1;for(var o,c=0,s=t;c<s.length&&!(o=G(s[c]));c++);if(!o)return!1;var u=0;if(n)try{switch(r.storeRedirParam){case!0:case a.LocalStorage:e.localStorage.setItem(i.RedirParam,n);break;case a.Cookie:y(i.RedirParam,n,p);break;case a.GetParam:o.searchParams.set(i.RedirParam,n);break;default:u=r.metrikaTimeout}}catch(e){u=r.metrikaTimeout}var l,f,m=o.toString();function v(){clearTimeout(f),clearTimeout(l),e.location.replace(m)}return f=setTimeout(v,u),function e(){F?v():l=setTimeout(e,10)}(),!0}(k,c,o.experiments)||(!function(e,r){if(e.length){for(var n=[],a=0,i=e;a<i.length;a++){var o=i[a],c=o.selector,s=o.value.trim();n.push("".concat(c," {").concat(s,"}"))}try{var u=t.createElement("style");u.nonce=r,u.setAttribute("type","text/css"),u.textContent=n.join("\n").replace(/;/g," !important;"),t.body.appendChild(u)}catch(e){}}}(v,c.nonce),c.enableWatch&&function(r,n){var a;null===(a=C[r])||void 0===a||a.disconnect();var i=new e.MutationObserver((function(){E++>=5||(n(),clearTimeout(_),_=setTimeout((function(){E=0}),0))}));C[r]=i,i.observe(t.body,{subtree:!0,childList:!0,characterData:!0,attributes:!0,attributeFilter:["class"]})}(r,(function(){return D()})),D(!c.enableWatch),R&&U(r,q,R))}}function q(e,t,r){var n=new XMLHttpRequest;return n.open("GET",e),n.addEventListener("load",(function(){if(200!==n.status)r(n.statusText);else try{var e=JSON.parse(n.responseText);t(e)}catch(e){e instanceof Error&&r(e.message)}})),n.addEventListener("error",(function(){return r(n.statusText)})),n.send()}var W=((r={})[o.Init]=function(e,t,r,n){N(e,t,r,(function(e){return n&&n(e)}))},r[o.Flags]=function(e,t,r,n){N(e,t,r,(function(e){return n&&n(e.flags)}))},r[o.Experiments]=function(e,t,r,n){N(e,t,r,(function(e){return n&&n(e.experiments)}))},r[o.Param]=function(e,t,r,n){N(e,t,r,(function(e){return n&&n(e.i)}))},r[o.SetConfig]=function(e,t,r,n){D(e,r),n&&n()},r[o.GetConfig]=function(e,t,r,n){var a=m[e]||l,i=__assign({},a);delete i.nonce,n&&n(i)},r);function D(e,t){var r;if("object"==typeof t)for(var n=m[e]||(m[e]=__assign({},l)),a=0,i=Object.keys(t);a<i.length;a++){var o=i[a];if(o in n){var c=o,s=t[c];(null===(r=f[c])||void 0===r?void 0:r.includes(typeof s))&&(n[c]=s)}}}function V(e,t,r,n,a){if("object"==typeof e)return function(e){var t=e.clientId,r=e.config;if(!t)throw new Error("clientId is required");D(t,r),W.init(t,e.i,e.clientFeatures,e.callback)}(e);if(!t)throw new Error("method not specified");if(!(t in W))throw new Error("unknown method");"function"==typeof n&&(a=n,n={}),"function"==typeof r&&(a=r,r=void 0),"object"==typeof r&&(n=r,r=void 0),n||(n={}),W[t](e,r,n,a)}"ymab"in e&&"object"==typeof e.ymab&&e.ymab.inited||(e.ymab&&(Array.isArray(e.ymab.a)&&e.ymab.a.forEach((function(e){return V.apply(null,e)})),"object"==typeof e.ymab.antiFlicker&&(d=e.ymab.antiFlicker)),V.inited=!0,e.ymab=V,function(e,t){var r;!function(e){e.AppendRemote="appendremote"}(r||(r={}));var n=["ru","ua","by","kz","com","com.tr"];var a={};function i(e){var t=new URL(e),r=t.hostname,a=t.protocol,i=(null==r?void 0:r.split("."))||[];"test"===i[1]&&i.splice(1,1);var o=i[0],c=i[1],s=i.slice(2).join(".");return"https:"===a&&"ab"===o&&"yandex"===c&&-1!==n.indexOf(s)}e.addEventListener("message",(function(e){var n=e.origin;if(n&&i(n)){var o=function(e){if(!e)return null;if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(e){return null}}(e.data);if(o&&u[o.clientId]&&o.type===r.AppendRemote)!function(e){if(e&&function(e){return e&&/^https:\/\/abt\.s3\.yandex\.net\/(\w|-|\/|(\.)(?!\.))+\.js$/.test(e)}(e)&&!a[e]){var r=t.createElement("script");r.async=!0,r.type="text/javascript",r.src=e;var n=t.head;n.insertBefore(r,n.firstChild),a[e]=!0}}(o.url)}}))}(e,t))}(window,document);