var ds=Object.defineProperty,ot=Object.getOwnPropertySymbols,Gt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable,at=Math.pow,Vt=(s,e,n)=>e in s?ds(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,us=(s,e)=>{for(var n in e||(e={}))Gt.call(e,n)&&Vt(s,n,e[n]);if(ot)for(var n of ot(e))Rt.call(e,n)&&Vt(s,n,e[n]);return s},ps=(s,e)=>{var n={};for(var t in s)Gt.call(s,t)&&e.indexOf(t)<0&&(n[t]=s[t]);if(s!=null&&ot)for(var t of ot(s))e.indexOf(t)<0&&Rt.call(s,t)&&(n[t]=s[t]);return n},He=(s,e,n)=>new Promise((t,r)=>{var o=i=>{try{l(n.next(i))}catch(c){r(c)}},a=i=>{try{l(n.throw(i))}catch(c){r(c)}},l=i=>i.done?t(i.value):Promise.resolve(i.value).then(o,a);l((n=n.apply(s,e)).next())});import{S,i as D,s as N,a as O,e as x,b as m,c as se,d as k,n as C,f as y,t as f,g as U,h as P,j as v,k as Ee,l as q,m as B,o as z,p as w,q as j,r as Y,u as R,v as De,w as fs,x as oe,y as lt,z as qe,A as ze,B as je,C as Ce,D as le,E as G,F as $e,G as fe,H as Q,I as ne,J as me,K as ie,L as Me,M as he,N as Yt,O as ae,P as ms,Q as Jt,R as gs,T as vs,U as $s,V as hs,W as xs,X as Je,Y as _t,Z,_ as bs,$ as qt,a0 as Zt,a1 as ws,a2 as ks,a3 as ys,a4 as _s,a5 as K,a6 as Ze,a7 as Ke,a8 as xe,a9 as Fe,aa as re,ab as Kt,ac as Te,ad as Ie,ae as pe,af as zt,ag as ce,ah as be,ai as _e,aj as de,ak as Xe,al as Qe,am as Ge,an as jt,ao as Ct,ap as et,aq as it,ar as Xt,as as Qt,at as Se,au as Re,av as tt,aw as ct,ax as dt,ay as Tt,az as qs,aA as zs,aB as Be,aC as js,aD as Cs,aE as Ts,aF as en,aG as tn,aH as Is,aI as It,aJ as Bs,aK as Le,aL as Ve,aM as nn,aN as Ns,aO as As,aP as ut,aQ as Es,aR as rn,aS as nt,aT as sn,aU as on,aV as Ss,aW as Ds,aX as Ms,aY as Ws,aZ as We,a_ as Ls,a$ as Os}from"./chunk-model.js";import{t as Us,n as Ps,a as Hs,f as an,i as Ye,b as Oe,s as Bt,c as Fs,d as pt,v as ln,e as cn,g as dn,h as Gs,j as Rs,k as Vs,l as Ys,m as Js,o as Zs,r as Nt,M as Ks,p as un,q as pn,u as Xs,w as Qs,x as eo,y as to,z as no,A as ro}from"./chunk-index.js";import{F as fn,l as so}from"./chunk-linkify.js";/*!
Build date: Fri Sep 08 2023 15:44:52 GMT+0500 (Yekaterinburg Standard Time)
*/function oo(s){O(s,"svelte-1maxa33",".avatar.svelte-1maxa33{border-radius:50%;overflow:hidden;background-size:cover;background-position:center}.avatar_sm.svelte-1maxa33{width:18px;height:18px;min-width:18px}.avatar_lg.svelte-1maxa33{width:40px;height:40px;min-width:40px}")}function ao(s){let e,n;return{c(){e=x("div"),m(e,"class",n="avatar avatar_"+s[0]+" bc_a svelte-1maxa33"),se(e,"background-image","url("+s[1]+")")},m(t,r){k(t,e,r)},p(t,[r]){r&1&&n!==(n="avatar avatar_"+t[0]+" bc_a svelte-1maxa33")&&m(e,"class",n),r&2&&se(e,"background-image","url("+t[1]+")")},i:C,o:C,d(t){t&&y(e)}}}function lo(s,e,n){let{size:t}=e,{src:r}=e;return s.$$set=o=>{"size"in o&&n(0,t=o.size),"src"in o&&n(1,r=o.src)},[t,r]}class ft extends S{constructor(e){super(),D(this,e,lo,ao,N,{size:0,src:1},oo)}}function io(s){O(s,"svelte-10p87gt",".container.svelte-10p87gt{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.avatar.svelte-10p87gt:not(:last-child){margin-right:-10px;-webkit-mask-image:radial-gradient(circle at 50px, transparent, transparent 22px, black 22px);mask-image:radial-gradient(circle at 50px, transparent, transparent 22px, black 22px)}")}function mn(s,e,n){const t=s.slice();return t[1]=e[n],t}function gn(s){let e,n,t,r;return n=new ft({props:{size:"lg",src:s[1]}}),{c(){e=x("div"),q(n.$$.fragment),t=B(),m(e,"class","avatar svelte-10p87gt")},m(o,a){k(o,e,a),z(n,e,null),w(e,t),r=!0},p(o,a){const l={};a&1&&(l.src=o[1]),n.$set(l)},i(o){r||(f(n.$$.fragment,o),r=!0)},o(o){v(n.$$.fragment,o),r=!1},d(o){o&&y(e),j(n)}}}function co(s){let e,n,t=s[0],r=[];for(let a=0;a<t.length;a+=1)r[a]=gn(mn(s,t,a));const o=a=>v(r[a],1,1,()=>{r[a]=null});return{c(){e=x("div");for(let a=0;a<r.length;a+=1)r[a].c();m(e,"class","container svelte-10p87gt")},m(a,l){k(a,e,l);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(a,[l]){if(l&1){t=a[0];let i;for(i=0;i<t.length;i+=1){const c=mn(a,t,i);r[i]?(r[i].p(c,l),f(r[i],1)):(r[i]=gn(c),r[i].c(),f(r[i],1),r[i].m(e,null))}for(U(),i=t.length;i<r.length;i+=1)o(i);P()}},i(a){if(!n){for(let l=0;l<t.length;l+=1)f(r[l]);n=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)v(r[l]);n=!1},d(a){a&&y(e),Ee(r,a)}}}function uo(s,e,n){let{avatars:t=[]}=e;return s.$$set=r=>{"avatars"in r&&n(0,t=r.avatars)},[t]}class po extends S{constructor(e){super(),D(this,e,uo,co,N,{avatars:0},io)}}function fo(s){O(s,"svelte-n3a0ou",".button.svelte-n3a0ou{margin:0}")}function vn(s){let e,n;return{c(){e=x("span"),m(e,"class",n="button__icon cqi-chat "+s[2]+" svelte-n3a0ou")},m(t,r){k(t,e,r)},p(t,r){r&4&&n!==(n="button__icon cqi-chat "+t[2]+" svelte-n3a0ou")&&m(e,"class",n)},d(t){t&&y(e)}}}function $n(s){let e,n;const t=s[11].default,r=qe(t,s,s[10],null);return{c(){e=x("span"),r&&r.c(),m(e,"class","button__text")},m(o,a){k(o,e,a),r&&r.m(e,null),n=!0},p(o,a){r&&r.p&&(!n||a&1024)&&ze(r,t,o,o[10],n?Ce(t,o[10],a,null):je(o[10]),null)},i(o){n||(f(r,o),n=!0)},o(o){v(r,o),n=!1},d(o){o&&y(e),r&&r.d(o)}}}function mo(s){let e,n,t,r,o,a,l=s[2]&&vn(s),i=s[8].default&&$n(s);return{c(){e=x("button"),l&&l.c(),n=B(),i&&i.c(),m(e,"class",t="button button_"+s[1]+" "+s[6]+" "+(s[3]?"accent":"")+" svelte-n3a0ou"),m(e,"title",s[5]),m(e,"type",s[7]),e.disabled=s[0],Y(e,"button_full-width",s[4])},m(c,d){k(c,e,d),l&&l.m(e,null),w(e,n),i&&i.m(e,null),r=!0,o||(a=R(e,"click",s[12]),o=!0)},p(c,[d]){c[2]?l?l.p(c,d):(l=vn(c),l.c(),l.m(e,n)):l&&(l.d(1),l=null),c[8].default?i?(i.p(c,d),d&256&&f(i,1)):(i=$n(c),i.c(),f(i,1),i.m(e,null)):i&&(U(),v(i,1,1,()=>{i=null}),P()),(!r||d&10&&t!==(t="button button_"+c[1]+" "+c[6]+" "+(c[3]?"accent":"")+" svelte-n3a0ou"))&&m(e,"class",t),(!r||d&32)&&m(e,"title",c[5]),(!r||d&1)&&(e.disabled=c[0]),(!r||d&26)&&Y(e,"button_full-width",c[4])},i(c){r||(f(i),r=!0)},o(c){v(i),r=!1},d(c){c&&y(e),l&&l.d(),i&&i.d(),o=!1,a()}}}function go(s,e,n){const t=["disabled","size","iconClassName","isAccent","fullWidth","submit","title"];let r=De(e,t),{$$slots:o={},$$scope:a}=e;const l=fs(o);let{disabled:i=!1}=e,{size:c="md"}=e,{iconClassName:d=""}=e,{isAccent:u=!1}=e,{fullWidth:p=!1}=e,{submit:$=!1}=e,{title:g=""}=e,h=r.class?r.class:"",_=$?"submit":"button";function b(T){le.call(this,s,T)}return s.$$set=T=>{e=oe(oe({},e),lt(T)),n(13,r=De(e,t)),"disabled"in T&&n(0,i=T.disabled),"size"in T&&n(1,c=T.size),"iconClassName"in T&&n(2,d=T.iconClassName),"isAccent"in T&&n(3,u=T.isAccent),"fullWidth"in T&&n(4,p=T.fullWidth),"submit"in T&&n(9,$=T.submit),"title"in T&&n(5,g=T.title),"$$scope"in T&&n(10,a=T.$$scope)},[i,c,d,u,p,g,h,_,l,$,a,o,b]}let ge=class extends S{constructor(s){super(),D(this,s,go,mo,N,{disabled:0,size:1,iconClassName:2,isAccent:3,fullWidth:4,submit:9,title:5},fo)}};function vo(s){O(s,"svelte-q46251",'@charset "UTF-8";.container.svelte-q46251{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.icon.svelte-q46251{margin:0 15px}.text.svelte-q46251{margin-top:5px;font-weight:bold;font-size:12px}.dark-theme .text.svelte-q46251{color:#ffffff}')}function $o(s){let e,n,t,r,o,a,l,i,c;const d=[s[1]];let u={};for(let p=0;p<d.length;p+=1)u=oe(u,d[p]);return t=new ge({props:u}),{c(){e=x("div"),n=x("div"),q(t.$$.fragment),r=B(),o=x("div"),a=G(s[0]),m(n,"class","icon svelte-q46251"),m(o,"class","text svelte-q46251"),m(e,"class","container carousel__item svelte-q46251")},m(p,$){k(p,e,$),w(e,n),z(t,n,null),w(e,r),w(e,o),w(o,a),l=!0,i||(c=R(e,"click",s[4]),i=!0)},p(p,[$]){const g=$&2?$e(d,[fe(p[1])]):{};t.$set(g),(!l||$&1)&&Q(a,p[0])},i(p){l||(f(t.$$.fragment,p),l=!0)},o(p){v(t.$$.fragment,p),l=!1},d(p){p&&y(e),j(t),i=!1,c()}}}function ho(s,e,n){let{accent:t=!1}=e,{text:r}=e,{icon:o}=e;const a={isAccent:t,iconClassName:o,size:"sm"};function l(i){le.call(this,s,i)}return s.$$set=i=>{"accent"in i&&n(2,t=i.accent),"text"in i&&n(0,r=i.text),"icon"in i&&n(3,o=i.icon)},[r,a,t,o,l]}class hn extends S{constructor(e){super(),D(this,e,ho,$o,N,{accent:2,text:0,icon:3},vo)}}function xo(s){O(s,"svelte-smvdu",'@charset "UTF-8";.container.svelte-smvdu{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:15px;color:var(--contrast-color)}.left.svelte-smvdu,.right.svelte-smvdu{-ms-flex-item-align:start;align-self:flex-start}.left.svelte-smvdu{margin-right:auto}.right.svelte-smvdu{margin-left:auto}.center.svelte-smvdu{-ms-flex-item-align:center;align-self:center;overflow:hidden;text-align:center}')}const bo=s=>({}),xn=s=>({}),wo=s=>({}),bn=s=>({});function ko(s){let e,n,t,r,o,a,l;const i=s[1].left,c=qe(i,s,s[0],bn),d=s[1].default,u=qe(d,s,s[0],null),p=s[1].right,$=qe(p,s,s[0],xn);return{c(){e=x("div"),n=x("div"),c&&c.c(),t=B(),r=x("div"),u&&u.c(),o=B(),a=x("div"),$&&$.c(),m(n,"class","left svelte-smvdu"),m(r,"class","center svelte-smvdu"),m(a,"class","right svelte-smvdu"),m(e,"class","container svelte-smvdu")},m(g,h){k(g,e,h),w(e,n),c&&c.m(n,null),w(e,t),w(e,r),u&&u.m(r,null),w(e,o),w(e,a),$&&$.m(a,null),l=!0},p(g,[h]){c&&c.p&&(!l||h&1)&&ze(c,i,g,g[0],l?Ce(i,g[0],h,wo):je(g[0]),bn),u&&u.p&&(!l||h&1)&&ze(u,d,g,g[0],l?Ce(d,g[0],h,null):je(g[0]),null),$&&$.p&&(!l||h&1)&&ze($,p,g,g[0],l?Ce(p,g[0],h,bo):je(g[0]),xn)},i(g){l||(f(c,g),f(u,g),f($,g),l=!0)},o(g){v(c,g),v(u,g),v($,g),l=!1},d(g){g&&y(e),c&&c.d(g),u&&u.d(g),$&&$.d(g)}}}function yo(s,e,n){let{$$slots:t={},$$scope:r}=e;return s.$$set=o=>{"$$scope"in o&&n(0,r=o.$$scope)},[r,t]}class mt extends S{constructor(e){super(),D(this,e,yo,ko,N,{},xo)}}function _o(s){let e,n;return{c(){e=x("i"),m(e,"class",n="cqi-chat "+s[0])},m(t,r){k(t,e,r)},p(t,[r]){r&1&&n!==(n="cqi-chat "+t[0])&&m(e,"class",n)},i:C,o:C,d(t){t&&y(e)}}}function qo(s,e,n){let{icon:t}=e;return s.$$set=r=>{"icon"in r&&n(0,t=r.icon)},[t]}class gt extends S{constructor(e){super(),D(this,e,qo,_o,N,{icon:0})}}function zo(s){O(s,"svelte-djxmmk",'@charset "UTF-8";.grid-cell.svelte-djxmmk{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;grid-row:1;grid-column:1}.content.svelte-djxmmk{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;background-color:#ffffff;border-top-right-radius:15px;border-top-left-radius:15px}.embedded-screen .content.svelte-djxmmk{border-top-right-radius:0;border-top-left-radius:0}.dark-theme .content.svelte-djxmmk{background-color:#333333}')}const jo=s=>({}),wn=s=>({});function Co(s){let e,n,t,r,o,a,l,i,c;const d=s[1].header,u=qe(d,s,s[0],wn),p=s[1].default,$=qe(p,s,s[0],null);return{c(){e=x("div"),n=x("div"),u&&u.c(),o=B(),a=x("div"),$&&$.c(),m(a,"class","content svelte-djxmmk"),m(e,"class","grid-cell svelte-djxmmk")},m(g,h){k(g,e,h),w(e,n),u&&u.m(n,null),w(e,o),w(e,a),$&&$.m(a,null),c=!0},p(g,[h]){u&&u.p&&(!c||h&1)&&ze(u,d,g,g[0],c?Ce(d,g[0],h,jo):je(g[0]),wn),$&&$.p&&(!c||h&1)&&ze($,p,g,g[0],c?Ce(p,g[0],h,null):je(g[0]),null)},i(g){c||(f(u,g),ne(()=>{c&&(r&&r.end(1),t=me(n,ie,{duration:250,delay:300}),t.start())}),f($,g),ne(()=>{c&&(i&&i.end(1),l=me(a,Me,{y:25,duration:300,delay:300}),l.start())}),c=!0)},o(g){v(u,g),t&&t.invalidate(),r=he(n,ie,{duration:250}),v($,g),l&&l.invalidate(),i=he(a,Me,{y:25,duration:300}),c=!1},d(g){g&&y(e),u&&u.d(g),g&&r&&r.end(),$&&$.d(g),g&&i&&i.end()}}}function To(s,e,n){let{$$slots:t={},$$scope:r}=e;return s.$$set=o=>{"$$scope"in o&&n(0,r=o.$$scope)},[r,t]}class At extends S{constructor(e){super(),D(this,e,To,Co,N,{},zo)}}function Io(s){O(s,"svelte-u1n5nn",'@charset "UTF-8";button.svelte-u1n5nn{padding:5px;border:none;border-radius:50%;background-color:rgba(255, 255, 255, 0.25);cursor:pointer;-webkit-transition:background-color 0.15s;transition:background-color 0.15s}button.svelte-u1n5nn:hover{background-color:rgba(255, 255, 255, 0.4)}.cqi-chat.svelte-u1n5nn{color:var(--contrast-color)}')}function Bo(s){let e,n,t,r,o;return{c(){e=x("button"),n=x("div"),m(n,"class",t="cqi-chat cqi-md "+s[0]+" svelte-u1n5nn"),m(e,"type","button"),m(e,"class","svelte-u1n5nn")},m(a,l){k(a,e,l),w(e,n),r||(o=R(e,"click",s[1]),r=!0)},p(a,[l]){l&1&&t!==(t="cqi-chat cqi-md "+a[0]+" svelte-u1n5nn")&&m(n,"class",t)},i:C,o:C,d(a){a&&y(e),r=!1,o()}}}function No(s,e,n){let{icon:t}=e;function r(o){le.call(this,s,o)}return s.$$set=o=>{"icon"in o&&n(0,t=o.icon)},[t,r]}class kn extends S{constructor(e){super(),D(this,e,No,Bo,N,{icon:0},Io)}}function Ao(s){O(s,"svelte-wzivmz",'@charset "UTF-8";div.svelte-wzivmz{width:50px;height:50px;border-radius:9999px;border:3px solid;border-color:var(--contrast-color);border-top-color:transparent;-webkit-animation:svelte-wzivmz-rotation 0.75s linear infinite;animation:svelte-wzivmz-rotation 0.75s linear infinite}@-webkit-keyframes svelte-wzivmz-rotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes svelte-wzivmz-rotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}')}function Eo(s){let e;return{c(){e=x("div"),m(e,"class","svelte-wzivmz")},m(n,t){k(n,e,t)},p:C,i:C,o:C,d(n){n&&y(e)}}}class So extends S{constructor(e){super(),D(this,e,null,Eo,N,{},Ao)}}function Do(s){O(s,"svelte-ozelzb",".spinner.svelte-ozelzb{width:11px;min-width:11px;height:11px;border-radius:50%;border-width:2px;border-style:solid;border-top-color:transparent !important;-webkit-animation:svelte-ozelzb-openedLoaderRotate 0.75s linear infinite;animation:svelte-ozelzb-openedLoaderRotate 0.75s linear infinite}@-webkit-keyframes svelte-ozelzb-openedLoaderRotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes svelte-ozelzb-openedLoaderRotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}")}function Mo(s){let e;return{c(){e=x("div"),m(e,"class","spinner border_a svelte-ozelzb")},m(n,t){k(n,e,t)},p:C,i:C,o:C,d(n){n&&y(e)}}}class Wo extends S{constructor(e){super(),D(this,e,null,Mo,N,{},Do)}}function Lo(s){O(s,"svelte-mcz3m2",'@charset "UTF-8";.timer.svelte-mcz3m2{-webkit-font-feature-settings:"tnum";font-feature-settings:"tnum"}.dark-theme .theme.timer.svelte-mcz3m2{color:#ffffff}')}function Oo(s){let e,n=Yt(s[0])+"",t,r;return{c(){e=x("span"),t=G(n),m(e,"class",r="timer "+(s[1]?"accent":"theme")+" svelte-mcz3m2")},m(o,a){k(o,e,a),w(e,t)},p(o,[a]){a&1&&n!==(n=Yt(o[0])+"")&&Q(t,n),a&2&&r!==(r="timer "+(o[1]?"accent":"theme")+" svelte-mcz3m2")&&m(e,"class",r)},i:C,o:C,d(o){o&&y(e)}}}function Uo(s,e,n){let{timeSeconds:t=0}=e,{isInAccentUsage:r=!1}=e;return s.$$set=o=>{"timeSeconds"in o&&n(0,t=o.timeSeconds),"isInAccentUsage"in o&&n(1,r=o.isInAccentUsage)},[t,r]}class Po extends S{constructor(e){super(),D(this,e,Uo,Oo,N,{timeSeconds:0,isInAccentUsage:1},Lo)}}function yn(s){let e,n;return e=new gt({props:{icon:s[0]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.icon=t[0]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Ho(s){let e,n,t=s[0]&&yn(s);return{c(){t&&t.c(),e=ae()},m(r,o){t&&t.m(r,o),k(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&f(t,1)):(t=yn(r),t.c(),f(t,1),t.m(e.parentNode,e)):t&&(U(),v(t,1,1,()=>{t=null}),P())},i(r){n||(f(t),n=!0)},o(r){v(t),n=!1},d(r){t&&t.d(r),r&&y(e)}}}function Fo(s,e,n){let t,{conversation:r}=e;return s.$$set=o=>{"conversation"in o&&n(1,r=o.conversation)},s.$$.update=()=>{s.$$.dirty&2&&n(0,t=ms(r.part_last,r.type))},[t,r]}class Go extends S{constructor(e){super(),D(this,e,Fo,Ho,N,{conversation:1})}}function Ro(s){O(s,"svelte-ng4p0k",'@charset "UTF-8";.container.svelte-ng4p0k{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px;border-radius:15px;line-height:20px;cursor:pointer;color:#595959;background-color:#f2f2f2;-webkit-transition:background-color 0.15s;transition:background-color 0.15s}.container.svelte-ng4p0k:hover{background-color:#e6e6e6}.operator-name.svelte-ng4p0k{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:bold;color:#333333}.date.svelte-ng4p0k{margin-left:auto;padding-left:10px;font-size:12px;white-space:nowrap;color:#999999}.message.svelte-ng4p0k{max-height:40px;overflow:hidden;margin-right:20px}.counter.svelte-ng4p0k{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-ms-flex-item-align:end;align-self:flex-end;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;min-width:18px;height:18px;margin-left:auto;padding:0 5px;background-color:#ff3b30;border-radius:9999px;color:#ffffff;font-size:11px;font-weight:bold}.dark-theme .container.svelte-ng4p0k{background-color:#4d4d4d;color:#e6e6e6}.dark-theme .container.svelte-ng4p0k:hover{background-color:#595959}.dark-theme .operator-name.svelte-ng4p0k{color:#ffffff}')}function Vo(s){let e,n=carrotquest.i18n.removedMessage+"",t;return{c(){e=x("span"),t=G(n),m(e,"class","text-muted"),m(e,"title",s[2])},m(r,o){k(r,e,o),w(e,t)},p(r,o){o&4&&m(e,"title",r[2])},i:C,o:C,d(r){r&&y(e)}}}function Yo(s){let e,n,t,r,o;return e=new Go({props:{conversation:s[0]}}),{c(){q(e.$$.fragment),n=B(),t=new Je(!1),r=ae(),t.a=r},m(a,l){z(e,a,l),k(a,n,l),t.m(s[6],a,l),k(a,r,l),o=!0},p(a,l){const i={};l&1&&(i.conversation=a[0]),e.$set(i),(!o||l&64)&&t.p(a[6])},i(a){o||(f(e.$$.fragment,a),o=!0)},o(a){v(e.$$.fragment,a),o=!1},d(a){j(e,a),a&&y(n),a&&y(r),a&&t.d()}}}function _n(s){let e,n;return{c(){e=x("div"),n=G(s[7]),m(e,"class","counter svelte-ng4p0k")},m(t,r){k(t,e,r),w(e,n)},p(t,r){r&128&&Q(n,t[7])},d(t){t&&y(e)}}}function Jo(s){let e,n,t,r,o,a,l,i,c,d,u,p,$,g,h,_,b,T,A;n=new ft({props:{size:"lg",src:s[4]}});const H=[Yo,Vo],E=[];function M(F,te){return F[0].part_last.removed?1:0}g=M(s),h=E[g]=H[g](s);let L=s[1]>0&&_n(s);return{c(){e=x("div"),q(n.$$.fragment),t=B(),r=x("div"),o=x("div"),a=x("div"),l=G(s[3]),i=B(),c=x("div"),d=G(s[5]),u=B(),p=x("div"),$=x("div"),h.c(),_=B(),L&&L.c(),m(a,"class","operator-name svelte-ng4p0k"),m(c,"class","date svelte-ng4p0k"),m(o,"class","flex flex-row"),m($,"class","message svelte-ng4p0k"),m(p,"class","flex flex-row"),m(r,"class","flex-grow overflow-hidden margin-left-10"),m(e,"class","container svelte-ng4p0k")},m(F,te){k(F,e,te),z(n,e,null),w(e,t),w(e,r),w(r,o),w(o,a),w(a,l),w(o,i),w(o,c),w(c,d),w(r,u),w(r,p),w(p,$),E[g].m($,null),w(p,_),L&&L.m(p,null),b=!0,T||(A=R(e,"click",s[9]),T=!0)},p(F,[te]){const ue={};te&16&&(ue.src=F[4]),n.$set(ue),(!b||te&8)&&Q(l,F[3]),(!b||te&32)&&Q(d,F[5]);let V=g;g=M(F),g===V?E[g].p(F,te):(U(),v(E[V],1,1,()=>{E[V]=null}),P(),h=E[g],h?h.p(F,te):(h=E[g]=H[g](F),h.c()),f(h,1),h.m($,null)),F[1]>0?L?L.p(F,te):(L=_n(F),L.c(),L.m(p,null)):L&&(L.d(1),L=null)},i(F){b||(f(n.$$.fragment,F),f(h),b=!0)},o(F){v(n.$$.fragment,F),v(h),b=!1},d(F){F&&y(e),j(n),E[g].d(),L&&L.d(),T=!1,A()}}}function Zo(s,e,n){let t,r,o,a,l,i,c,{conversation:d}=e,{unreadPartsCountOverride:u=null}=e;function p($){le.call(this,s,$)}return s.$$set=$=>{"conversation"in $&&n(0,d=$.conversation),"unreadPartsCountOverride"in $&&n(8,u=$.unreadPartsCountOverride)},s.$$.update=()=>{s.$$.dirty&257&&n(1,c=u||d.unread_parts_count),s.$$.dirty&2&&n(7,t=Jt(c)),s.$$.dirty&1&&n(6,r=gs(d)),s.$$.dirty&1&&n(5,o=vs(d.part_last.created)),s.$$.dirty&1&&n(4,a=$s(d)),s.$$.dirty&1&&n(3,l=hs(d)),s.$$.dirty&1&&n(2,i=xs(d.part_last))},[d,c,i,l,a,o,r,t,u,p]}let qn=class extends S{constructor(s){super(),D(this,s,Zo,Jo,N,{conversation:0,unreadPartsCountOverride:8},Ro)}};function Ko(){Us(),Ps()&&Hs(),an("messenger_closed")}function Xo(s){let e,n;return e=new kn({props:{icon:"cqi-chevron-down"}}),e.$on("click",s[0]),e.$on("click",s[1]),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Qo(s){function e(n){le.call(this,s,n)}return[e,()=>Ko()]}let rt=class extends S{constructor(s){super(),D(this,s,Qo,Xo,N,{})}};function ea(){const{subscribe:s,set:e}=_t(0);return{subscribe:s,go:(n,t)=>e({route:n,params:t})}}const Ne=ea();function ta(s){O(s,"svelte-1fp8yug",'@charset "UTF-8";.container.svelte-1fp8yug{position:relative;display:inline-block;cursor:pointer}.mask.show.svelte-1fp8yug{-webkit-mask-image:radial-gradient(circle at 30px 4px, transparent, transparent 9px, black 9px);mask-image:radial-gradient(circle at 30px 4px, transparent, transparent 9px, black 9px)}.counter.svelte-1fp8yug{position:absolute;left:23px;top:-3px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:14px;min-width:14px;padding:0px 4px;background-color:#ff3b30;border-radius:9999px;color:#fff;font-size:11px;font-weight:bold}.counter.svelte-1fp8yug:not(.show){display:none}')}function zn(s){let e,n,t;return{c(){e=x("div"),n=G(s[1]),m(e,"class","counter svelte-1fp8yug"),Y(e,"show",s[0]>0)},m(r,o){k(r,e,o),w(e,n)},p(r,o){o&2&&Q(n,r[1]),o&1&&Y(e,"show",r[0]>0)},i(r){r&&(t||ne(()=>{t=me(e,qt,{duration:300,start:.3}),t.start()}))},o:C,d(r){r&&y(e)}}}function na(s){let e,n,t,r,o=s[0],a,l,i;t=new kn({props:{icon:"cqi-arrow-left"}}),t.$on("click",s[3]);let c=zn(s);return{c(){e=x("label"),n=x("div"),q(t.$$.fragment),r=B(),c.c(),m(n,"class","mask svelte-1fp8yug"),Y(n,"show",s[0]),m(e,"class","container svelte-1fp8yug")},m(d,u){k(d,e,u),w(e,n),z(t,n,null),w(e,r),c.m(e,null),a=!0,l||(i=R(e,"click",s[2]),l=!0)},p(d,[u]){(!a||u&1)&&Y(n,"show",d[0]),u&1&&N(o,o=d[0])?(U(),v(c,1,1,C),P(),c=zn(d),c.c(),f(c,1),c.m(e,null)):c.p(d,u)},i(d){a||(f(t.$$.fragment,d),f(c),a=!0)},o(d){v(t.$$.fragment,d),v(c),a=!1},d(d){d&&y(e),j(t),c.d(d),l=!1,i()}}}function ra(s,e,n){let t,r;Z(s,bs,l=>n(0,r=l));function o(l){le.call(this,s,l)}const a=()=>Ne.go("startScreen");return s.$$.update=()=>{s.$$.dirty&1&&n(1,t=Jt(r))},[r,t,o,a]}let jn=class extends S{constructor(s){super(),D(this,s,ra,na,N,{},ta)}};function sa(s){O(s,"svelte-17sy7yq",".left-slot.svelte-17sy7yq{margin-right:15px}.right-slot.svelte-17sy7yq{margin-left:15px}.name.svelte-17sy7yq{font-weight:bold;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.status.svelte-17sy7yq{font-size:12px;opacity:0.8}")}function oa(s){let e,n,t,r,o;return{c(){e=x("div"),n=G(s[0]),t=B(),r=x("div"),o=G(s[1]),m(e,"class","name svelte-17sy7yq"),m(r,"class","status svelte-17sy7yq")},m(a,l){k(a,e,l),w(e,n),k(a,t,l),k(a,r,l),w(r,o)},p(a,l){l&1&&Q(n,a[0]),l&2&&Q(o,a[1])},d(a){a&&y(e),a&&y(t),a&&y(r)}}}function aa(s){let e,n,t;return n=new jn({}),n.$on("click",s[3]),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","left-slot svelte-17sy7yq"),m(e,"slot","left")},m(r,o){k(r,e,o),z(n,e,null),t=!0},p:C,i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function la(s){let e,n,t;return n=new rt({}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","right-slot svelte-17sy7yq"),m(e,"slot","right")},m(r,o){k(r,e,o),z(n,e,null),t=!0},p:C,i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function ia(s){let e,n;return e=new mt({props:{$$slots:{right:[la],left:[aa],default:[oa]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,[r]){const o={};r&19&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function ca(s,e,n){let t,r;Z(s,Zt,l=>n(0,t=l)),Z(s,ws,l=>n(1,r=l));let{conversation:o}=e;Zt.setFromConversation(o);const a=()=>{carrotquest.messenger.currentConversation=null};return s.$$set=l=>{"conversation"in l&&n(2,o=l.conversation)},[t,r,o,a]}let da=class extends S{constructor(s){super(),D(this,s,ca,ia,N,{conversation:2},sa)}};const vt=275;function ua(s,e=!1){return He(this,null,function*(){let n=Math.abs(s.scrollTop)<vt;(e||n)&&(yield ks(),setTimeout(()=>{s.scroll({top:s.scrollHeight})},50))})}function pa(s){O(s,"svelte-3ru3ix",".wrapper.svelte-3ru3ix{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.buttons.svelte-3ru3ix{display:-webkit-box;display:-ms-flexbox;display:flex}.progress-bar.svelte-3ru3ix{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}")}const fa=s=>({}),Cn=s=>({}),ma=s=>({}),Tn=s=>({}),ga=s=>({}),In=s=>({});function va(s){let e,n,t,r,o,a,l,i,c,d;const u=s[4].buttons,p=qe(u,s,s[3],In),$=s[4]["progress-bar"],g=qe($,s,s[3],Tn);l=new Po({props:{timeSeconds:s[2],isInAccentUsage:s[1]}});const h=s[4].extra,_=qe(h,s,s[3],Cn);return{c(){e=x("div"),n=x("div"),p&&p.c(),t=B(),r=x("div"),g&&g.c(),a=B(),q(l.$$.fragment),i=B(),c=x("div"),_&&_.c(),m(n,"class","buttons svelte-3ru3ix"),m(r,"class","progress-bar svelte-3ru3ix"),ne(()=>s[5].call(r)),m(c,"class","extra"),m(e,"class","wrapper svelte-3ru3ix")},m(b,T){k(b,e,T),w(e,n),p&&p.m(n,null),w(e,t),w(e,r),g&&g.m(r,null),o=ys(r,s[5].bind(r)),w(e,a),z(l,e,null),w(e,i),w(e,c),_&&_.m(c,null),d=!0},p(b,[T]){p&&p.p&&(!d||T&8)&&ze(p,u,b,b[3],d?Ce(u,b[3],T,ga):je(b[3]),In),g&&g.p&&(!d||T&8)&&ze(g,$,b,b[3],d?Ce($,b[3],T,ma):je(b[3]),Tn);const A={};T&4&&(A.timeSeconds=b[2]),T&2&&(A.isInAccentUsage=b[1]),l.$set(A),_&&_.p&&(!d||T&8)&&ze(_,h,b,b[3],d?Ce(h,b[3],T,fa):je(b[3]),Cn)},i(b){d||(f(p,b),f(g,b),f(l.$$.fragment,b),f(_,b),d=!0)},o(b){v(p,b),v(g,b),v(l.$$.fragment,b),v(_,b),d=!1},d(b){b&&y(e),p&&p.d(b),g&&g.d(b),o(),j(l),_&&_.d(b)}}}function $a(s,e,n){let{$$slots:t={},$$scope:r}=e,{isInAccentUsage:o=!0}=e,{timeSeconds:a}=e,{progressBarWidth:l}=e;function i(){l=this.offsetWidth,n(0,l)}return s.$$set=c=>{"isInAccentUsage"in c&&n(1,o=c.isInAccentUsage),"timeSeconds"in c&&n(2,a=c.timeSeconds),"progressBarWidth"in c&&n(0,l=c.progressBarWidth),"$$scope"in c&&n(3,r=c.$$scope)},[l,o,a,r,t,i]}let Et=class extends S{constructor(s){super(),D(this,s,$a,va,N,{isInAccentUsage:1,timeSeconds:2,progressBarWidth:0},pa)}};function Bn(s){return He(this,null,function*(){let e=s;typeof s=="string"&&(e=yield(yield(yield fetch(s)).blob()).arrayBuffer());const n=new AudioContext;return n.decodeAudioData(e).finally(()=>n.close())})}function ha(s){O(s,"svelte-fetvv5",'@charset "UTF-8";.root.svelte-fetvv5{display:grid;grid-template-rows:1fr;grid-template-columns:1fr}.buttons-container.svelte-fetvv5,.selected-button-container.svelte-fetvv5{grid-area:1/1/1/1;margin:-5px}.buttons-list.svelte-fetvv5,.selected-button-container.svelte-fetvv5{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.selected-button-container.svelte-fetvv5{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}button.svelte-fetvv5{vertical-align:middle;display:inline-block;outline:0;font-weight:normal;line-height:1.428571429;background-image:none;text-decoration:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-touch-action:manipulation;touch-action:manipulation;overflow:hidden;font-size:14px;background-color:rgba(0, 0, 0, 0);max-width:calc(100% - 1px);margin:5px;text-align:left;white-space:normal;-webkit-transition:all 0.3s, opacity 0.45s;transition:all 0.3s, opacity 0.45s;padding:9px 12px;border-radius:15px;border-width:1px;border-style:solid}button.selected.svelte-fetvv5{opacity:1;cursor:default}.dark .bot-answer-button{color:#ffffff}')}function Nn(s,e,n){const t=s.slice();return t[10]=e[n],t[12]=n,t}function xa(s){var e;let n,t,r,o=s[0].selectedAction.body+"",a,l,i,c,d=((e=s[0].selectedAction.body_json)==null?void 0:e.icon)&&An(s);return{c(){n=x("div"),t=x("button"),d&&d.c(),r=B(),a=G(o),m(t,"type","button"),m(t,"data-action-id",l=s[0].selectedAction.id),m(t,"class","bc_a color_c selected bot-answer-button border_a svelte-fetvv5"),m(n,"class","selected-button-container svelte-fetvv5")},m(u,p){k(u,n,p),w(n,t),d&&d.m(t,null),w(t,r),w(t,a),c=!0},p(u,p){var $;s=u,($=s[0].selectedAction.body_json)!=null&&$.icon?d?(d.p(s,p),p&1&&f(d,1)):(d=An(s),d.c(),f(d,1),d.m(t,r)):d&&(U(),v(d,1,1,()=>{d=null}),P()),(!c||p&1)&&o!==(o=s[0].selectedAction.body+"")&&Q(a,o),(!c||p&1&&l!==(l=s[0].selectedAction.id))&&m(t,"data-action-id",l)},i(u){c||(f(d),u&&(i||ne(()=>{i=me(t,s[3],{key:s[0].selectedAction.id}),i.start()})),c=!0)},o(u){v(d),c=!1},d(u){u&&y(n),d&&d.d()}}}function ba(s){let e,n,t=[],r=new Map,o,a,l,i=s[1];const c=d=>d[10].id;for(let d=0;d<i.length;d+=1){let u=Nn(s,i,d),p=c(u);r.set(p,t[d]=Sn(p,u))}return{c(){e=x("div"),n=x("div");for(let d=0;d<t.length;d+=1)t[d].c();m(n,"class","buttons-list svelte-fetvv5"),m(e,"class","buttons-container svelte-fetvv5")},m(d,u){k(d,e,u),w(e,n);for(let p=0;p<t.length;p+=1)t[p]&&t[p].m(n,null);l=!0},p(d,u){u&18&&(i=d[1],U(),t=Ze(t,u,c,1,d,i,r,n,Ke,Sn,null,Nn),P())},i(d){if(!l){for(let u=0;u<i.length;u+=1)f(t[u]);o&&o.end(1),a&&a.end(1),l=!0}},o(d){for(let u=0;u<t.length;u+=1)v(t[u]);d&&(o=he(n,ie,{duration:350})),d&&(a=he(e,xe,{axis:"y",delay:400,duration:400})),l=!1},d(d){d&&y(e);for(let u=0;u<t.length;u+=1)t[u].d();d&&o&&o.end(),d&&a&&a.end()}}}function An(s){let e,n;return e=new gt({props:{icon:s[0].selectedAction.body_json.icon}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.icon=t[0].selectedAction.body_json.icon),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function En(s){let e,n;return e=new gt({props:{icon:s[10].body_json.icon}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.icon=t[10].body_json.icon),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Sn(s,e){var n;let t,r,o=e[10].body+"",a,l,i,c,d,u,p,$=((n=e[10].body_json)==null?void 0:n.icon)&&En(e);function g(){return e[9](e[12])}return{key:s,first:null,c(){t=x("button"),$&&$.c(),r=B(),a=G(o),l=B(),m(t,"type","button"),m(t,"data-action-id",i=e[10].id),m(t,"class","bc-hover_a color-hover_c color_a bot-answer-button border_a svelte-fetvv5"),this.first=t},m(h,_){k(h,t,_),$&&$.m(t,null),w(t,r),w(t,a),w(t,l),d=!0,u||(p=R(t,"click",g),u=!0)},p(h,_){var b;e=h,(b=e[10].body_json)!=null&&b.icon?$?($.p(e,_),_&2&&f($,1)):($=En(e),$.c(),f($,1),$.m(t,r)):$&&(U(),v($,1,1,()=>{$=null}),P()),(!d||_&2)&&o!==(o=e[10].body+"")&&Q(a,o),(!d||_&2&&i!==(i=e[10].id))&&m(t,"data-action-id",i)},i(h){d||(f($),c&&c.end(1),d=!0)},o(h){v($),c=he(t,e[2],{key:e[10].id}),d=!1},d(h){h&&y(t),$&&$.d(),h&&c&&c.end(),u=!1,p()}}}function wa(s){let e,n,t,r;const o=[ba,xa],a=[];function l(i,c){return i[0].selectedAction?1:0}return n=l(s),t=a[n]=o[n](s),{c(){e=x("div"),t.c(),m(e,"class","root svelte-fetvv5")},m(i,c){k(i,e,c),a[n].m(e,null),r=!0},p(i,[c]){let d=n;n=l(i),n===d?a[n].p(i,c):(U(),v(a[d],1,1,()=>{a[d]=null}),P(),t=a[n],t?t.p(i,c):(t=a[n]=o[n](i),t.c()),f(t,1),t.m(e,null))},i(i){r||(f(t),r=!0)},o(i){v(t),r=!1},d(i){i&&y(e),a[n].d()}}}function ka(s,e,n){let{part:t}=e,{actions:r}=e,{chatBotId:o}=e,{firstWelcomeBotMessage:a}=e,{partId:l}=e,{setWelcomeBotAsPartOfDialog:i}=e;const[c,d]=_s({duration:350});function u($){var g,h,_,b,T;if(t.selectedAction)return;K.selectAction(t.id,r[$].id);let A={},H,E=(g=carrotquest.messenger.currentConversation)==null?void 0:g.id;const M=(_=(h=t.selectedAction)==null?void 0:h.body_json)==null?void 0:_.href,L=(T=(b=t.selectedAction)==null?void 0:b.body_json)==null?void 0:T.target;if(M&&window.open(M,L).focus(),E&&!Ye(carrotquest.messenger.currentConversation)&&!a)H=`/conversationparts/${l}/meta_data/`,A.meta_data=JSON.stringify({answer_action_id:t.selectedAction.id,answer_body:t.selectedAction.body});else{let F=carrotquest.messenger.currentConversation.widgetBotId;F&&(H=`/chat_bots/widget/${F}/start`),F||(H="/chatbots/routing/start"),A={chat_bot:o,initial_answer_action:t.selectedAction.id,initial_answer_body:t.selectedAction.body,random_id:carrotquest.messenger.currentConversation.id},E&&!Ye(carrotquest.messenger.currentConversation)&&a&&(A.conversation=E)}Oe("POST",H,A).then(()=>{i(),Ye(carrotquest.messenger.currentConversation)||Bt("last_conversation_with_user_activity",JSON.stringify(carrotquest.messenger.currentConversation))})}const p=$=>u($);return s.$$set=$=>{"part"in $&&n(0,t=$.part),"actions"in $&&n(1,r=$.actions),"chatBotId"in $&&n(5,o=$.chatBotId),"firstWelcomeBotMessage"in $&&n(6,a=$.firstWelcomeBotMessage),"partId"in $&&n(7,l=$.partId),"setWelcomeBotAsPartOfDialog"in $&&n(8,i=$.setWelcomeBotAsPartOfDialog)},[t,r,c,d,u,o,a,l,i,p]}class ya extends S{constructor(e){super(),D(this,e,ka,wa,N,{part:0,actions:1,chatBotId:5,firstWelcomeBotMessage:6,partId:7,setWelcomeBotAsPartOfDialog:8},ha)}}function St(s,e){let n=s.value;n=Fs(n.replace(/\n/g,"<br>")),e.innerHTML=`${n}`,e.style.display="block",s.style.height=`${e.offsetHeight}px`,e.style={overflowY:"auto",visibility:"visible",display:"none"}}function _a(s){O(s,"svelte-1872rs7",".textarea.svelte-1872rs7,.fake.svelte-1872rs7{font-size:14px;line-height:20px;min-width:100%;text-align:left;word-wrap:break-word;word-break:break-word;white-space:pre-wrap;min-height:40px;max-height:100px;padding:10px 40px 10px 15px;resize:none;background:transparent;width:100%;border:none;outline:none}.fake.svelte-1872rs7{display:none}.dark .textarea{color:white !important}")}function qa(s){let e,n,t,r,o;return{c(){e=x("textarea"),n=B(),t=x("div"),m(e,"class","textarea scroll-a "+s[3]+" svelte-1872rs7"),m(e,"placeholder",s[0]),se(e,"height","40px"),e.required=!0,m(t,"class","fake scroll-a "+s[3]+" svelte-1872rs7")},m(a,l){k(a,e,l),s[10](e),k(a,n,l),k(a,t,l),s[11](t),r||(o=[R(e,"focusin",s[8]),R(e,"focusout",s[9]),R(e,"input",s[4]),R(e,"keydown",s[5])],r=!0)},p(a,[l]){l&1&&m(e,"placeholder",a[0])},i:C,o:C,d(a){a&&y(e),s[10](null),a&&y(n),a&&y(t),s[11](null),r=!1,Fe(o)}}}function za(s,e,n){const t=["onSubmitHandle","placeholder","value"];let r=De(e,t),{onSubmitHandle:o=()=>{}}=e,{placeholder:a}=e,{value:l}=e,i,c,d=r.class?r.class:"",u=function(){St(i,c),n(6,l=i.value)},p=function(b){if(b?.key==="Enter"){if(!pt(i.value.replace(/\r?\n/g,""))){b.preventDefault();return}if(b.ctrlKey||b.shiftKey){n(1,i.value=i.value+`\r
`,i);return}o(i.value)}};function $(b){le.call(this,s,b)}function g(b){le.call(this,s,b)}function h(b){re[b?"unshift":"push"](()=>{i=b,n(1,i)})}function _(b){re[b?"unshift":"push"](()=>{c=b,n(2,c)})}return s.$$set=b=>{e=oe(oe({},e),lt(b)),n(12,r=De(e,t)),"onSubmitHandle"in b&&n(7,o=b.onSubmitHandle),"placeholder"in b&&n(0,a=b.placeholder),"value"in b&&n(6,l=b.value)},[a,i,c,d,u,p,l,o,$,g,h,_]}class ja extends S{constructor(e){super(),D(this,e,za,qa,N,{onSubmitHandle:7,placeholder:0,value:6},_a)}}function Ca(s){O(s,"svelte-yfa1kd",".input.svelte-yfa1kd{border:none;outline:none;font-size:14px;line-height:20px;min-width:100%;white-space:nowrap;height:40px;padding:10px 40px 10px 15px;background:transparent;width:100%}")}function Ta(s){let e,n,t;return{c(){e=x("input"),m(e,"class","input "+s[2]+" svelte-yfa1kd"),m(e,"placeholder",s[0]),e.required=!0},m(r,o){k(r,e,o),s[7](e),n||(t=[R(e,"focusin",s[5]),R(e,"focusout",s[6]),R(e,"input",s[3])],n=!0)},p(r,[o]){o&1&&m(e,"placeholder",r[0])},i:C,o:C,d(r){r&&y(e),s[7](null),n=!1,Fe(t)}}}function Ia(s,e,n){const t=["placeholder","value"];let r=De(e,t),{placeholder:o}=e,{value:a}=e,l,i=r.class?r.class:"",c=function(){n(4,a=l.value)};function d($){le.call(this,s,$)}function u($){le.call(this,s,$)}function p($){re[$?"unshift":"push"](()=>{l=$,n(1,l)})}return s.$$set=$=>{e=oe(oe({},e),lt($)),n(8,r=De(e,t)),"placeholder"in $&&n(0,o=$.placeholder),"value"in $&&n(4,a=$.value)},[o,l,i,c,a,d,u,p]}class Ba extends S{constructor(e){super(),D(this,e,Ia,Ta,N,{placeholder:0,value:4},Ca)}}function Na(s){O(s,"svelte-5wnpd8","form.svelte-5wnpd8{margin:0}.form-field{padding-right:40px}.form-button{position:absolute;right:0;bottom:0;margin:5px !important}")}function Aa(s){let e,n,t;function r(a){s[10](a)}let o={class:"form-field",placeholder:s[3]};return s[5]!==void 0&&(o.value=s[5]),e=new Ba({props:o}),re.push(()=>Te(e,"value",r)),e.$on("focusin",s[11]),e.$on("focusout",s[12]),{c(){q(e.$$.fragment)},m(a,l){z(e,a,l),t=!0},p(a,l){const i={};l&8&&(i.placeholder=a[3]),!n&&l&32&&(n=!0,i.value=a[5],Ie(()=>n=!1)),e.$set(i)},i(a){t||(f(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){j(e,a)}}}function Ea(s){let e,n,t;function r(a){s[7](a)}let o={class:"form-field",onSubmitHandle:s[2],placeholder:s[3]};return s[5]!==void 0&&(o.value=s[5]),e=new ja({props:o}),re.push(()=>Te(e,"value",r)),e.$on("focusin",s[8]),e.$on("focusout",s[9]),{c(){q(e.$$.fragment)},m(a,l){z(e,a,l),t=!0},p(a,l){const i={};l&4&&(i.onSubmitHandle=a[2]),l&8&&(i.placeholder=a[3]),!n&&l&32&&(n=!0,i.value=a[5],Ie(()=>n=!1)),e.$set(i)},i(a){t||(f(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){j(e,a)}}}function Sa(s){let e,n,t,r,o,a,l,i;const c=[Ea,Aa],d=[];function u(g,h){return g[4]?0:1}n=u(s),t=d[n]=c[n](s);const p=[{class:"form-button"},s[6]];let $={};for(let g=0;g<p.length;g+=1)$=oe($,p[g]);return o=new ge({props:$}),{c(){e=x("form"),t.c(),r=B(),q(o.$$.fragment),m(e,"class","form svelte-5wnpd8")},m(g,h){k(g,e,h),d[n].m(e,null),w(e,r),z(o,e,null),a=!0,l||(i=R(e,"submit",Kt(s[13])),l=!0)},p(g,[h]){let _=n;n=u(g),n===_?d[n].p(g,h):(U(),v(d[_],1,1,()=>{d[_]=null}),P(),t=d[n],t?t.p(g,h):(t=d[n]=c[n](g),t.c()),f(t,1),t.m(e,r));const b=h&64?$e(p,[p[0],fe(g[6])]):{};o.$set(b)},i(g){a||(f(t),f(o.$$.fragment,g),a=!0)},o(g){v(t),v(o.$$.fragment,g),a=!1},d(g){g&&y(e),d[n].d(),j(o),l=!1,i()}}}function Da(s,e,n){let{onFocusInHandle:t=()=>{}}=e,{onFocusOutHandle:r=()=>{}}=e,{onSubmitHandle:o=()=>{}}=e,{placeholder:a}=e,{resize:l=!1}=e,i={isAccent:!0,size:"xs",iconClassName:"cqi-arrow-right",submit:!0},c;function d(b){c=b,n(5,c)}const u=()=>t(),p=()=>r();function $(b){c=b,n(5,c)}const g=()=>t(),h=()=>r(),_=()=>o(c);return s.$$set=b=>{"onFocusInHandle"in b&&n(0,t=b.onFocusInHandle),"onFocusOutHandle"in b&&n(1,r=b.onFocusOutHandle),"onSubmitHandle"in b&&n(2,o=b.onSubmitHandle),"placeholder"in b&&n(3,a=b.placeholder),"resize"in b&&n(4,l=b.resize)},[t,r,o,a,l,c,i,d,u,p,$,g,h,_]}class Dt extends S{constructor(e){super(),D(this,e,Da,Sa,N,{onFocusInHandle:0,onFocusOutHandle:1,onSubmitHandle:2,placeholder:3,resize:4},Na)}}function Ma(s){O(s,"svelte-iw78cj",'@charset "UTF-8";.toast.svelte-iw78cj{position:absolute;left:1px;right:1px;font-size:12px;line-height:20px;text-align:center;color:#ffffff;opacity:0.9;border-radius:13px;padding:5px 15px;z-index:10}.toast.svelte-iw78cj a:link,.toast.svelte-iw78cj a:visited,.toast.svelte-iw78cj a:focus,.toast.svelte-iw78cj a:hover{color:#ffffff !important}.toast.warning.svelte-iw78cj{background:#ff7733}.toast.secondary.svelte-iw78cj{background:#f2f2f2;border:1px solid #E6E6E6;color:#595959}.toast.secondary.svelte-iw78cj a:link,.toast.secondary.svelte-iw78cj a:visited,.toast.secondary.svelte-iw78cj a:focus,.toast.secondary.svelte-iw78cj a:hover{color:#595959 !important}.toast.info.svelte-iw78cj{background-color:#22252A}.dark-theme .toast.secondary.svelte-iw78cj{background:#595959;border:1px solid #4d4d4d;color:#e6e6e6}.dark-theme .toast.secondary.svelte-iw78cj a:link,.dark-theme .toast.secondary.svelte-iw78cj a:visited,.dark-theme .toast.secondary.svelte-iw78cj a:focus,.dark-theme .toast.secondary.svelte-iw78cj a:hover{color:#e6e6e6 !important}')}function Dn(s){let e,n,t,r,o,a;const l=s[5].default,i=qe(l,s,s[4],null);return{c(){e=x("div"),i&&i.c(),m(e,"class",n="toast "+s[0]+" "+s[2]+" svelte-iw78cj")},m(c,d){k(c,e,d),i&&i.m(e,null),r=!0,o||(a=R(e,"click",s[3]),o=!0)},p(c,d){i&&i.p&&(!r||d&16)&&ze(i,l,c,c[4],r?Ce(l,c[4],d,null):je(c[4]),null),(!r||d&1&&n!==(n="toast "+c[0]+" "+c[2]+" svelte-iw78cj"))&&m(e,"class",n)},i(c){r||(f(i,c),ne(()=>{r&&(t||(t=pe(e,ie,{},!0)),t.run(1))}),r=!0)},o(c){v(i,c),t||(t=pe(e,ie,{},!1)),t.run(0),r=!1},d(c){c&&y(e),i&&i.d(c),c&&t&&t.end(),o=!1,a()}}}function Wa(s){let e,n,t=s[1]&&Dn(s);return{c(){t&&t.c(),e=ae()},m(r,o){t&&t.m(r,o),k(r,e,o),n=!0},p(r,[o]){r[1]?t?(t.p(r,o),o&2&&f(t,1)):(t=Dn(r),t.c(),f(t,1),t.m(e.parentNode,e)):t&&(U(),v(t,1,1,()=>{t=null}),P())},i(r){n||(f(t),n=!0)},o(r){v(t),n=!1},d(r){t&&t.d(r),r&&y(e)}}}function La(s,e,n){const t=["type"];let r=De(e,t),{$$slots:o={},$$scope:a}=e,{type:l}=e,i=!0,c=r.class?r.class:"";function d(){n(1,i=!1)}return s.$$set=u=>{e=oe(oe({},e),lt(u)),n(6,r=De(e,t)),"type"in u&&n(0,l=u.type),"$$scope"in u&&n(4,a=u.$$scope)},[l,i,c,d,a,o]}class st extends S{constructor(e){super(),D(this,e,La,Wa,N,{type:0},Ma)}}function Oa(s){O(s,"svelte-1raim6j",".root.svelte-1raim6j{position:relative}.inner.svelte-1raim6j{position:relative;margin:0 10px -10px 10px;-webkit-transform:translate(0, -20px);-ms-transform:translate(0, -20px);transform:translate(0, -20px);overflow:hidden;border-radius:20px;border:1px solid #e6e6e6;background:#ffffff}.dark .opened-bot-answer-field .inner{background-color:#333333;border-color:#999999}.dark .opened-bot-answer-field .inner .input{color:#ffffff}.auto-reply-warning{bottom:100%;top:initial}")}function Ua(s){let e,n,t,r;const o=[s[1]];let a={};for(let l=0;l<o.length;l+=1)a=oe(a,o[l]);return t=new Dt({props:a}),{c(){e=x("div"),n=x("div"),q(t.$$.fragment),m(n,"class","inner svelte-1raim6j"),m(e,"class","root opened-bot-answer-field svelte-1raim6j"),m(e,"data-action-id",s[0])},m(l,i){k(l,e,i),w(e,n),z(t,n,null),r=!0},p(l,[i]){const c=i&2?$e(o,[fe(l[1])]):{};t.$set(c),(!r||i&1)&&m(e,"data-action-id",l[0])},i(l){r||(f(t.$$.fragment,l),r=!0)},o(l){v(t.$$.fragment,l),r=!1},d(l){l&&y(e),j(t)}}}function Pa(s,e,n){let{partCreated:t}=e,{replyType:r="text"}=e,{chatBotId:o}=e,{firstWelcomeBotMessage:a}=e,{actionId:l}=e,{partId:i}=e,{setWelcomeBotAsPartOfDialog:c}=e;const d=zt();let u=["phone","email"].includes(r),p=r==="text",$=carrotquest.i18n[u?`enter_${r}`:"bot_answer_placeholder"];carrotquest.i18n[`enter_${r}`];let g=!0,h={placeholder:$,resize:p,onSubmitHandle:_=>{var b;let T=pt(_);if(r==="phone"&&(g=ln(T)),r==="email"&&(g=cn(T)),d("passBotAnswerFieldWarning",{visible:!g,warning:carrotquest.i18n[`input_error_${r}`]}),!g||!T)return;let A={},H,E=(b=carrotquest.messenger.currentConversation)==null?void 0:b.id;if(E&&!Ye(carrotquest.messenger.currentConversation)&&!a)H=`/conversationparts/${i}/meta_data/`,A.meta_data=JSON.stringify({answer_action_id:l,answer_body:T});else{let L=carrotquest.messenger.currentConversation.widgetBotId;L&&(H=`/chat_bots/widget/${L}/start`),L||(H="/chatbots/routing/start"),A={chat_bot:o,initial_answer_action:l,initial_answer_body:T,random_id:carrotquest.messenger.currentConversation.id},E&&!Ye(carrotquest.messenger.currentConversation)&&a&&(A.conversation=E)}if(!H)return;const M=K.findById(i);M.meta_data.answer_action_id=l,M.meta_data.answer_body=T,M.meta_data.answer_time=Math.floor(new Date().getTime()/1e3),M.loading=!0,K.replace(M),Oe("POST",H,A).then(()=>{if(M.loading=!1,c(),K.replace(M),Bt("last_conversation_with_user_activity",JSON.stringify(carrotquest.messenger.currentConversation)),!ce.isUserConfirmedDataProcessingPolicy(r))return r==="email"?ce.allowTrackContacts({email:T},i):r==="phone"?ce.allowTrackContacts({phone:T},i):ce.allowDataProcessing()})},onFocusInHandle:()=>{!ce.isUserConfirmedDataProcessingPolicy(r)&&d("passUserDataProcessingToast",{visible:!0,text:ce.getUserDataProcessingToastText(r)})},onFocusOutHandle:()=>{d("passUserDataProcessingToast",{visible:!1})}};return s.$$set=_=>{"partCreated"in _&&n(2,t=_.partCreated),"replyType"in _&&n(3,r=_.replyType),"chatBotId"in _&&n(4,o=_.chatBotId),"firstWelcomeBotMessage"in _&&n(5,a=_.firstWelcomeBotMessage),"actionId"in _&&n(0,l=_.actionId),"partId"in _&&n(6,i=_.partId),"setWelcomeBotAsPartOfDialog"in _&&n(7,c=_.setWelcomeBotAsPartOfDialog)},[l,h,t,r,o,a,i,c]}class Ha extends S{constructor(e){super(),D(this,e,Pa,Ua,N,{partCreated:2,replyType:3,chatBotId:4,firstWelcomeBotMessage:5,actionId:0,partId:6,setWelcomeBotAsPartOfDialog:7},Oa)}}function Fa(s){O(s,"svelte-r6si0r",".opened-message-popup_big.svelte-r6si0r{zoom:0.5}")}function Ga(s){let e;return{c(){e=x("div"),m(e,"class","opened-message-popup opened-message-popup_"+s[1]+" svelte-r6si0r")},m(n,t){k(n,e,t),e.innerHTML=s[0]},p:C,i:C,o:C,d(n){n&&y(e)}}}function Ra(s,e,n){let{part:t}=e,{body:r,componentSize:o}=t;return s.$$set=a=>{"part"in a&&n(2,t=a.part)},[r,o,t]}class Va extends S{constructor(e){super(),D(this,e,Ra,Ga,N,{part:2},Fa)}}function Ya(s){O(s,"svelte-yc03s5",".vote.svelte-yc03s5.svelte-yc03s5{border:1px solid #e6e6e6;border-radius:15px;padding:15px 10px;text-align:center}.vote.svelte-yc03s5 .smiles.svelte-yc03s5{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:15px;gap:10px}.vote.svelte-yc03s5 .wrap.svelte-yc03s5{padding-top:15px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:end;-ms-flex-align:end;align-items:end;width:100%}.vote.svelte-yc03s5 .field.svelte-yc03s5{position:relative;overflow:hidden;border-radius:20px;border:1px solid #e6e6e6;background:#ffffff;width:100%}.vote.svelte-yc03s5 .replied.svelte-yc03s5{height:42px;padding:10px;width:100%;border-radius:20px;border:1px solid #f2f2f2;background:#f2f2f2;text-align:center;color:#999999}.vote.svelte-yc03s5 .smile.svelte-yc03s5{width:30px;height:30px;border-radius:50%;background:#f2f2f2;font-size:23px;line-height:30px;cursor:pointer;-webkit-transition:opacity 0.3s, background 0.3s, -webkit-transform 0.3s;transition:opacity 0.3s, background 0.3s, -webkit-transform 0.3s;transition:transform 0.3s, opacity 0.3s, background 0.3s;transition:transform 0.3s, opacity 0.3s, background 0.3s, -webkit-transform 0.3s}.vote.svelte-yc03s5 .smile.selected.svelte-yc03s5{-webkit-transform:scale(1.3);-ms-transform:scale(1.3);transform:scale(1.3);background:none !important}.vote.svelte-yc03s5 .smile.unselected.svelte-yc03s5{opacity:0.5}.vote.svelte-yc03s5 .smile.disabled.svelte-yc03s5{cursor:default}.dark .field{background-color:#333333 !important;border-color:#999999 !important}.dark .replied{background-color:#4d4d4d !important;border-color:#4d4d4d !important;color:#999999 !important}.dark .vote{border-color:#999 !important;color:#fff}.dark .smile{background-color:#4d4d4d !important}")}function Mn(s,e,n){const t=s.slice();return t[13]=e[n],t}function Wn(s){let e,n=s[13].icon+"",t,r,o,a;function l(){return s[6](s[13])}return{c(){e=x("div"),t=G(n),r=B(),m(e,"class","smile svelte-yc03s5"),Y(e,"disabled",s[0]),Y(e,"selected",s[13].selected),Y(e,"unselected",s[13].unselected)},m(i,c){k(i,e,c),w(e,t),w(e,r),o||(a=R(e,"click",l,{once:!0}),o=!0)},p(i,c){s=i,c&2&&n!==(n=s[13].icon+"")&&Q(t,n),c&1&&Y(e,"disabled",s[0]),c&2&&Y(e,"selected",s[13].selected),c&2&&Y(e,"unselected",s[13].unselected)},d(i){i&&y(e),o=!1,a()}}}function Ln(s){let e,n,t,r,o=s[2]&&On(),a=!s[2]&&Un(s);return{c(){e=x("div"),o&&o.c(),n=B(),a&&a.c(),m(e,"class","wrap svelte-yc03s5")},m(l,i){k(l,e,i),o&&o.m(e,null),w(e,n),a&&a.m(e,null),r=!0},p(l,i){l[2]?o?(o.p(l,i),i&4&&f(o,1)):(o=On(),o.c(),f(o,1),o.m(e,n)):o&&(U(),v(o,1,1,()=>{o=null}),P()),l[2]?a&&(U(),v(a,1,1,()=>{a=null}),P()):a?(a.p(l,i),i&4&&f(a,1)):(a=Un(l),a.c(),f(a,1),a.m(e,null))},i(l){r||(f(o),f(a),t||ne(()=>{t=me(e,xe,{}),t.start()}),r=!0)},o(l){v(o),v(a),r=!1},d(l){l&&y(e),o&&o.d(),a&&a.d()}}}function On(s){let e,n,t;return{c(){e=x("div"),e.textContent=`${carrotquest.i18n.vote_thanks}`,m(e,"class","replied svelte-yc03s5")},m(r,o){k(r,e,o),t=!0},p:C,i(r){t||(ne(()=>{t&&(n||(n=pe(e,ie,{},!0)),n.run(1))}),t=!0)},o(r){n||(n=pe(e,ie,{},!1)),n.run(0),t=!1},d(r){r&&y(e),r&&n&&n.end()}}}function Un(s){let e,n,t;const r=[s[3]];let o={};for(let a=0;a<r.length;a+=1)o=oe(o,r[a]);return n=new Dt({props:o}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","field svelte-yc03s5")},m(a,l){k(a,e,l),z(n,e,null),t=!0},p(a,l){const i=l&8?$e(r,[fe(a[3])]):{};n.$set(i)},i(a){t||(f(n.$$.fragment,a),t=!0)},o(a){v(n.$$.fragment,a),t=!1},d(a){a&&y(e),j(n)}}}function Ja(s){let e,n,t,r,o,a,l=s[1],i=[];for(let d=0;d<l.length;d+=1)i[d]=Wn(Mn(s,l,d));let c=s[0]<5&&Ln(s);return{c(){e=x("div"),n=x("div"),n.textContent=`${carrotquest.i18n.vote_text}`,t=B(),r=x("div");for(let d=0;d<i.length;d+=1)i[d].c();o=B(),c&&c.c(),m(r,"class","smiles svelte-yc03s5"),m(e,"class","vote svelte-yc03s5")},m(d,u){k(d,e,u),w(e,n),w(e,t),w(e,r);for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(r,null);w(e,o),c&&c.m(e,null),a=!0},p(d,[u]){if(u&19){l=d[1];let p;for(p=0;p<l.length;p+=1){const $=Mn(d,l,p);i[p]?i[p].p($,u):(i[p]=Wn($),i[p].c(),i[p].m(r,null))}for(;p<i.length;p+=1)i[p].d(1);i.length=l.length}d[0]<5?c?(c.p(d,u),u&1&&f(c,1)):(c=Ln(d),c.c(),f(c,1),c.m(e,null)):c&&(U(),v(c,1,1,()=>{c=null}),P())},i(d){a||(f(c),a=!0)},o(d){v(c),a=!1},d(d){d&&y(e),Ee(i,d),c&&c.d()}}}function Za(s,e,n){let{part:t}=e,{id:r,body:o,component:a,voteData:l}=t,{vote:i,comment:c}=l;const d=[{vote:1,icon:"\u{1F614}",selected:i===1,unselected:i&&i!==1},{vote:3,icon:"\u{1F610}",selected:i===3,unselected:i&&i!==3},{vote:5,icon:"\u{1F60A}",selected:i===5,unselected:i&&i!==5}];let u=!!c,p=`/conversationparts/${r}/meta_data/`,$={placeholder:carrotquest.i18n.vote_comment,resize:!0,onSubmitHandle:_=>{n(2,u=!0);let b={meta_data:JSON.stringify({vote:i,comment:_})};Oe("POST",p,b)}};function g(_){if(i)return;n(0,i=_.vote);for(let T=0;T<d.length;T++)n(1,d[T].selected=!1,d),n(1,d[T].unselected=!0,d);_.selected=!0,_.unselected=!1;let b={meta_data:JSON.stringify({vote:i})};Oe("POST",p,b)}const h=_=>g(_);return s.$$set=_=>{"part"in _&&n(5,t=_.part)},[i,d,u,$,g,t,h]}class Ka extends S{constructor(e){super(),D(this,e,Za,Ja,N,{part:5},Ya)}}function Xa(s){O(s,"svelte-dih0pf",".close.svelte-dih0pf{position:absolute;top:-5px;right:-5px;width:20px;height:20px;border-radius:50%;border:1px solid #ffffff;background:#4d4d4d;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}")}function Qa(s){let e,n,t;return{c(){e=x("div"),e.innerHTML='<svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 0.292893C8.68342 -0.0976311 9.31658 -0.0976311 9.70711 0.292893C10.0976 0.683417 10.0976 1.31658 9.70711 1.70711L6.41421 5L9.70711 8.29289C10.0976 8.68342 10.0976 9.31658 9.70711 9.70711C9.31658 10.0976 8.68342 10.0976 8.29289 9.70711L5 6.41421L1.70711 9.70711C1.31658 10.0976 0.683418 10.0976 0.292894 9.70711C-0.0976312 9.31658 -0.0976312 8.68342 0.292894 8.29289L3.58579 5L0.292894 1.70711C-0.0976306 1.31658 -0.0976306 0.683417 0.292894 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L5 3.58579L8.29289 0.292893Z" fill="white"></path></svg>',m(e,"class","close svelte-dih0pf"),m(e,"title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C")},m(r,o){k(r,e,o),n||(t=R(e,"click",s[0]),n=!0)},p:C,i:C,o:C,d(r){r&&y(e),n=!1,t()}}}function el(s,e,n){let{fileInput:t}=e,{attachments:r}=e,{index:o}=e;function a(){r.splice(o,1),n(2,r),n(1,t.value="",t),t.dispatchEvent(new Event("change"))}return s.$$set=l=>{"fileInput"in l&&n(1,t=l.fileInput),"attachments"in l&&n(2,r=l.attachments),"index"in l&&n(3,o=l.index)},[a,t,r,o]}class Pn extends S{constructor(e){super(),D(this,e,el,Qa,N,{fileInput:1,attachments:2,index:3},Xa)}}function tl(s){O(s,"svelte-1nrhw3j",".wrap.svelte-1nrhw3j{position:relative}.image.svelte-1nrhw3j{width:50px;height:50px;border-radius:15px;border:1px solid #f2f2f2;background-position:center;background-size:cover}")}function nl(s){let e,n,t,r,o,a;function l(c){s[6](c)}let i={index:s[2],fileInput:s[1]};return s[0]!==void 0&&(i.attachments=s[0]),n=new Pn({props:i}),re.push(()=>Te(n,"attachments",l)),{c(){e=x("div"),q(n.$$.fragment),r=B(),o=x("div"),se(o,"background-image","url("+s[4]+")"),m(o,"class","image svelte-1nrhw3j"),m(o,"title",s[3]),m(e,"class","wrap svelte-1nrhw3j")},m(c,d){k(c,e,d),z(n,e,null),w(e,r),w(e,o),a=!0},p(c,[d]){const u={};d&4&&(u.index=c[2]),d&2&&(u.fileInput=c[1]),!t&&d&1&&(t=!0,u.attachments=c[0],Ie(()=>t=!1)),n.$set(u)},i(c){a||(f(n.$$.fragment,c),a=!0)},o(c){v(n.$$.fragment,c),a=!1},d(c){c&&y(e),j(n)}}}function rl(s,e,n){let{fileInput:t}=e,{attachment:r}=e,{attachments:o}=e,{index:a}=e,{id:l,name:i,src:c,type:d}=r;function u(p){o=p,n(0,o)}return s.$$set=p=>{"fileInput"in p&&n(1,t=p.fileInput),"attachment"in p&&n(5,r=p.attachment),"attachments"in p&&n(0,o=p.attachments),"index"in p&&n(2,a=p.index)},[o,t,a,i,c,r,u]}class sl extends S{constructor(e){super(),D(this,e,rl,nl,N,{fileInput:1,attachment:5,attachments:0,index:2},tl)}}function ol(s){O(s,"svelte-1vwpje0",".wrap.svelte-1vwpje0{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;background:#f1f2f4;border-radius:15px;padding:10px;position:relative}.icon.svelte-1vwpje0{width:30px;height:30px;min-width:30px;border-radius:50%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.name.svelte-1vwpje0{overflow:hidden;max-width:100%;text-overflow:ellipsis;margin-left:10px;white-space:nowrap}")}function al(s){let e,n,t,r,o,a,l,i;function c(u){s[5](u)}let d={index:s[2],fileInput:s[1]};return s[0]!==void 0&&(d.attachments=s[0]),n=new Pn({props:d}),re.push(()=>Te(n,"attachments",c)),{c(){e=x("div"),q(n.$$.fragment),r=B(),o=x("div"),o.innerHTML='<svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 16H2C0.89543 16 0 15.1046 0 14V2C0 0.895431 0.895431 0 2 0H8V4.5C8 5.32843 8.67157 6 9.5 6H14V14C14 15.1046 13.1046 16 12 16ZM9 0V4.5C9 4.77614 9.22386 5 9.5 5H14L9 0Z" fill="white"></path></svg>',a=B(),l=x("div"),l.textContent=`${s[3]}`,m(o,"class","icon bc_a svelte-1vwpje0"),m(l,"class","name svelte-1vwpje0"),m(e,"class","wrap svelte-1vwpje0"),m(e,"title",s[3])},m(u,p){k(u,e,p),z(n,e,null),w(e,r),w(e,o),w(e,a),w(e,l),i=!0},p(u,[p]){const $={};p&4&&($.index=u[2]),p&2&&($.fileInput=u[1]),!t&&p&1&&(t=!0,$.attachments=u[0],Ie(()=>t=!1)),n.$set($)},i(u){i||(f(n.$$.fragment,u),i=!0)},o(u){v(n.$$.fragment,u),i=!1},d(u){u&&y(e),j(n)}}}function ll(s,e,n){let{fileInput:t}=e,{attachment:r}=e,{attachments:o}=e,{index:a}=e,{id:l,name:i,src:c,type:d}=r;function u(p){o=p,n(0,o)}return s.$$set=p=>{"fileInput"in p&&n(1,t=p.fileInput),"attachment"in p&&n(4,r=p.attachment),"attachments"in p&&n(0,o=p.attachments),"index"in p&&n(2,a=p.index)},[o,t,a,i,r,u]}class il extends S{constructor(e){super(),D(this,e,ll,al,N,{fileInput:1,attachment:4,attachments:0,index:2},ol)}}function cl(s){O(s,"svelte-zez06l",".preview.svelte-zez06l{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:10px;margin:10px;padding-right:101px}")}function Hn(s,e,n){const t=s.slice();return t[4]=e[n],t[6]=n,t}function Fn(s){let e,n=[],t=new Map,r,o=s[0];const a=l=>l[4].id;for(let l=0;l<o.length;l+=1){let i=Hn(s,o,l),c=a(i);t.set(c,n[l]=Gn(c,i))}return{c(){e=x("div");for(let l=0;l<n.length;l+=1)n[l].c();m(e,"class","preview svelte-zez06l")},m(l,i){k(l,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);r=!0},p(l,i){i&3&&(o=l[0],U(),n=Ze(n,i,a,1,l,o,t,e,Ke,Gn,null,Hn),P())},i(l){if(!r){for(let i=0;i<o.length;i+=1)f(n[i]);r=!0}},o(l){for(let i=0;i<n.length;i+=1)v(n[i]);r=!1},d(l){l&&y(e);for(let i=0;i<n.length;i+=1)n[i].d()}}}function dl(s){let e,n,t;function r(a){s[3](a)}let o={attachment:s[4],index:s[6],fileInput:s[1]};return s[0]!==void 0&&(o.attachments=s[0]),e=new il({props:o}),re.push(()=>Te(e,"attachments",r)),{c(){q(e.$$.fragment)},m(a,l){z(e,a,l),t=!0},p(a,l){const i={};l&1&&(i.attachment=a[4]),l&1&&(i.index=a[6]),l&2&&(i.fileInput=a[1]),!n&&l&1&&(n=!0,i.attachments=a[0],Ie(()=>n=!1)),e.$set(i)},i(a){t||(f(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){j(e,a)}}}function ul(s){let e,n,t;function r(a){s[2](a)}let o={attachment:s[4],index:s[6],fileInput:s[1]};return s[0]!==void 0&&(o.attachments=s[0]),e=new sl({props:o}),re.push(()=>Te(e,"attachments",r)),{c(){q(e.$$.fragment)},m(a,l){z(e,a,l),t=!0},p(a,l){const i={};l&1&&(i.attachment=a[4]),l&1&&(i.index=a[6]),l&2&&(i.fileInput=a[1]),!n&&l&1&&(n=!0,i.attachments=a[0],Ie(()=>n=!1)),e.$set(i)},i(a){t||(f(e.$$.fragment,a),t=!0)},o(a){v(e.$$.fragment,a),t=!1},d(a){j(e,a)}}}function Gn(s,e){let n,t,r,o,a,l;const i=[ul,dl],c=[];function d(u,p){return p&1&&(t=null),t==null&&(t=!!u[4].type.includes("image/")),t?0:1}return r=d(e,-1),o=c[r]=i[r](e),{key:s,first:null,c(){n=ae(),o.c(),a=ae(),this.first=n},m(u,p){k(u,n,p),c[r].m(u,p),k(u,a,p),l=!0},p(u,p){e=u;let $=r;r=d(e,p),r===$?c[r].p(e,p):(U(),v(c[$],1,1,()=>{c[$]=null}),P(),o=c[r],o?o.p(e,p):(o=c[r]=i[r](e),o.c()),f(o,1),o.m(a.parentNode,a))},i(u){l||(f(o),l=!0)},o(u){v(o),l=!1},d(u){u&&y(n),c[r].d(u),u&&y(a)}}}function pl(s){let e,n,t=s[0].length&&Fn(s);return{c(){t&&t.c(),e=ae()},m(r,o){t&&t.m(r,o),k(r,e,o),n=!0},p(r,[o]){r[0].length?t?(t.p(r,o),o&1&&f(t,1)):(t=Fn(r),t.c(),f(t,1),t.m(e.parentNode,e)):t&&(U(),v(t,1,1,()=>{t=null}),P())},i(r){n||(f(t),n=!0)},o(r){v(t),n=!1},d(r){t&&t.d(r),r&&y(e)}}}function fl(s,e,n){let{fileInput:t}=e,{attachments:r}=e;function o(l){r=l,n(0,r)}function a(l){r=l,n(0,r)}return s.$$set=l=>{"fileInput"in l&&n(1,t=l.fileInput),"attachments"in l&&n(0,r=l.attachments)},[r,t,o,a]}class ml extends S{constructor(e){super(),D(this,e,fl,pl,N,{fileInput:1,attachments:0},cl)}}function gl(s){let e,n;return e=new ge({props:{isAccent:!1,iconClassName:"cqi-trash",size:"xs",title:carrotquest.i18n.tooltip.delete_voice_message}}),e.$on("click",Lt),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}class Rn extends S{constructor(e){super(),D(this,e,null,gl,N,{})}}function vl(s){let e,n;return e=new ge({props:{isAccent:!0,size:"xs",iconClassName:s[1]?"cqi-pause":"cqi-play"}}),e.$on("click",s[4]),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.iconClassName=t[1]?"cqi-pause":"cqi-play"),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function $l(s,e,n){let t,r,o;Z(s,be,i=>n(2,r=i)),Z(s,_e,i=>n(3,o=i));let{audioData:a}=e;const l=()=>Fl(a);return s.$$set=i=>{"audioData"in i&&n(0,a=i.audioData)},s.$$.update=()=>{s.$$.dirty&13&&n(1,t=o&&r?.src===a?.src)},[a,t,r,o,l]}class Vn extends S{constructor(e){super(),D(this,e,$l,vl,N,{audioData:0})}}function hl(s){O(s,"svelte-k81xxj","button.svelte-k81xxj{border:none;background-color:transparent}")}function xl(s){let e,n,t,r;return{c(){e=x("button"),n=x("span"),m(n,"class","button__icon cqi-chat cqi-mic"),m(e,"title",carrotquest.i18n.tooltip.voice_message),m(e,"class","icon-button svelte-k81xxj"),m(e,"type","button")},m(o,a){k(o,e,a),w(e,n),t||(r=R(e,"click",zl),t=!0)},p:C,i:C,o:C,d(o){o&&y(e),t=!1,r()}}}class bl extends S{constructor(e){super(),D(this,e,null,xl,N,{},hl)}}function wl(s){let e,n;return e=new ge({props:{isAccent:!0,iconClassName:"cqi-stop",size:"xs"}}),e.$on("click",Yn),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}class kl extends S{constructor(e){super(),D(this,e,null,wl,N,{})}}const Mt=_t({}),$t=_t(),ht=Object.freeze({STOP:"stop",DELETE:"delete",SEND:"send"});class yl{constructor(e,n=null){this.stream=e,this.config=n,this.state="inactive",this.em=document.createDocumentFragment(),this.encoder=ql(_l);let t=this;this.encoder.addEventListener("message",r=>{let o=new Event("dataavailable");o.data=new Blob([r.data],{type:"audio/wav"}),t.em.dispatchEvent(o),t.state==="inactive"&&t.em.dispatchEvent(new Event("stop"))})}start(e){if(this.state!=="inactive")return this.em.dispatchEvent(Wt("start"));this.state="recording",Ue||(Ue=new AudioContext(this.config)),this.clone=this.stream.clone(),this.input=Ue.createMediaStreamSource(this.clone),this.processor=Ue.createScriptProcessor(2048,1,1),this.encoder.postMessage(["init",Ue.sampleRate]),this.processor.onaudioprocess=n=>{this.state==="recording"&&this.encoder.postMessage(["encode",n.inputBuffer.getChannelData(0)])},this.input.connect(this.processor),this.processor.connect(Ue.destination),this.em.dispatchEvent(new Event("start")),e&&(this.slicing=setInterval(()=>{this.state==="recording"&&this.requestData()},e))}stop(){return this.state==="inactive"?this.em.dispatchEvent(Wt("stop")):(this.requestData(),this.state="inactive",this.clone.getTracks().forEach(e=>{e.stop()}),this.processor.disconnect(),this.input.disconnect(),clearInterval(this.slicing))}requestData(){return this.state==="inactive"?this.em.dispatchEvent(Wt("requestData")):this.encoder.postMessage(["dump",Ue.sampleRate])}addEventListener(...e){this.em.addEventListener(...e)}removeEventListener(...e){this.em.removeEventListener(...e)}dispatchEvent(...e){this.em.dispatchEvent(...e)}}const _l=()=>{let s=2,e=[];function n(r){let o=r.length,a=new Uint8Array(o*s);for(let l=0;l<o;l++){let i=l*s,c=r[l];c>1?c=1:c<-1&&(c=-1),c=c*32768,a[i]=c,a[i+1]=c>>8}e.push(a)}function t(r){let o=e.length?e[0].length:0,a=e.length*o,l=new Uint8Array(44+a),i=new DataView(l.buffer);i.setUint32(0,1380533830,!1),i.setUint32(4,36+a,!0),i.setUint32(8,1463899717,!1),i.setUint32(12,1718449184,!1),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,1,!0),i.setUint32(24,r,!0),i.setUint32(28,r*s,!0),i.setUint16(32,s,!0),i.setUint16(34,8*s,!0),i.setUint32(36,1684108385,!1),i.setUint32(40,a,!0);for(let c=0;c<e.length;c++)l.set(e[c],c*o+44);e=[],postMessage(l.buffer,[l.buffer])}onmessage=r=>{r.data[0]==="encode"?n(r.data[1]):r.data[0]==="dump"&&t(r.data[1])}};let ql=s=>{let e=s.toString().replace(/^(\(\)\s*=>|function\s*\(\))\s*{/,"").replace(/}$/,""),n=new Blob([e]);return new Worker(URL.createObjectURL(n))},Wt=s=>{let e=new Event("error");return e.data=new Error("Wrong state for "+s),e},Ue;function Lt(){var s;$t.set(ht.DELETE),(s=de(Xe))==null||s.stop(),Jn()}function zl(){if(!navigator.mediaDevices.getUserMedia)return;const s={audio:!0};navigator.mediaDevices.getUserMedia(s).then(e=>{Cl(e),Ge.set(!0)}).catch(e=>{e.name==="NotAllowedError"&&alert(carrotquest.i18n.error_microphone_not_allowed)})}function Yn(){var s;Qe.set(!0),Ge.set(!1),et.set(0),xt(),$t.set(ht.STOP),(s=de(Xe))==null||s.stop()}function jl(){return He(this,null,function*(){return!!(yield navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="audioinput").length})}function Cl(s){let e=[];Tl(60),Xt.set(s);const n=new yl(s);Xe.set(n),n.start(),n.addEventListener("stop",r),n.addEventListener("dataavailable",t);function t(o){e.push(o.data)}function r(){const o=new File(e,`audio_record_${new Date().getTime()}.wav`,{type:"audio/wav"}),a=new Blob(e);o.src=window.URL.createObjectURL(o),jt.set(o),a.arrayBuffer().then(l=>Ct.set(l)),e=[],de($t)===ht.SEND&&Zn(),s.getTracks().forEach(l=>l.stop()),n.removeEventListener("stop",r),n.removeEventListener("dataavailable",t)}return n}function Jn(){Qe.set(!1),Ge.set(!1),jt.set(null),Ct.set(null),et.set(0),xt()}function Tl(s){const e=Math.round(Date.now()/1e3),n=setInterval(()=>{et.set(Math.round(Date.now()/1e3)-e),de(et)>=s&&(xt(),Yn())},1e3);xt(),it.set(n)}function xt(){de(it)&&(clearInterval(de(it)),it.set(null))}function Il(){var s;if(de(Xe).state==="recording"){$t.set(ht.SEND),(s=de(Xe))==null||s.stop();return}Zn()}function Zn(){Qe.set(!1),Ge.set(!1),Qt({file:de(jt)}),Jn()}function Bl(s){let e,n;return e=new ge({props:{isAccent:!0,iconClassName:"cqi-arrow-up",size:"xs"}}),e.$on("click",Il),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}class Kn extends S{constructor(e){super(),D(this,e,null,Bl,N,{})}}function Nl(s){O(s,"svelte-sft3jg",'@charset "UTF-8";.audio-waves.svelte-sft3jg.svelte-sft3jg{position:relative}.progress-bar.svelte-sft3jg.svelte-sft3jg,.progress-bar-bg.svelte-sft3jg.svelte-sft3jg{height:20px}.progress-bar-wrapper.svelte-sft3jg.svelte-sft3jg{position:absolute;overflow:hidden}.dark-theme .theme.svelte-sft3jg .progress-bar-bg path.svelte-sft3jg{stroke:rgba(255, 255, 255, 0.4)}.dark-theme .theme.svelte-sft3jg .progress-bar path.svelte-sft3jg{stroke:#ffffff}.theme.svelte-sft3jg .progress-bar-bg path.svelte-sft3jg{stroke:rgba(34, 37, 42, 0.4)}.theme.svelte-sft3jg .progress-bar path.svelte-sft3jg{stroke:#22252A}.accent.svelte-sft3jg .progress-bar-bg path.svelte-sft3jg{stroke:rgba(var(--contrast-rgb-color), 0.4)}.accent.svelte-sft3jg .progress-bar path.svelte-sft3jg{stroke:var(--contrast-color)}')}function Al(s){let e,n,t,r,o,a,l,i;return{c(){e=x("div"),n=Se("svg"),t=Se("path"),r=B(),o=x("div"),a=Se("svg"),l=Se("path"),m(t,"d",s[3]),m(t,"stroke-width","2"),m(t,"fill-rule","evenodd"),m(t,"stroke-linecap","round"),m(t,"class","svelte-sft3jg"),m(n,"class","progress-bar-bg svelte-sft3jg"),se(n,"width","100%"),se(n,"max-width",s[0]+"px"),m(n,"height","20"),m(l,"d",s[3]),m(l,"stroke-width","2"),m(l,"fill-rule","evenodd"),m(l,"stroke-linecap","round"),m(l,"class","svelte-sft3jg"),m(a,"class","progress-bar svelte-sft3jg"),se(a,"width","100%"),se(a,"max-width",s[0]+"px"),m(a,"height","20"),m(o,"class","progress-bar-wrapper svelte-sft3jg"),se(o,"inset","0 "+(100-s[1])+"% 0 0"),m(e,"class",i="audio-waves "+(s[2]?"accent":"theme")+" svelte-sft3jg")},m(c,d){k(c,e,d),w(e,n),w(n,t),w(e,r),w(e,o),w(o,a),w(a,l)},p(c,[d]){d&8&&m(t,"d",c[3]),d&1&&se(n,"max-width",c[0]+"px"),d&8&&m(l,"d",c[3]),d&1&&se(a,"max-width",c[0]+"px"),d&2&&se(o,"inset","0 "+(100-c[1])+"% 0 0"),d&4&&i!==(i="audio-waves "+(c[2]?"accent":"theme")+" svelte-sft3jg")&&m(e,"class",i)},i:C,o:C,d(c){c&&y(e)}}}function El(s,e,n){let{width:t}=e,{progress:r=0}=e,{isInAccentUsage:o=!0}=e,{progressBarPath:a=Pl(t)}=e;return s.$$set=l=>{"width"in l&&n(0,t=l.width),"progress"in l&&n(1,r=l.progress),"isInAccentUsage"in l&&n(2,o=l.isInAccentUsage),"progressBarPath"in l&&n(3,a=l.progressBarPath)},[t,r,o,a]}class Xn extends S{constructor(e){super(),D(this,e,El,Al,N,{width:0,progress:1,isInAccentUsage:2,progressBarPath:3},Nl)}}function Sl(s){O(s,"svelte-148e68s","canvas.svelte-148e68s{width:100%}")}function Dl(s){let e,n,t;return{c(){e=x("canvas"),m(e,"height",n=s[3]+"px"),m(e,"width",t=s[2]+"px"),se(e,"max-width",s[0]+"px"),se(e,"max-height",Qn+"px"),m(e,"class","canvas svelte-148e68s")},m(r,o){k(r,e,o),s[4](e)},p(r,[o]){o&8&&n!==(n=r[3]+"px")&&m(e,"height",n),o&4&&t!==(t=r[2]+"px")&&m(e,"width",t),o&1&&se(e,"max-width",r[0]+"px")},i:C,o:C,d(r){r&&y(e),s[4](null)}}}let Qn=20;const Pe=4,Ml=14;function Wl(s,e,n){let t,r,{width:o}=e,a,l,i;const{isDefaultTheme:c}=dn();Re(()=>{const p=de(Xt);d(p)}),tt(()=>{cancelAnimationFrame(a),clearInterval(i)});function d(p){const $=new(window.AudioContext||window.webkitAudioContext),g=$.createMediaStreamSource(p),h=$.createAnalyser(),_=h.frequencyBinCount,b=new Uint8Array(_),T=l,A=T.getContext("2d"),H=T.height,E=1*Pe,M=2*Pe,L=20*Pe,F=2*Pe,te=2*Pe,ue=1e3/Ml,V=[];let Ae=performance.now(),we=0;h.fftSize=2048,g.connect(h),X();function X(){a=requestAnimationFrame(X);let W=Math.floor(t/(F+te));if(we=performance.now()-Ae,we<ue)return;Ae=performance.now()-we%ue,h.getByteFrequencyData(b),A.fillStyle=c?"#fff":"#333",A.fillRect(0,0,t,H),A.fillStyle=c?"#333":"#fff",A.beginPath();let I=0,J=0,ee=ke(b,M,L);V.push(ee);for(let ve=0;ve<W;ve++)J=(H-V[ve])/2,A.roundRect(I,J,F,V[ve],E),A.fill(),I+=F+te;A.closePath(),V.length>W&&V.splice(0,1)}function ke(W,I,J){const ee=(W[0]+W[13])/2,ve=Math.trunc(ee/128*L);return Math.min(Math.max(ve,I),J)}}function u(p){re[p?"unshift":"push"](()=>{l=p,n(1,l)})}return s.$$set=p=>{"width"in p&&n(0,o=p.width)},s.$$.update=()=>{s.$$.dirty&1&&n(2,t=o*Pe)},n(3,r=Qn*Pe),[o,l,t,r,u]}class Ll extends S{constructor(e){super(),D(this,e,Wl,Dl,N,{width:0},Sl)}}const bt={},Ol=2,Ul=2,wt=20,er=175;function Pl(s=er){if(bt[s])return bt[s];const e=tr(s),n=Array.from({length:e},()=>0);return bt[s]=rr(n),bt[s]}function kt(s,e=er){if(!s||!e)throw new Error("You must provide both audioBuffer and svgWidth");const n=s.numberOfChannels,t=[];for(let o=0;o<n;o++)t.push(s.getChannelData(o));const r=t.reduce((o,a)=>Hl(a,o,s,e),[]);return rr(r)}function tr(s){return Math.ceil(s/nr())}function nr(){return Ol+Ul}function rr(s){const e=s.length;let n="";for(let r=0;r<e;r++){const o=Math.abs(s.shift()*wt),a=t(o)-2,l=(wt-a)/2,i=l+a,c=r*nr()+1;n+=` M${c}, ${l}  L${c}, ${i}`}return n;function t(r){return r>wt?wt-2:r<2?1:r}}function Hl(s,e,n,t){const r=tr(t),o=n.length/r,a=1,l=Array.isArray(e)?e:[];for(let i=0;i<r;i++){const c=~~(i*o),d=~~(c+o);let u=s[0],p=s[0];for(let $=c;$<d;$+=a){const g=s[$];g>p&&(p=g),g<u&&(u=g)}l[i]=Math.abs(p)+Math.abs(u)}return l}function yt(s,e){return s>e?100:s/e*100}function Fl(s){var e;if(((e=de(be))==null?void 0:e.audioEl)===s.audioEl){if(de(_e)){s.audioEl.pause(),_e.set(!1);return}Ot(s.audioEl);return}Gl(s)}function Ot(s){s.play().catch(e=>{_e.set(!1),console.log("Can't play audio",e)}),_e.set(!0)}function sr(){be.set(null),_e.set(!1)}function or(s,e){let n=e;function t(a){var l;a.preventDefault(),!(!de(be)||n?.audioEl!==((l=de(be))==null?void 0:l.audioEl))&&(s.setPointerCapture(a.pointerId),s.addEventListener("pointermove",r),s.addEventListener("pointerup",o))}function r(a){a.preventDefault();const l=a.offsetX/a.currentTarget.clientWidth*de(be).audioBuffer.duration;de(be).audioEl.currentTime=l,ct.set(yt(a.offsetX,a.currentTarget.clientWidth))}function o(a){s.removeEventListener("pointermove",r),s.removeEventListener("pointerup",o),ct.set(yt(a.offsetX,a.currentTarget.clientWidth));const l=a.offsetX/a.currentTarget.clientWidth*de(be).audioBuffer.duration;de(be).audioEl.currentTime=l}return s.addEventListener("pointerdown",t),{update(a){n=a},destroy(){s.removeEventListener("pointerdown",t)}}}function Gl(s){be.update(e=>(e&&(e.audioEl.pause(),e.audioEl.currentTime=0,_e.set(!1)),s.audioBuffer?Ot(s.audioEl):Bn(s.src).then(n=>{s.audioBuffer=n,Mt.update(t=>(t[s.src]=kt(n),t)),Ot(s.audioEl)}),s))}function Rl(s){O(s,"svelte-1tjbgck",".textarea.svelte-1tjbgck,.fake.svelte-1tjbgck{font-size:14px;line-height:20px;min-width:100%;text-align:left;word-wrap:break-word;word-break:break-word;white-space:pre-wrap;min-height:40px;max-height:100px;padding:10px 101px 10px 15px;resize:none;background:transparent;width:100%;border:none;outline:none}.mobile-safari.svelte-1tjbgck{font-size:16px !important}.fake.svelte-1tjbgck{display:none}.dark .textarea{color:white !important}")}function Vl(s){let e,n,t,r,o;return{c(){e=x("textarea"),n=B(),t=x("div"),m(e,"id","opened-textfield"),m(e,"class","textarea scroll-a svelte-1tjbgck"),m(e,"placeholder",carrotquest.i18n.enter_message),se(e,"height","40px"),Y(e,"mobile-safari",s[2]),m(t,"class","fake scroll-a svelte-1tjbgck"),Y(t,"mobile-safari",s[2])},m(a,l){k(a,e,l),s[9](e),k(a,n,l),k(a,t,l),s[10](t),r||(o=[R(e,"focusin",s[7]),R(e,"focusout",s[8]),R(e,"input",s[3]),R(e,"keydown",s[4]),R(e,"paste",s[5])],r=!0)},p:C,i:C,o:C,d(a){a&&y(e),s[9](null),a&&y(n),a&&y(t),s[10](null),r=!1,Fe(o)}}}function Yl(s,e,n){let{props:t}=e;const r=zt();let{onSubmitHandle:o,onFileUpload:a}=t,l,i,c=Gs(navigator.userAgent);Re(()=>He(this,null,function*(){r("passTextfieldElems",{textarea:l,texfieldDefineHeightElement:i}),setTimeout(()=>{var b,T;let A=(b=carrotquest.messenger.currentConversation)!=null&&b.id?(T=carrotquest.messenger.currentConversation)==null?void 0:T.id:"new";St(l,i),ce.userDrafts().insertDraft(l,A)},100)}));let d=function(){St(l,i),ce.userDrafts().listenerHandler(l,carrotquest.messenger.currentConversation),r("passTextfieldValue",{textfieldValue:l.value})},u=function(b){if(b?.key==="Enter"){if(b.ctrlKey||b.shiftKey){n(0,l.value=l.value+`\r
`,l);return}r("passTextfieldElems",{textarea:l,texfieldDefineHeightElement:i}),o()}},p=function(b){let T=Rs("carrot-messenger-frame"),A=Vs(T,b);a(A)};function $(b){le.call(this,s,b)}function g(b){le.call(this,s,b)}function h(b){re[b?"unshift":"push"](()=>{l=b,n(0,l)})}function _(b){re[b?"unshift":"push"](()=>{i=b,n(1,i)})}return s.$$set=b=>{"props"in b&&n(6,t=b.props)},[l,i,c,d,u,p,t,$,g,h,_]}class Jl extends S{constructor(e){super(),D(this,e,Yl,Vl,N,{props:6},Rl)}}function Zl(s){O(s,"svelte-1wxdb9y",".root.svelte-1wxdb9y.svelte-1wxdb9y{position:relative;background:white;margin:0}.opened-stop-record-button{color:red}.button-group.svelte-1wxdb9y.svelte-1wxdb9y{position:relative;height:30px;width:30px;margin-left:0;-webkit-transition:0.15s;transition:0.15s}.button-group.svelte-1wxdb9y .send.svelte-1wxdb9y,.button-group.svelte-1wxdb9y .record.svelte-1wxdb9y{position:absolute;left:0;top:0}.button-send.svelte-1wxdb9y.svelte-1wxdb9y{width:0;-webkit-transition:width 0.3s;transition:width 0.3s}.active.svelte-1wxdb9y .button-group.svelte-1wxdb9y{margin-left:5px}.active.svelte-1wxdb9y .button-send.svelte-1wxdb9y{margin-left:5px;width:30px}.inner.svelte-1wxdb9y.svelte-1wxdb9y{position:relative;margin:0 10px -10px 10px;-webkit-transform:translate(0, -20px);-ms-transform:translate(0, -20px);transform:translate(0, -20px);overflow:hidden;border-radius:20px;border:1px solid #e6e6e6;background:#ffffff;z-index:1}.buttons.svelte-1wxdb9y.svelte-1wxdb9y{position:absolute;bottom:0;right:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px}.dark .opened-textfield-new.root{background-color:#333333}.dark .opened-textfield-new.root .inner{background-color:#333333;border-color:#999999}")}function Kl(s){return{c:C,m:C,p:C,i:C,o:C,d:C}}function Xl(s){let e,n,t,r,o;const a=[ei,Ql],l=[];function i(c,d){return c[1]&&!c[2]?0:(n==null&&(n=!!(fn.RECORD_AUDIO()&&c[27])),n?1:-1)}return~(t=i(s))&&(r=l[t]=a[t](s)),{c(){e=x("div"),r&&r.c(),m(e,"class",zs(fn.RECORD_AUDIO()&&s[27]?"button-group":"button-send")+" svelte-1wxdb9y")},m(c,d){k(c,e,d),~t&&l[t].m(e,null),o=!0},p(c,d){let u=t;t=i(c),t===u?~t&&l[t].p(c,d):(r&&(U(),v(l[u],1,1,()=>{l[u]=null}),P()),~t?(r=l[t],r?r.p(c,d):(r=l[t]=a[t](c),r.c()),f(r,1),r.m(e,null)):r=null)},i(c){o||(f(r),o=!0)},o(c){v(r),o=!1},d(c){c&&y(e),~t&&l[t].d()}}}function Ql(s){let e,n,t,r,o;return n=new bl({}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","record svelte-1wxdb9y")},m(a,l){k(a,e,l),z(n,e,null),o=!0},p:C,i(a){o||(f(n.$$.fragment,a),a&&ne(()=>{o&&(r&&r.end(1),t=me(e,Me,{x:-30,duration:300}),t.start())}),o=!0)},o(a){v(n.$$.fragment,a),t&&t.invalidate(),a&&(r=he(e,Me,{x:-30,duration:300})),o=!1},d(a){a&&y(e),j(n),a&&r&&r.end()}}}function ei(s){let e,n,t,r,o;const a=[{slot:"send-button"},{class:"opened-send-button"},s[4]];let l={};for(let i=0;i<a.length;i+=1)l=oe(l,a[i]);return n=new ge({props:l}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","send svelte-1wxdb9y")},m(i,c){k(i,e,c),z(n,e,null),o=!0},p(i,c){const d=c&16?$e(a,[a[0],a[1],fe(i[4])]):{};n.$set(d)},i(i){o||(f(n.$$.fragment,i),i&&ne(()=>{o&&(r&&r.end(1),t=me(e,Me,{x:30,duration:300}),t.start())}),o=!0)},o(i){v(n.$$.fragment,i),t&&t.invalidate(),i&&(r=he(e,Me,{x:30,duration:300})),o=!1},d(i){i&&y(e),j(n),i&&r&&r.end()}}}function ti(s){return{c:C,m:C,p:C,i:C,o:C,d:C}}function ni(s){let e,n,t,r,o,a,l,i,c,d,u,p,$,g,h,_=carrotquest.messenger.emoji.generateContent()+"",b,T,A;t=new Jl({props:{props:{onSubmitHandle:s[11],onFileUpload:s[7]}}}),t.$on("focusin",s[12]),t.$on("focusout",s[13]),t.$on("passTextfieldValue",s[6]),t.$on("passTextfieldElems",s[5]);function H(L){s[14](L)}let E={fileInput:s[3]};s[0]!==void 0&&(E.attachments=s[0]),o=new ml({props:E}),re.push(()=>Te(o,"attachments",H));let M={ctx:s,current:null,token:null,hasCatch:!1,pending:ti,then:Xl,catch:Kl,value:27,blocks:[,,,]};return dt(jl(),M),{c(){e=x("form"),n=x("div"),q(t.$$.fragment),r=B(),q(o.$$.fragment),l=B(),i=x("div"),c=x("div"),d=B(),u=x("label"),p=x("input"),$=B(),M.block.c(),g=B(),h=new Je(!1),m(c,"id","carrotquest-messenger-emoji-button"),m(c,"class","icon-button cqi-chat cqi-smile svelte"),m(p,"id","textfield-attach-input"),m(p,"class","hidden"),m(p,"type","file"),m(u,"class","attach icon-button cqi-chat cqi-attach"),m(i,"class","buttons svelte-1wxdb9y"),m(n,"class","inner svelte-1wxdb9y"),h.a=null,m(e,"class","root opened-textfield-new svelte-1wxdb9y"),Y(e,"active",s[1]&&!s[2])},m(L,F){k(L,e,F),w(e,n),z(t,n,null),w(n,r),z(o,n,null),w(n,l),w(n,i),w(i,c),w(i,d),w(i,u),w(u,p),s[15](p),w(i,$),M.block.m(i,M.anchor=null),M.mount=()=>i,M.anchor=null,w(e,g),h.m(_,e),b=!0,T||(A=[R(p,"change",s[7]),R(e,"submit",Kt(s[10]))],T=!0)},p(L,[F]){s=L;const te={};F&8&&(te.fileInput=s[3]),!a&&F&1&&(a=!0,te.attachments=s[0],Ie(()=>a=!1)),o.$set(te),Tt(M,s,F),(!b||F&6)&&Y(e,"active",s[1]&&!s[2])},i(L){b||(f(t.$$.fragment,L),f(o.$$.fragment,L),f(M.block),b=!0)},o(L){v(t.$$.fragment,L),v(o.$$.fragment,L);for(let F=0;F<3;F+=1){const te=M.blocks[F];v(te)}b=!1},d(L){L&&y(e),j(t),j(o),s[15](null),M.block.d(),M.token=null,M=null,T=!1,Fe(A)}}}const ri=2e3;function si(s,e,n){let t;const r=zt();let o=!1,a=!1,l=!1,i=[],c,d="",u=0,p={isAccent:!0,size:"xs",iconClassName:"cqi-arrow-up",submit:!0},$=!1,g={},h;function _(){n(3,c.value="",c),n(0,i=[]),c.dispatchEvent(new Event("change"))}function b(){g.value="",g.dispatchEvent(new Event("input"))}function T(X){g=X.detail.textarea}function A(X){var ke;h=pt(X.detail.textfieldValue.replace(/\r?\n/g," ")),(ke=carrotquest.messenger.currentConversation)!=null&&ke.id&&!Ye(carrotquest.messenger.currentConversation)&&L(h),o=h.length>qs,r("passMessageLengthWarning",{visible:o}),n(1,a=!o&&(!!h||!!t))}function H(X,ke){const W=ke||c.files[0];if(!W){n(1,a=!!h);return}let I=!Ys(W),J=!Js(W);if(r("passFileInputWarning",{visible:I||J,warning:I?carrotquest.i18n.errorFileSize:carrotquest.i18n.errorFileType}),I||J){_();return}const ee=new FileReader;ee.addEventListener("load",function(){n(1,a=!0),n(0,i[0]=W,i),n(0,i[0].src=ee.result,i)}),ee.readAsDataURL(W)}function E(){!ce.isUserConfirmedDataProcessingPolicy()&&r("passUserDataProcessingToast",{visible:!0,text:ce.getUserDataProcessingToastText()})}function M(){r("passUserDataProcessingToast",{visible:!1})}function L(X){return He(this,null,function*(){Date.now()-u<ri||d!==X&&($||($=!0,yield Oe("POST","/conversations/"+carrotquest.messenger.currentConversation.id+"/settyping",{body:X}),u=Date.now(),d=X,$=!1))})}function F(X){X.preventDefault(),!(l||o)&&(Qt({text:g.value,file:t}).finally(()=>n(2,l=!1)),n(2,l=!0),n(1,a=!1),_(),b())}const te=()=>F(event),ue=()=>E(),V=()=>M();function Ae(X){i=X,n(0,i)}function we(X){re[X?"unshift":"push"](()=>{c=X,n(3,c)})}return s.$$.update=()=>{s.$$.dirty&1&&(t=i[0])},[i,a,l,c,p,T,A,H,E,M,F,te,ue,V,Ae,we]}class oi extends S{constructor(e){super(),D(this,e,si,ni,N,{},Zl)}}function ai(s){O(s,"svelte-e05o94",'@charset "UTF-8";.root.svelte-e05o94{padding:10px 15px;border-radius:15px;background:#f2f2f2}.inner.svelte-e05o94{color:#333333;-webkit-animation:1.5s linear infinite svelte-e05o94-text-blink;animation:1.5s linear infinite svelte-e05o94-text-blink}.dark-theme .root.svelte-e05o94{background-color:#4d4d4d}.dark-theme .inner.svelte-e05o94{color:#e6e6e6}@-webkit-keyframes svelte-e05o94-text-blink{0%{opacity:0.2}66%{opacity:1}100%{opacity:0.2}}@keyframes svelte-e05o94-text-blink{0%{opacity:0.2}66%{opacity:1}100%{opacity:0.2}}')}function li(s){let e,n;return{c(){e=x("div"),n=x("div"),n.textContent=`${carrotquest.i18n.typing_status}`,m(n,"class","inner svelte-e05o94"),m(e,"class","root svelte-e05o94")},m(t,r){k(t,e,r),w(e,n)},p:C,i:C,o:C,d(t){t&&y(e)}}}class ii extends S{constructor(e){super(),D(this,e,null,li,N,{},ai)}}function ci(){const s=carrotquest.data.app.name;return`https://www.carrotquest.io/chat-demo/?utm_source=cqchat&utm_campaign=landing_chat&utm_medium=outbound&utm_term=${location.hostname}&app_name=${s}`}function di(){return`https://cdn.carrotquest.app/img/${"RU".toLowerCase()}/powered-by/${carrotquest.data.app.settings.messenger_theme}/logo.svg`}function ui(){return{textBeforeLogo:carrotquest.i18n.powered_by_text_before_logo,textAfterLogo:carrotquest.i18n.powered_by_text_after_logo}}function Ut(){return carrotquest.data.app.settings.messenger_show_powered_by}function pi(s){O(s,"svelte-128uf73",'@charset "UTF-8";a.svelte-128uf73{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:2px 6px;border-radius:9999px;font-size:12px;color:#333333;text-decoration:none;-webkit-transition:background-color 0.15s;transition:background-color 0.15s}a.svelte-128uf73:hover{background-color:#f2f2f2}.dark-theme a.svelte-128uf73{color:#ffffff}.dark-theme a.svelte-128uf73:hover{background-color:#4d4d4d}')}function fi(s){let e,n,t,r,o,a,l;return{c(){e=x("a"),n=x("div"),t=B(),r=x("img"),a=B(),l=x("div"),Be(r.src,o=s[2])||m(r,"src",o),m(e,"href",s[3]),m(e,"target","_blank"),m(e,"class","svelte-128uf73")},m(i,c){k(i,e,c),w(e,n),n.innerHTML=s[0],w(e,t),w(e,r),w(e,a),w(e,l),l.innerHTML=s[1]},p(i,[c]){c&1&&(n.innerHTML=i[0]),c&2&&(l.innerHTML=i[1])},i:C,o:C,d(i){i&&y(e)}}}function mi(s,e,n){let{textBeforeLogo:t,textAfterLogo:r}=ui();const o=di(),a=ci();return t&&(t=`${t}&nbsp;`),r&&(r=`&nbsp;${r}`),[t,r,o,a]}let Pt=class extends S{constructor(s){super(),D(this,s,mi,fi,N,{},pi)}};function gi(s){O(s,"svelte-17ldtdg",".root.svelte-17ldtdg{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:30px}.root.single.svelte-17ldtdg{-ms-flex-pack:distribute;justify-content:space-around}.privacy.svelte-17ldtdg{color:#595959;font-size:11px;line-height:11px;text-decoration:none}.privacy.svelte-17ldtdg:hover{text-decoration:underline}")}function vi(s){let e,n,t,r=s[2]&&$i(),o=s[1]&&hi(s);return{c(){e=x("div"),r&&r.c(),n=B(),o&&o.c(),m(e,"class","root svelte-17ldtdg"),Y(e,"single",!s[1]||!s[2])},m(a,l){k(a,e,l),r&&r.m(e,null),w(e,n),o&&o.m(e,null),t=!0},p(a,l){a[1]&&o.p(a,l)},i(a){t||(f(r),t=!0)},o(a){v(r),t=!1},d(a){a&&y(e),r&&r.d(),o&&o.d()}}}function $i(s){let e,n;return e=new Pt({}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function hi(s){let e,n=carrotquest.i18n.privacy_policy+"",t;return{c(){e=x("a"),t=G(n),m(e,"href",s[0]),m(e,"class","privacy svelte-17ldtdg"),m(e,"target","_blank")},m(r,o){k(r,e,o),w(e,t)},p:C,d(r){r&&y(e)}}}function xi(s){let e,n,t=(s[1]||s[2])&&vi(s);return{c(){t&&t.c(),e=ae()},m(r,o){t&&t.m(r,o),k(r,e,o),n=!0},p(r,[o]){(r[1]||r[2])&&t.p(r,o)},i(r){n||(f(t),n=!0)},o(r){v(t),n=!1},d(r){t&&t.d(r),r&&y(e)}}}function bi(s){const e=Zs(),n=carrotquest.data.app.settings.messenger_show_privacy_policy,t=Ut();return[e,n,t]}class wi extends S{constructor(e){super(),D(this,e,bi,xi,N,{},gi)}}function ki(s){O(s,"svelte-1eu0zsz",".root.svelte-1eu0zsz{text-align:center;margin-top:10px}.opened-date-inner.svelte-1eu0zsz{display:inline-block;font-size:12px;color:#999999;line-height:23px;padding:0 10px;border-radius:23px;background-color:#fff}.dark-theme .opened-date-inner.svelte-1eu0zsz{background-color:#333}")}function yi(s){let e,n;return{c(){e=x("div"),n=x("div"),n.textContent=`${s[0]}`,m(n,"class","opened-date-inner svelte-1eu0zsz"),m(e,"class","root svelte-1eu0zsz")},m(t,r){k(t,e,r),w(e,n)},p:C,i:C,o:C,d(t){t&&y(e)}}}function _i(s,e,n){let{date:t}=e,r=js(t);return s.$$set=o=>{"date"in o&&n(1,t=o.date)},[r,t]}class qi extends S{constructor(e){super(),D(this,e,_i,yi,N,{date:1},ki)}}function zi(s){O(s,"svelte-d5heqh",".root.svelte-d5heqh{position:fixed;bottom:65px;right:10px;z-index:1}.inner.svelte-d5heqh{position:relative;width:30px;height:30px;border-radius:50%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#fff;-webkit-box-shadow:0 0 2px rgba(0, 0, 0, 0.103912), 0 1px 8px rgba(0, 0, 0, 0.12);box-shadow:0 0 2px rgba(0, 0, 0, 0.103912), 0 1px 8px rgba(0, 0, 0, 0.12);cursor:pointer}.counter.svelte-d5heqh{position:absolute;width:10px;height:10px;top:0;right:0;background:#FF3B30;border-radius:50%;z-index:1}")}function ar(s){let e,n,t,r;return{c(){e=x("div"),m(e,"class","counter svelte-d5heqh")},m(o,a){k(o,e,a),r=!0},i(o){r||(ne(()=>{r&&(t&&t.end(1),n=me(e,qt,{}),n.start())}),r=!0)},o(o){n&&n.invalidate(),t=he(e,ie,{}),r=!1},d(o){o&&y(e),o&&t&&t.end()}}}function ji(s){let e,n,t,r,o,a,l,i,c,d=s[0]&&ar();return{c(){e=x("div"),n=x("div"),d&&d.c(),t=B(),r=Se("svg"),o=Se("path"),a=Se("path"),m(o,"d","M5 7L10.0877 11L15 7"),m(o,"stroke","#999999"),m(o,"stroke-width","2"),m(o,"stroke-linecap","round"),m(a,"d","M5 12L10.0877 16L15 12"),m(a,"stroke","#999999"),m(a,"stroke-width","2"),m(a,"stroke-linecap","round"),m(r,"width","20"),m(r,"height","20"),m(r,"viewBox","0 0 20 20"),m(r,"fill","none"),m(r,"xmlns","http://www.w3.org/2000/svg"),m(n,"class","inner svelte-d5heqh"),m(e,"class","root svelte-d5heqh")},m(u,p){k(u,e,p),w(e,n),d&&d.m(n,null),w(n,t),w(n,r),w(r,o),w(r,a),l=!0,i||(c=R(e,"click",s[1]),i=!0)},p(u,[p]){u[0]?d?p&1&&f(d,1):(d=ar(),d.c(),f(d,1),d.m(n,t)):d&&(U(),v(d,1,1,()=>{d=null}),P())},i(u){l||(f(d),l=!0)},o(u){v(d),l=!1},d(u){u&&y(e),d&&d.d(),i=!1,c()}}}function Ci(s,e,n){let{dialogElement:t}=e,{counterAtScrollButtonVisible:r}=e;function o(){n(0,r=!1),t.scrollTo({top:0,behavior:"smooth"})}return s.$$set=a=>{"dialogElement"in a&&n(2,t=a.dialogElement),"counterAtScrollButtonVisible"in a&&n(0,r=a.counterAtScrollButtonVisible)},[r,o,t]}class Ti extends S{constructor(e){super(),D(this,e,Ci,ji,N,{dialogElement:2,counterAtScrollButtonVisible:0},zi)}}function Ii(s){O(s,"svelte-ki1dw1",'@charset "UTF-8";.inner-border.svelte-ki1dw1{border:1px solid #e6e6e6}.inner.svelte-ki1dw1{margin:0 10px -10px 10px;padding:5px;-webkit-transform:translate(0, -20px);-ms-transform:translate(0, -20px);transform:translate(0, -20px);overflow:hidden;border-radius:20px}.dark-theme .inner.svelte-ki1dw1{background-color:#333333;border-color:#999999}.buttons-wrap.svelte-ki1dw1{margin-right:15px;display:-webkit-box;display:-ms-flexbox;display:flex}.delete-button-wrap.svelte-ki1dw1{margin-right:5px}.progress-bar-wrap.svelte-ki1dw1{margin-right:15px}.send-button-wrap.svelte-ki1dw1{margin-left:10px}')}function Bi(s){let e,n,t,r,o,a;return t=new Rn({}),o=new kl({}),{c(){e=x("div"),n=x("div"),q(t.$$.fragment),r=B(),q(o.$$.fragment),m(n,"class","delete-button-wrap svelte-ki1dw1"),m(e,"class","buttons-wrap svelte-ki1dw1")},m(l,i){k(l,e,i),w(e,n),z(t,n,null),w(e,r),z(o,e,null),a=!0},p:C,i(l){a||(f(t.$$.fragment,l),f(o.$$.fragment,l),a=!0)},o(l){v(t.$$.fragment,l),v(o.$$.fragment,l),a=!1},d(l){l&&y(e),j(t),j(o)}}}function Ni(s){let e,n,t;return n=new Ll({props:{width:s[2]}}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","progress-bar-wrap svelte-ki1dw1")},m(r,o){k(r,e,o),z(n,e,null),t=!0},p(r,o){const a={};o&4&&(a.width=r[2]),n.$set(a)},i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function Ai(s){let e,n;return e=new ge({props:{isAccent:!1,iconClassName:"cqi-mic",size:"xs"}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Ei(s){let e,n,t,r;return n=new Kn({}),{c(){e=x("div"),q(n.$$.fragment)},m(o,a){k(o,e,a),z(n,e,null),r=!0},p(o,a){},i(o){r||(f(n.$$.fragment,o),o&&(t||ne(()=>{t=me(e,qt,{duration:300,delay:100,easing:Cs}),t.start()})),r=!0)},o(o){v(n.$$.fragment,o),r=!1},d(o){o&&y(e),j(n)}}}function Si(s){let e,n,t,r;const o=[Ei,Ai],a=[];function l(i,c){return i[1]?0:1}return n=l(s),t=a[n]=o[n](s),{c(){e=x("div"),t.c(),m(e,"class","send-button-wrap svelte-ki1dw1")},m(i,c){k(i,e,c),a[n].m(e,null),r=!0},p(i,c){let d=n;n=l(i),n!==d&&(U(),v(a[d],1,1,()=>{a[d]=null}),P(),t=a[n],t||(t=a[n]=o[n](i),t.c()),f(t,1),t.m(e,null))},i(i){r||(f(t),r=!0)},o(i){v(t),r=!1},d(i){i&&y(e),a[n].d()}}}function Di(s){let e,n,t,r,o,a;function l(c){s[4](c)}let i={isInAccentUsage:!1,timeSeconds:s[3],$$slots:{extra:[Si],"progress-bar":[Ni],buttons:[Bi]},$$scope:{ctx:s}};return s[2]!==void 0&&(i.progressBarWidth=s[2]),t=new Et({props:i}),re.push(()=>Te(t,"progressBarWidth",l)),{c(){e=x("div"),n=x("div"),q(t.$$.fragment),m(n,"class",o="inner "+(s[0]?"inner-border":"")+" svelte-ki1dw1")},m(c,d){k(c,e,d),w(e,n),z(t,n,null),a=!0},p(c,[d]){const u={};d&8&&(u.timeSeconds=c[3]),d&70&&(u.$$scope={dirty:d,ctx:c}),!r&&d&4&&(r=!0,u.progressBarWidth=c[2],Ie(()=>r=!1)),t.$set(u),(!a||d&1&&o!==(o="inner "+(c[0]?"inner-border":"")+" svelte-ki1dw1"))&&m(n,"class",o)},i(c){a||(f(t.$$.fragment,c),a=!0)},o(c){v(t.$$.fragment,c),a=!1},d(c){c&&y(e),j(t)}}}function Mi(s,e,n){let t,r;Z(s,Ge,c=>n(5,t=c)),Z(s,et,c=>n(3,r=c));let{addBorder:o=!0}=e,a=!1,l;Re(()=>{setTimeout(()=>n(1,a=!0),1e3)}),tt(()=>{t&&Lt()});function i(c){l=c,n(2,l)}return s.$$set=c=>{"addBorder"in c&&n(0,o=c.addBorder)},[o,a,l,r,i]}let Wi=class extends S{constructor(s){super(),D(this,s,Mi,Di,N,{addBorder:0},Ii)}};function Li(s){O(s,"svelte-kzzhdx",'@charset "UTF-8";.inner-border.svelte-kzzhdx{border:1px solid #e6e6e6}.inner.svelte-kzzhdx{margin:0 10px -10px 10px;padding:5px;-webkit-transform:translate(0, -20px);-ms-transform:translate(0, -20px);transform:translate(0, -20px);overflow:hidden;border-radius:20px}.dark-theme .inner.svelte-kzzhdx{border-color:#999999}.buttons-wrap.svelte-kzzhdx{margin-right:15px;display:-webkit-box;display:-ms-flexbox;display:flex}.delete-button-wrap.svelte-kzzhdx{margin-right:5px}.progress-bar-wrap.svelte-kzzhdx{margin-right:15px}.send-button-wrap.svelte-kzzhdx{margin-left:10px}')}function Oi(s){let e,n,t,r,o,a;return t=new Rn({}),o=new Vn({props:{audioData:s[1]}}),{c(){e=x("div"),n=x("div"),q(t.$$.fragment),r=B(),q(o.$$.fragment),m(n,"class","delete-button-wrap svelte-kzzhdx"),m(e,"class","buttons-wrap svelte-kzzhdx")},m(l,i){k(l,e,i),w(e,n),z(t,n,null),w(e,r),z(o,e,null),a=!0},p(l,i){const c={};i&2&&(c.audioData=l[1]),o.$set(c)},i(l){a||(f(t.$$.fragment,l),f(o.$$.fragment,l),a=!0)},o(l){v(t.$$.fragment,l),v(o.$$.fragment,l),a=!1},d(l){l&&y(e),j(t),j(o)}}}function Ui(s){let e,n,t,r,o,a;return n=new Xn({props:{isInAccentUsage:!1,width:s[2],progress:s[4],progressBarPath:s[6]}}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","progress-bar-wrap svelte-kzzhdx")},m(l,i){k(l,e,i),z(n,e,null),r=!0,o||(a=en(t=or.call(null,e,{audioEl:s[3]})),o=!0)},p(l,i){const c={};i&4&&(c.width=l[2]),i&16&&(c.progress=l[4]),i&64&&(c.progressBarPath=l[6]),n.$set(c),t&&tn(t.update)&&i&8&&t.update.call(null,{audioEl:l[3]})},i(l){r||(f(n.$$.fragment,l),r=!0)},o(l){v(n.$$.fragment,l),r=!1},d(l){l&&y(e),j(n),o=!1,a()}}}function Pi(s){let e,n,t;return n=new Kn({}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","send-button-wrap svelte-kzzhdx")},m(r,o){k(r,e,o),z(n,e,null),t=!0},p:C,i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function Hi(s){let e,n,t,r,o,a,l,i,c,d,u;function p(g){s[11](g)}let $={isInAccentUsage:!1,timeSeconds:s[5],$$slots:{extra:[Pi],"progress-bar":[Ui],buttons:[Oi]},$$scope:{ctx:s}};return s[2]!==void 0&&($.progressBarWidth=s[2]),a=new Et({props:$}),re.push(()=>Te(a,"progressBarWidth",p)),{c(){e=x("div"),n=x("div"),t=x("audio"),o=B(),q(a.$$.fragment),m(t,"class","hidden"),Be(t.src,r=s[7])||m(t,"src",r),m(t,"preload","none"),m(n,"class",i="inner "+(s[0]?"inner-border":"")+" svelte-kzzhdx")},m(g,h){k(g,e,h),w(e,n),w(n,t),s[10](t),w(n,o),z(a,n,null),c=!0,d||(u=[R(t,"ended",s[9]),R(t,"timeupdate",s[8])],d=!0)},p(g,[h]){(!c||h&128&&!Be(t.src,r=g[7]))&&m(t,"src",r);const _={};h&32&&(_.timeSeconds=g[5]),h&262238&&(_.$$scope={dirty:h,ctx:g}),!l&&h&4&&(l=!0,_.progressBarWidth=g[2],Ie(()=>l=!1)),a.$set(_),(!c||h&1&&i!==(i="inner "+(g[0]?"inner-border":"")+" svelte-kzzhdx"))&&m(n,"class",i)},i(g){c||(f(a.$$.fragment,g),c=!0)},o(g){v(a.$$.fragment,g),c=!1},d(g){g&&y(e),s[10](null),j(a),d=!1,Fe(u)}}}function Fi(s,e,n){let t,r,o,a;Z(s,be,E=>n(14,t=E)),Z(s,_e,E=>n(15,r=E)),Z(s,Qe,E=>n(16,o=E)),Z(s,Ts,E=>n(7,a=E));let{addBorder:l=!0}=e,i,c={},d,u=0,p,$,g,h;function _(E){var M,L;n(5,u=Math.floor(E.target.currentTime)),n(4,d=yt(i.currentTime,(L=(M=c?.audioBuffer)==null?void 0:M.duration)!=null?L:100))}function b(){n(4,d=100),_e.set(!1)}function T(){n(6,h=kt(c.audioBuffer,g))}Re(()=>{n(1,c={src:a,audioEl:i,audioBuffer:null}),p=ct.subscribe(E=>{t&&c?.audioEl===t?.audioEl&&n(4,d=E)}),$=Ct.subscribe(E=>{E&&Bn(E).then(M=>{n(1,c.audioBuffer=M,c),Mt.update(L=>(L[a]=kt(M),n(6,h=kt(c.audioBuffer,g)),L))})})}),tt(()=>{p(),$(),o&&Lt(),r&&t?.src===c?.src&&sr()});function A(E){re[E?"unshift":"push"](()=>{i=E,n(3,i)})}function H(E){g=E,n(2,g)}return s.$$set=E=>{"addBorder"in E&&n(0,l=E.addBorder)},s.$$.update=()=>{s.$$.dirty&6&&g&&c.audioBuffer&&T()},[l,c,g,i,d,u,h,a,_,b,A,H]}let Gi=class extends S{constructor(s){super(),D(this,s,Fi,Hi,N,{addBorder:0},Li)}};function Ri(s){O(s,"svelte-18t8zpf",".smile-message.svelte-18t8zpf{margin-top:5px}.smile-message.first.svelte-18t8zpf{margin-top:0}.smile-message.loading.svelte-18t8zpf{opacity:0.5}")}function Vi(s){let e;return{c(){e=x("div"),m(e,"class","smile-message svelte-18t8zpf"),Y(e,"loading",s[0]),Y(e,"first",s[1])},m(n,t){k(n,e,t),e.innerHTML=s[2]},p(n,[t]){t&4&&(e.innerHTML=n[2]),t&1&&Y(e,"loading",n[0]),t&2&&Y(e,"first",n[1])},i:C,o:C,d(n){n&&y(e)}}}function Yi(s,e,n){let t,{body:r}=e,{loading:o}=e,{singleInGroup:a}=e,{firstInGroup:l}=e,{lastInGroup:i}=e;return s.$$set=c=>{"body"in c&&n(3,r=c.body),"loading"in c&&n(0,o=c.loading),"singleInGroup"in c&&n(4,a=c.singleInGroup),"firstInGroup"in c&&n(1,l=c.firstInGroup),"lastInGroup"in c&&n(5,i=c.lastInGroup)},s.$$.update=()=>{s.$$.dirty&8&&n(2,t=Nt(r,!0))},[o,l,t,r,a,i]}class Ji extends S{constructor(e){super(),D(this,e,Yi,Vi,N,{body:3,loading:0,singleInGroup:4,firstInGroup:1,lastInGroup:5},Ri)}}function Zi(s){O(s,"svelte-plf3dv",".root.svelte-plf3dv{font-size:14px;line-height:1.43;word-wrap:break-word}.message-text p{margin:0}.message-text img{max-width:100%}")}function Ki(s){let e,n;return e=new gt({props:{icon:s[1]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Xi(s){let e,n,t,r,o,a,l=s[1]&&Ki(s);return{c(){e=x("div"),l&&l.c(),n=B(),t=new Je(!1),t.a=null,m(e,"class","root message-text cursor-pointer svelte-plf3dv")},m(i,c){k(i,e,c),l&&l.m(e,null),w(e,n),t.m(s[0],e),r=!0,o||(a=R(e,"click",s[6],{once:!0}),o=!0)},p(i,[c]){i[1]&&l.p(i,c),(!r||c&1)&&t.p(i[0])},i(i){r||(f(l),r=!0)},o(i){v(l),r=!1},d(i){i&&y(e),l&&l.d(),o=!1,a()}}}function Qi(s,e,n){let t,{id:r}=e,{body:o}=e,{action:a}=e,l=a.body_json.icon,i=a.body_json.href,c=a.body_json.target;function d(p){window.open(i,c).focus()}const u=()=>d(event);return s.$$set=p=>{"id"in p&&n(3,r=p.id),"body"in p&&n(4,o=p.body),"action"in p&&n(5,a=p.action)},s.$$.update=()=>{s.$$.dirty&16&&n(0,t=Nt(o,!1))},[t,l,d,r,o,a,u]}class ec extends S{constructor(e){super(),D(this,e,Qi,Xi,N,{id:3,body:4,action:5},Zi)}}function tc(s){let e;return{c(){e=G(s[1])},m(n,t){k(n,e,t)},p(n,t){t&2&&Q(e,n[1])},d(n){n&&y(e)}}}function nc(s){let e,n,t;const r=[s[2]];let o={$$slots:{default:[tc]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=oe(o,r[a]);return n=new ge({props:o}),n.$on("click",s[4]),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","article-link")},m(a,l){k(a,e,l),z(n,e,null),t=!0},p(a,[l]){const i=l&4?$e(r,[fe(a[2])]):{};l&66&&(i.$$scope={dirty:l,ctx:a}),n.$set(i)},i(a){t||(f(n.$$.fragment,a),t=!0)},o(a){v(n.$$.fragment,a),t=!1},d(a){a&&y(e),j(n)}}}function rc(s,e,n){var t;let{articleId:r}=e,o="",a="",l=(t=carrotquest.data)==null?void 0:t.knowledge_base_domain;r&&(o=`//${l}/article/${r}`,a=carrotquest.i18n.article_link),r||(o=`//${l}`,a=carrotquest.i18n.to_knowledge_base);let i={isAccent:!0,size:"md",iconClassName:"cqi-external-link"};const c=()=>window.open(o);return s.$$set=d=>{"articleId"in d&&n(3,r=d.articleId)},[o,a,i,r,c]}class lr extends S{constructor(e){super(),D(this,e,rc,nc,N,{articleId:3})}}function sc(s){O(s,"svelte-plf3dv",".root.svelte-plf3dv{font-size:14px;line-height:1.43;word-wrap:break-word}.message-text p{margin:0}.message-text img{max-width:100%}")}function oc(s){let e,n;return e=new lr({}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function ac(s){let e,n,t,r,o=s[1]&&carrotquest.data.app.settings.messenger_show_kb_link_in_welcome_message&&oc();return{c(){e=x("div"),n=new Je(!1),t=B(),o&&o.c(),n.a=t,m(e,"class","root message-text svelte-plf3dv")},m(a,l){k(a,e,l),n.m(s[0],e),w(e,t),o&&o.m(e,null),r=!0},p(a,[l]){(!r||l&1)&&n.p(a[0])},i(a){r||(f(o),r=!0)},o(a){v(o),r=!1},d(a){a&&y(e),o&&o.d()}}}function lc(s,e,n){let t,{id:r}=e,{body:o}=e,a=r.includes("welcome_message");return s.$$set=l=>{"id"in l&&n(2,r=l.id),"body"in l&&n(3,o=l.body)},s.$$.update=()=>{s.$$.dirty&8&&n(0,t=Nt(o,!1))},[t,a,r,o]}class ic extends S{constructor(e){super(),D(this,e,lc,ac,N,{id:2,body:3},sc)}}function cc(s){O(s,"svelte-kp0x0p","div.svelte-kp0x0p{font-size:14px;line-height:20px;color:#999999}")}function dc(s){let e;return{c(){e=x("div"),e.textContent=`${carrotquest.i18n.removedMessage}`,m(e,"class","svelte-kp0x0p")},m(n,t){k(n,e,t)},p:C,i:C,o:C,d(n){n&&y(e)}}}class uc extends S{constructor(e){super(),D(this,e,null,dc,N,{},cc)}}function ir(s){var e=1024;function n(t,r){return(t-t%r)/r}return n(s,e)?n(s,at(e,2))?n(s,at(e,3))?n(s,at(e,3))+" "+carrotquest.i18n.fileSize[3]:n(s,at(e,2))+" "+carrotquest.i18n.fileSize[2]:n(s,e)+" "+carrotquest.i18n.fileSize[1]:s%e+" "+carrotquest.i18n.fileSize[0]}function cr(s){switch(s){case"text/html":return"html";case"text/css":return"css";case"text/xml":return"xml";case"image/gif":return"gif";case"image/jpeg":return"jpeg";case"application/x-javascript":return"js";case"application/atom+xml":return"atom";case"application/rss+xml":return"rss";case"text/mathml":return"mml";case"text/plain":return"txt";case"text/vnd.sun.j2me.app-descriptor":return"jad";case"text/vnd.wap.wml":return"wml";case"text/x-component":return"htc";case"image/png":return"png";case"image/tiff":return"tiff";case"image/vnd.wap.wbmp":return"wbmp";case"image/x-icon":return"ico";case"image/x-jng":return"jng";case"image/x-ms-bmp":return"bmp";case"image/svg+xml":return"svg";case"image/webp":return"webp";case"application/java-archive":return"jar";case"application/mac-binhex40":return"hqx";case"application/msword":return"doc";case"application/pdf":return"pdf";case"application/postscript":return"ps";case"application/rtf":return"rtf";case"application/vnd.ms-excel":return"xls";case"application/vnd.ms-powerpoint":return"ppt";case"application/vnd.wap.wmlc":return"wmlc";case"application/vnd.google-earth.kml+xml":return"kml";case"application/vnd.google-earth.kmz":return"kmz";case"application/x-7z-compressed 7":return"z";case"application/x-cocoa":return"cco";case"application/x-java-archive-diff":return"jardiff";case"application/x-java-jnlp-file":return"jnlp";case"application/x-makeself":return"run";case"application/x-perl":return"pl";case"application/x-pilot":return"pdb";case"application/x-rar-compressed":return"rar";case"application/x-redhat-package-manager":return"rpm";case"application/x-sea":return"sea";case"application/x-shockwave-flash":return"swf";case"application/x-stuffit":return"sit";case"application/x-tcl tcl":return"tk";case"application/x-x509-ca-cert":return"crt";case"application/x-xpinstall":return"xpi";case"application/xhtml+xml":return"xhtml";case"application/zip":return"zip";case"application/octet-stream":return"exe";case"audio/midi":return"midi";case"audio/mpeg":return"mp3";case"audio/ogg":return"ogg";case"audio/x-realaudio":return"ra";case"video/3gpp 3":return"gpp";case"video/mpeg":return"mpeg";case"video/quicktime":return"mov";case"video/x-flv":return"flv";case"video/x-mng":return"mng";case"video/x-ms-asf":return"asf";case"video/x-ms-wmv":return"wmv";case"video/x-msvideo":return"avi";case"video/mp4":return"mp4";default:return"file"}}function pc(s){O(s,"svelte-1ogj1ad",".user.svelte-1ogj1ad .size.svelte-1ogj1ad{color:#e6e6e6}.admin.svelte-1ogj1ad .name.svelte-1ogj1ad{color:#333333}.name.svelte-1ogj1ad.svelte-1ogj1ad{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;width:239px}.document.svelte-1ogj1ad.svelte-1ogj1ad{font-size:14px;line-height:20px;display:-webkit-box;display:-ms-flexbox;display:flex;cursor:pointer;text-decoration:none}.icon.svelte-1ogj1ad.svelte-1ogj1ad{width:40px;height:40px;min-width:40px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:10px;border-width:2px;border-style:solid;border-radius:20px}.size.svelte-1ogj1ad.svelte-1ogj1ad{font-size:12px;color:#999999}")}function fc(s){let e,n,t,r,o,a,l,i,c,d=s[0].filename+"",u,p,$,g=ir(s[0].size)+"",h,_,b=cr(s[0].mime_type).toUpperCase()+"",T,A,H;return{c(){e=x("a"),n=x("div"),t=Se("svg"),r=Se("path"),l=B(),i=x("div"),c=x("div"),u=G(d),p=B(),$=x("div"),h=G(g),_=G(" - "),T=G(b),m(r,"fill-rule","evenodd"),m(r,"clip-rule","evenodd"),m(r,"d","M9.19666 15.5956C9.37889 15.841 9.67088 16 10 16C10.3084 16 10.5841 15.8604 10.7676 15.641C10.8119 15.6072 10.8545 15.57 10.8949 15.5294L15.7078 10.7064C16.098 10.3154 16.0973 9.68226 15.7064 9.29215C15.3154 8.90203 14.6823 8.9027 14.2922 9.29363L11 12.5927L11 5C11 4.44771 10.5523 4 10 4C9.44772 4 9 4.44771 9 5L9 12.5789L5.70637 9.29215C5.31543 8.90204 4.68227 8.9027 4.29215 9.29363C3.90204 9.68457 3.9027 10.3177 4.29364 10.7078L9.12716 15.5313C9.1497 15.5537 9.17289 15.5752 9.19666 15.5956Z"),m(r,"fill",o=s[1]==="admin"?s[2]:s[3]),m(t,"width","20"),m(t,"height","20"),m(t,"viewBox","0 0 20 20"),m(t,"fill","none"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(n,"class",a="icon "+(s[1]==="admin"?"border_a":"border_c")+" svelte-1ogj1ad"),m(c,"class","name svelte-1ogj1ad"),Y(c,"border_c",s[1]==="user"),m($,"class","size svelte-1ogj1ad"),m(e,"href",A=s[0].url),m(e,"download",""),m(e,"class",H="document "+s[1]+" svelte-1ogj1ad"),m(e,"target","_blank")},m(E,M){k(E,e,M),w(e,n),w(n,t),w(t,r),w(e,l),w(e,i),w(i,c),w(c,u),w(i,p),w(i,$),w($,h),w($,_),w($,T)},p(E,[M]){M&2&&o!==(o=E[1]==="admin"?E[2]:E[3])&&m(r,"fill",o),M&2&&a!==(a="icon "+(E[1]==="admin"?"border_a":"border_c")+" svelte-1ogj1ad")&&m(n,"class",a),M&1&&d!==(d=E[0].filename+"")&&Q(u,d),M&2&&Y(c,"border_c",E[1]==="user"),M&1&&g!==(g=ir(E[0].size)+"")&&Q(h,g),M&1&&b!==(b=cr(E[0].mime_type).toUpperCase()+"")&&Q(T,b),M&1&&A!==(A=E[0].url)&&m(e,"href",A),M&2&&H!==(H="document "+E[1]+" svelte-1ogj1ad")&&m(e,"class",H)},i:C,o:C,d(E){E&&y(e)}}}function mc(s,e,n){let{attachment:t}=e,{addresseeType:r}=e,{accentHexColor:o,contrastColor:a}=dn();return s.$$set=l=>{"attachment"in l&&n(0,t=l.attachment),"addresseeType"in l&&n(1,r=l.addresseeType)},[t,r,o,a]}class gc extends S{constructor(e){super(),D(this,e,mc,fc,N,{attachment:0,addresseeType:1},pc)}}function vc(s){O(s,"svelte-1fqzy3b","div.svelte-1fqzy3b.svelte-1fqzy3b{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;max-width:300px;max-height:300px;min-height:40px;min-width:40px;font-size:14px;line-height:20px;overflow:hidden}div.svelte-1fqzy3b img.svelte-1fqzy3b{max-height:100%;max-width:100%;cursor:pointer}div.svelte-1fqzy3b img.disabled.svelte-1fqzy3b{cursor:default;pointer-events:none}")}function $c(s){let e,n,t,r,o;return{c(){e=x("div"),n=x("img"),m(n,"draggable","false"),Be(n.src,t=s[0].blob_url?s[0].blob_url:s[0].url)||m(n,"src",t),m(n,"alt",""),m(n,"class","svelte-1fqzy3b"),Y(n,"disabled",!s[0].url),m(e,"class","svelte-1fqzy3b")},m(a,l){k(a,e,l),w(e,n),r||(o=R(n,"click",s[1]),r=!0)},p(a,[l]){l&1&&!Be(n.src,t=a[0].blob_url?a[0].blob_url:a[0].url)&&m(n,"src",t),l&1&&Y(n,"disabled",!a[0].url)},i:C,o:C,d(a){a&&y(e),r=!1,o()}}}function hc(s){window.open(s)}function xc(s,e,n){let{attachment:t}=e;const r=()=>hc(t.url);return s.$$set=o=>{"attachment"in o&&n(0,t=o.attachment)},[t,r]}class bc extends S{constructor(e){super(),D(this,e,xc,$c,N,{attachment:0},vc)}}function wc(s){let e,n,t=s[0].title+"",r,o,a,l=s[0].description+"",i,c,d,u;return d=new lr({props:{articleId:s[0].id}}),{c(){e=x("div"),n=x("div"),r=G(t),o=B(),a=x("div"),i=G(l),c=B(),q(d.$$.fragment),m(n,"class","article__title"),m(a,"class","article__desc"),m(e,"class","article")},m(p,$){k(p,e,$),w(e,n),w(n,r),w(e,o),w(e,a),w(a,i),w(e,c),z(d,e,null),u=!0},p(p,[$]){(!u||$&1)&&t!==(t=p[0].title+"")&&Q(r,t),(!u||$&1)&&l!==(l=p[0].description+"")&&Q(i,l);const g={};$&1&&(g.articleId=p[0].id),d.$set(g)},i(p){u||(f(d.$$.fragment,p),u=!0)},o(p){v(d.$$.fragment,p),u=!1},d(p){p&&y(e),j(d)}}}function kc(s,e,n){let{article:t}=e;return s.$$set=r=>{"article"in r&&n(0,t=r.article)},[t]}class yc extends S{constructor(e){super(),D(this,e,kc,wc,N,{article:0})}}function _c(s){O(s,"svelte-1fagfu6",'@charset "UTF-8";.wrap.svelte-1fagfu6{padding-top:10px}.field-wrap.svelte-1fagfu6{position:relative}.field.svelte-1fagfu6{position:relative;overflow:hidden;border-radius:20px;border:1px solid #e6e6e6;background:#ffffff}.replied-bubble.svelte-1fagfu6{height:42px;padding:10px;width:100%;border-radius:20px;border:1px solid #e6e6e6}.dark .field .form-field{color:#ffffff !important}.dark .replied-bubble{background-color:#4d4d4d !important;border-color:#333333 !important;color:#999999 !important}.auto-reply-warning{bottom:100%;top:initial}.dark-theme .field.svelte-1fagfu6{background-color:#333333;border-color:#595959}')}function qc(s){let e,n,t,r=s[1]&&dr(),o=!s[1]&&ur(s);return{c(){e=x("div"),r&&r.c(),n=B(),o&&o.c(),m(e,"class","wrap svelte-1fagfu6")},m(a,l){k(a,e,l),r&&r.m(e,null),w(e,n),o&&o.m(e,null),t=!0},p(a,l){a[1]?r?(r.p(a,l),l&2&&f(r,1)):(r=dr(),r.c(),f(r,1),r.m(e,n)):r&&(U(),v(r,1,1,()=>{r=null}),P()),a[1]?o&&(U(),v(o,1,1,()=>{o=null}),P()):o?(o.p(a,l),l&2&&f(o,1)):(o=ur(a),o.c(),f(o,1),o.m(e,null))},i(a){t||(f(r),f(o),t=!0)},o(a){v(r),v(o),t=!1},d(a){a&&y(e),r&&r.d(),o&&o.d()}}}function dr(s){let e,n,t;return{c(){e=x("div"),e.textContent=`${carrotquest.i18n.thanks}`,m(e,"class","replied-bubble svelte-1fagfu6")},m(r,o){k(r,e,o),t=!0},p:C,i(r){t||(ne(()=>{t&&(n||(n=pe(e,ie,{},!0)),n.run(1))}),t=!0)},o(r){n||(n=pe(e,ie,{},!1)),n.run(0),t=!1},d(r){r&&y(e),r&&n&&n.end()}}}function ur(s){let e,n,t,r,o,a=!s[2]&&pr(s);const l=[s[5]];let i={};for(let c=0;c<l.length;c+=1)i=oe(i,l[c]);return r=new Dt({props:i}),{c(){e=x("div"),a&&a.c(),n=B(),t=x("div"),q(r.$$.fragment),m(t,"class","field svelte-1fagfu6"),m(e,"class","field-wrap svelte-1fagfu6")},m(c,d){k(c,e,d),a&&a.m(e,null),w(e,n),w(e,t),z(r,t,null),o=!0},p(c,d){c[2]?a&&(U(),v(a,1,1,()=>{a=null}),P()):a?(a.p(c,d),d&4&&f(a,1)):(a=pr(c),a.c(),f(a,1),a.m(e,n));const u=d&32?$e(l,[fe(c[5])]):{};r.$set(u)},i(c){o||(f(a),f(r.$$.fragment,c),o=!0)},o(c){v(a),v(r.$$.fragment,c),o=!1},d(c){c&&y(e),a&&a.d(),j(r)}}}function pr(s){let e,n;return e=new st({props:{class:"auto-reply-warning",type:"warning",$$slots:{default:[zc]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&2048&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function zc(s){let e;return{c(){e=G(s[4])},m(n,t){k(n,e,t)},p:C,d(n){n&&y(e)}}}function jc(s){let e,n,t,r,o=s[3]&&qc(s);return{c(){e=x("div"),n=x("div"),t=B(),o&&o.c(),m(e,"class","auto-reply")},m(a,l){k(a,e,l),w(e,n),n.innerHTML=s[0],w(e,t),o&&o.m(e,null),r=!0},p(a,[l]){(!r||l&1)&&(n.innerHTML=a[0]),a[3]&&o.p(a,l)},i(a){r||(f(o),r=!0)},o(a){v(o),r=!1},d(a){a&&y(e),o&&o.d()}}}function Cc(s,e,n){let{part:t}=e,{id:r,body:o,autoReply:a}=t,{replied:l,replyType:i}=a;o=o.replace(/\n/g,"<br>");let c=carrotquest.i18n["enter_"+i],d=["phone","email"].includes(i),u=carrotquest.i18n[`input_error_${i}`],p=!0,$={placeholder:c,onSubmitHandle:g=>{var h,_;let b=pt(g);if(i==="phone"&&n(2,p=ln(b)),i==="email"&&n(2,p=cn(b)),!p)return;let T=`/conversationparts/${r}/meta_data/`,A={meta_data:JSON.stringify({replied:!0})},H={id:(_=(h=carrotquest==null?void 0:carrotquest.messenger)==null?void 0:h.currentConversation)==null?void 0:_.id,type:Ks.AUTO_REPLY};i==="phone"&&(un({props:{$phone:b},sourceOfChange:H}),pn("incr","js.autoreply.left_phone")),i==="email"&&(un({props:{$email:b},sourceOfChange:H}),pn("incr","js.autoreply.left_email")),Oe("POST",T,A).then(()=>{n(1,l=!0)})}};return s.$$set=g=>{"part"in g&&n(6,t=g.part)},[o,l,p,d,u,$,t]}class Tc extends S{constructor(e){super(),D(this,e,Cc,jc,N,{part:6},_c)}}function Ic(s){O(s,"svelte-gme81q",".message-body.svelte-gme81q{font-size:14px;line-height:20px;margin-bottom:10px}.tip.svelte-gme81q{margin-top:10px;border-top:1px solid #e6e6e6;padding-top:10px;font-size:12px;line-height:20px}")}function Bc(s){let e=carrotquest.i18n.integration_zoom_button_text+"",n;return{c(){n=G(e)},m(t,r){k(t,n,r)},p:C,d(t){t&&y(n)}}}function Nc(s){let e;return{c(){e=x("div"),e.textContent=`${carrotquest.i18n.integration_zoom_tip}`,m(e,"class","tip svelte-gme81q")},m(n,t){k(n,e,t)},p:C,d(n){n&&y(e)}}}function Ac(s){let e,n,t,r,o,a;const l=[s[2]];let i={$$slots:{default:[Bc]},$$scope:{ctx:s}};for(let d=0;d<l.length;d+=1)i=oe(i,l[d]);r=new ge({props:i}),r.$on("click",s[5]);let c=!s[1]&&Nc();return{c(){e=x("div"),n=x("div"),n.textContent=`${s[0]}`,t=B(),q(r.$$.fragment),o=B(),c&&c.c(),m(n,"class","message-body svelte-gme81q")},m(d,u){k(d,e,u),w(e,n),w(e,t),z(r,e,null),w(e,o),c&&c.m(e,null),a=!0},p(d,[u]){const p=u&4?$e(l,[fe(d[2])]):{};u&256&&(p.$$scope={dirty:u,ctx:d}),r.$set(p),d[1]||c.p(d,u)},i(d){a||(f(r.$$.fragment,d),a=!0)},o(d){v(r.$$.fragment,d),a=!1},d(d){d&&y(e),j(r),c&&c.d()}}}function Ec(s,e,n){var t;let{part:r}=e,{body:o,button:a}=r,l=(t=a?.meta_data)==null?void 0:t.closed,i=Xs("activated_in_zoom"),c={isAccent:!0,size:"md",iconClassName:"cqi-external-link",disabled:l};function d(){i||Bt("activated_in_zoom","true"),window.open(a.join_url)}const u=()=>d();return s.$$set=p=>{"part"in p&&n(4,r=p.part)},[o,i,c,d,r,u]}class Sc extends S{constructor(e){super(),D(this,e,Ec,Ac,N,{part:4},Ic)}}function Dc(s){O(s,"svelte-12rjzc5",".message-body.svelte-12rjzc5{font-size:14px;line-height:20px;margin-bottom:10px}")}function Mc(s){let e=s[1].text+"",n;return{c(){n=G(e)},m(t,r){k(t,n,r)},p:C,d(t){t&&y(n)}}}function Wc(s){let e,n,t,r,o;const a=[s[2]];let l={$$slots:{default:[Mc]},$$scope:{ctx:s}};for(let i=0;i<a.length;i+=1)l=oe(l,a[i]);return r=new ge({props:l}),r.$on("click",s[5]),{c(){e=x("div"),n=x("div"),n.textContent=`${s[0]}`,t=B(),q(r.$$.fragment),m(n,"class","message-body svelte-12rjzc5")},m(i,c){k(i,e,c),w(e,n),w(e,t),z(r,e,null),o=!0},p(i,[c]){const d=c&4?$e(a,[fe(i[2])]):{};c&512&&(d.$$scope={dirty:c,ctx:i}),r.$set(d)},i(i){o||(f(r.$$.fragment,i),o=!0)},o(i){v(r.$$.fragment,i),o=!1},d(i){i&&y(e),j(r)}}}function Lc(s,e,n){let{part:t}=e,{body:r,button:o}=t,{signature:a,join_url:l,integration_id:i}=o,c={isAccent:!0,size:"md",iconClassName:"cqi-external-link"};function d(){let p=carrotquest.messenger.currentConversation.id;carrotquest.integrations.Calendly.initParentIframe(p).then($);function $(g){carrotquest.integrations.Calendly.initWidgetScript(g).then(function(){carrotquest.integrations.Calendly.initInlineWidget.call(g,l,a,i,p)})}}const u=()=>d();return s.$$set=p=>{"part"in p&&n(4,t=p.part)},[r,o,c,d,t,u]}class Oc extends S{constructor(e){super(),D(this,e,Lc,Wc,N,{part:4},Dc)}}function Uc(s){O(s,"svelte-rx1pdv",".playback-button-wrap.svelte-rx1pdv{margin-right:10px}.progress-bar-wrap.svelte-rx1pdv{margin-right:15px}")}function Pc(s){let e,n,t;return n=new Vn({props:{audioData:s[2]}}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","playback-button-wrap svelte-rx1pdv"),m(e,"slot","buttons")},m(r,o){k(r,e,o),z(n,e,null),t=!0},p(r,o){const a={};o&4&&(a.audioData=r[2]),n.$set(a)},i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function Hc(s){let e,n,t,r,o,a;return n=new Xn({props:{isInAccentUsage:!0,width:"175",progress:s[4],progressBarPath:s[5]}}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","progress-bar-wrap svelte-rx1pdv")},m(l,i){k(l,e,i),z(n,e,null),r=!0,o||(a=en(t=or.call(null,e,{audioEl:s[1]})),o=!0)},p(l,i){const c={};i&16&&(c.progress=l[4]),i&32&&(c.progressBarPath=l[5]),n.$set(c),t&&tn(t.update)&&i&2&&t.update.call(null,{audioEl:l[1]})},i(l){r||(f(n.$$.fragment,l),r=!0)},o(l){v(n.$$.fragment,l),r=!1},d(l){l&&y(e),j(n),o=!1,a()}}}function Fc(s){let e,n,t,r,o,a,l;return r=new Et({props:{isInAccentUsage:!0,timeSeconds:s[3],$$slots:{"progress-bar":[Hc],buttons:[Pc]},$$scope:{ctx:s}}}),{c(){e=x("audio"),t=B(),q(r.$$.fragment),m(e,"class","hidden"),m(e,"preload","none"),Be(e.src,n=s[0])||m(e,"src",n)},m(i,c){k(i,e,c),s[9](e),k(i,t,c),z(r,i,c),o=!0,a||(l=[R(e,"ended",s[7]),R(e,"timeupdate",s[6])],a=!0)},p(i,[c]){(!o||c&1&&!Be(e.src,n=i[0]))&&m(e,"src",n);const d={};c&8&&(d.timeSeconds=i[3]),c&8246&&(d.$$scope={dirty:c,ctx:i}),r.$set(d)},i(i){o||(f(r.$$.fragment,i),o=!0)},o(i){v(r.$$.fragment,i),o=!1},d(i){i&&y(e),s[9](null),i&&y(t),j(r,i),a=!1,Fe(l)}}}function Gc(s,e,n){let t,r,o,a;Z(s,be,_=>n(11,r=_)),Z(s,_e,_=>n(12,o=_)),Z(s,Mt,_=>n(8,a=_));let{audioUrl:l}=e,i,c={},d=0,u,p;function $(){var _,b;n(3,d=Math.ceil(i.currentTime)),n(4,u=yt(i.currentTime,(b=(_=c?.audioBuffer)==null?void 0:_.duration)!=null?b:100))}function g(){n(4,u=100),_e.set(!1)}Re(()=>{n(2,c={src:l,audioEl:i,audioBuffer:null}),p=ct.subscribe(_=>{r&&c?.audioEl===r?.audioEl&&n(4,u=_)})}),tt(()=>{p(),o&&r?.src===c?.src&&sr()});function h(_){re[_?"unshift":"push"](()=>{i=_,n(1,i)})}return s.$$set=_=>{"audioUrl"in _&&n(0,l=_.audioUrl)},s.$$.update=()=>{s.$$.dirty&257&&n(5,t=a[l])},[l,i,c,d,u,t,$,g,a,h]}let Rc=class extends S{constructor(s){super(),D(this,s,Gc,Fc,N,{audioUrl:0},Uc)}};function Vc(s){let e,n;return e=new Rc({props:{audioUrl:s[0].blob_url?s[0].blob_url:s[0].url}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.audioUrl=t[0].blob_url?t[0].blob_url:t[0].url),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Yc(s,e,n){let{attachment:t}=e;return s.$$set=r=>{"attachment"in r&&n(0,t=r.attachment)},[t]}class Jc extends S{constructor(e){super(),D(this,e,Yc,Vc,N,{attachment:0})}}function Zc(s){O(s,"svelte-18mek7m",".bubble.svelte-18mek7m{padding:10px 15px;margin-top:5px;max-width:309px}.bubble.first.svelte-18mek7m{margin-top:0}.bubble.image.svelte-18mek7m{background:none !important;border-width:1px;border-style:solid;padding:0;overflow:hidden}.bubble.image.admin.svelte-18mek7m{border-color:#f2f2f2}.bubble.admin.svelte-18mek7m{background:#f2f2f2;color:#333333}.bubble.single.svelte-18mek7m{border-radius:15px !important}.bubble.admin.svelte-18mek7m{border-radius:5px 15px 15px 5px}.bubble.admin.first.svelte-18mek7m{border-radius:15px 15px 15px 5px}.bubble.admin.last.svelte-18mek7m{border-radius:5px 15px 15px 15px}.bubble.user.svelte-18mek7m{border-radius:15px 5px 5px 15px}.bubble.user.first.svelte-18mek7m{border-radius:15px 15px 5px 15px}.bubble.user.last.svelte-18mek7m{border-radius:15px 5px 15px 15px}.bubble.loading.svelte-18mek7m{opacity:0.5}.dark .bubble.admin{background:#4d4d4d;color:#fff}.bubble.admin a{color:#333333}.bubble.admin a:hover{text-decoration:none}.bubble.user a{color:#ffffff}.bubble.user a:hover{text-decoration:none}")}function Kc(s){let e,n;return e=new Sc({props:{part:s[0]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.part=t[0]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Xc(s){let e,n;return e=new Oc({props:{part:s[0]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.part=t[0]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Qc(s){let e,n;return e=new Tc({props:{part:s[0]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.part=t[0]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function ed(s){let e,n;return e=new yc({props:{article:s[0].article}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.article=t[0].article),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function td(s){let e,n;return e=new gc({props:{attachment:s[0].attachments[0],addresseeType:s[1]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.attachment=t[0].attachments[0]),r&2&&(o.addresseeType=t[1]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function nd(s){let e,n;return e=new bc({props:{attachment:s[0].attachments[0]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.attachment=t[0].attachments[0]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function rd(s){let e,n;return e=new Jc({props:{attachment:s[0].attachments[0]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.attachment=t[0].attachments[0]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function sd(s){let e,n;return e=new ec({props:{action:s[0].action,body:s[0].body,id:s[0].id}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.action=t[0].action),r&1&&(o.body=t[0].body),r&1&&(o.id=t[0].id),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function od(s){let e,n;return e=new ic({props:{body:s[0].body,id:s[0].id}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.body=t[0].body),r&1&&(o.id=t[0].id),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function ad(s){let e,n;return e=new uc({}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function ld(s){let e,n,t,r,o,a,l;const i=[ad,od,sd,rd,nd,td,ed,Qc,Xc,Kc],c=[];function d(u,p){return u[0].removed?0:u[0].componentType==="text"?1:u[0].componentType==="button_link"?2:u[0].componentType==="audio"?3:u[0].componentType==="image"?4:u[0].componentType==="document"?5:u[0].componentType==="article"?6:u[0].componentType==="auto_reply"?7:u[0].componentType==="calendly"?8:u[0].componentType==="zoom"?9:-1}return~(n=d(s))&&(t=c[n]=i[n](s)),{c(){e=x("div"),t&&t.c(),m(e,"class",r="bubble "+s[1]+" "+(s[1]==="user"?"bc_a color_c":"")+" "+(s[0].componentType==="image"?"image":"")+" svelte-18mek7m"),m(e,"data-type",o=s[0].partType),Y(e,"border_a-o50",s[0].componentType==="image"&&s[1]==="user"),Y(e,"loading",s[2]),Y(e,"single",s[3]),Y(e,"first",s[4]),Y(e,"last",s[5])},m(u,p){k(u,e,p),~n&&c[n].m(e,null),l=!0},p(u,[p]){let $=n;n=d(u),n===$?~n&&c[n].p(u,p):(t&&(U(),v(c[$],1,1,()=>{c[$]=null}),P()),~n?(t=c[n],t?t.p(u,p):(t=c[n]=i[n](u),t.c()),f(t,1),t.m(e,null)):t=null),(!l||p&3&&r!==(r="bubble "+u[1]+" "+(u[1]==="user"?"bc_a color_c":"")+" "+(u[0].componentType==="image"?"image":"")+" svelte-18mek7m"))&&m(e,"class",r),(!l||p&1&&o!==(o=u[0].partType))&&m(e,"data-type",o),(!l||p&3)&&Y(e,"border_a-o50",u[0].componentType==="image"&&u[1]==="user"),(!l||p&7)&&Y(e,"loading",u[2]),(!l||p&11)&&Y(e,"single",u[3]),(!l||p&19)&&Y(e,"first",u[4]),(!l||p&35)&&Y(e,"last",u[5])},i(u){l||(f(t),a||ne(()=>{a=me(e,s[6],{}),a.start()}),l=!0)},o(u){v(t),l=!1},d(u){u&&y(e),~n&&c[n].d()}}}function id(s,e,n){let{part:t}=e,{addresseeType:r}=e,{loading:o}=e,{singleInGroup:a}=e,{firstInGroup:l}=e,{lastInGroup:i}=e,c=d=>{if(o)return Me(d,{y:10})};return s.$$set=d=>{"part"in d&&n(0,t=d.part),"addresseeType"in d&&n(1,r=d.addresseeType),"loading"in d&&n(2,o=d.loading),"singleInGroup"in d&&n(3,a=d.singleInGroup),"firstInGroup"in d&&n(4,l=d.firstInGroup),"lastInGroup"in d&&n(5,i=d.lastInGroup)},[t,r,o,a,l,i,c]}class cd extends S{constructor(e){super(),D(this,e,id,ld,N,{part:0,addresseeType:1,loading:2,singleInGroup:3,firstInGroup:4,lastInGroup:5},Zc)}}function fr(s){let e;return{c(){e=x("span"),e.textContent=`${carrotquest.i18n.edited_short}`,m(e,"class","message-time_edited")},m(n,t){k(n,e,t)},p:C,d(n){n&&y(e)}}}function dd(s){let e,n,t,r,o=s[0]&&fr();return{c(){e=x("div"),o&&o.c(),n=B(),t=x("span"),r=G(s[1])},m(a,l){k(a,e,l),o&&o.m(e,null),w(e,n),w(e,t),w(t,r)},p(a,[l]){a[0]?o?o.p(a,l):(o=fr(),o.c(),o.m(e,n)):o&&(o.d(1),o=null),l&2&&Q(r,a[1])},i:C,o:C,d(a){a&&y(e),o&&o.d()}}}function ud(s,e,n){let t,{created:r}=e,{edited:o}=e;return s.$$set=a=>{"created"in a&&n(2,r=a.created),"edited"in a&&n(0,o=a.edited)},s.$$.update=()=>{s.$$.dirty&5&&n(1,t=Is(o||r))},[o,t,r]}class pd extends S{constructor(e){super(),D(this,e,ud,dd,N,{created:2,edited:0})}}function fd(s){O(s,"svelte-ff6qjz",".message-status.svelte-ff6qjz{color:#999999;font-size:12px}")}function md(s){let e,n;return e=new pd({props:{created:s[1],edited:s[2]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.created=t[1]),r&4&&(o.edited=t[2]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function gd(s){let e,n;return e=new Wo({}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function vd(s){let e,n,t,r;const o=[gd,md],a=[];function l(i,c){return i[0]?0:i[1]?1:-1}return~(n=l(s))&&(t=a[n]=o[n](s)),{c(){e=x("div"),t&&t.c(),m(e,"class","message-status svelte-ff6qjz")},m(i,c){k(i,e,c),~n&&a[n].m(e,null),r=!0},p(i,[c]){let d=n;n=l(i),n===d?~n&&a[n].p(i,c):(t&&(U(),v(a[d],1,1,()=>{a[d]=null}),P()),~n?(t=a[n],t?t.p(i,c):(t=a[n]=o[n](i),t.c()),f(t,1),t.m(e,null)):t=null)},i(i){r||(f(t),r=!0)},o(i){v(t),r=!1},d(i){i&&y(e),~n&&a[n].d()}}}function $d(s,e,n){let{loading:t}=e,{created:r}=e,{edited:o}=e;return s.$$set=a=>{"loading"in a&&n(0,t=a.loading),"created"in a&&n(1,r=a.created),"edited"in a&&n(2,o=a.edited)},[t,r,o]}class hd extends S{constructor(e){super(),D(this,e,$d,vd,N,{loading:0,created:1,edited:2},fd)}}function xd(s){O(s,"svelte-dgpjwc",".opened-wrap-warning{top:1px}.container.svelte-dgpjwc{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;padding:0;position:relative}.container.svelte-dgpjwc #carrotquest-messenger-initialmsg{margin:0}.embedded-screen .container.svelte-dgpjwc{width:100%;max-width:600px;margin:0 auto}.message-typing.svelte-dgpjwc{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.conversation.svelte-dgpjwc{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;width:100%;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding:5px 10px 40px 10px;overflow-x:hidden}.sticky-avatar.svelte-dgpjwc{position:sticky;bottom:0;margin-right:10px}.part-group.svelte-dgpjwc{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;margin-top:15px}.part-group.user.svelte-dgpjwc{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.part.svelte-dgpjwc{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;gap:10px}.part.user.svelte-dgpjwc{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.message-status.svelte-dgpjwc{-ms-flex-negative:0;flex-shrink:0}")}function mr(s,e,n){const t=s.slice();return t[30]=e[n],t}function gr(s,e,n){const t=s.slice();return t[33]=e[n],t}function vr(s,e,n){const t=s.slice();return t[36]=e[n],t[38]=n,t}function $r(s,e,n){const t=s.slice();return t[39]=e[n],t}function hr(s){let e,n;return e=new st({props:{class:"opened-wrap-warning",type:"warning",$$slots:{default:[bd]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r[1]&2048&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function bd(s){let e=carrotquest.i18n.errorReplyTooBig+"",n;return{c(){n=G(e)},m(t,r){k(t,n,r)},p:C,d(t){t&&y(n)}}}function xr(s){let e,n;return e=new st({props:{class:"opened-wrap-warning",type:"warning",$$slots:{default:[wd]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r[0]&32|r[1]&2048&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function wd(s){let e;return{c(){e=G(s[5])},m(n,t){k(n,e,t)},p(n,t){t[0]&32&&Q(e,n[5])},d(n){n&&y(e)}}}function br(s){let e,n;return e=new st({props:{class:"opened-wrap-warning",type:"warning",$$slots:{default:[kd]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r[0]&64|r[1]&2048&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function kd(s){let e;return{c(){e=G(s[6])},m(n,t){k(n,e,t)},p(n,t){t[0]&64&&Q(e,n[6])},d(n){n&&y(e)}}}function wr(s){let e,n;return e=new st({props:{class:"opened-wrap-warning",type:"secondary",$$slots:{default:[yd]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r[0]&16|r[1]&2048&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function yd(s){let e,n;return{c(){e=new Je(!1),n=ae(),e.a=n},m(t,r){e.m(s[4],t,r),k(t,n,r)},p(t,r){r[0]&16&&e.p(t[4])},d(t){t&&y(n),t&&e.d()}}}function kr(s){let e,n,t,r,o;function a(i){s[25](i)}let l={dialogElement:s[10]};return s[8]!==void 0&&(l.counterAtScrollButtonVisible=s[8]),n=new Ti({props:l}),re.push(()=>Te(n,"counterAtScrollButtonVisible",a)),{c(){e=x("div"),q(n.$$.fragment)},m(i,c){k(i,e,c),z(n,e,null),o=!0},p(i,c){const d={};c[0]&1024&&(d.dialogElement=i[10]),!t&&c[0]&256&&(t=!0,d.counterAtScrollButtonVisible=i[8],Ie(()=>t=!1)),n.$set(d)},i(i){o||(f(n.$$.fragment,i),ne(()=>{o&&(r||(r=pe(e,ie,{},!0)),r.run(1))}),o=!0)},o(i){v(n.$$.fragment,i),r||(r=pe(e,ie,{},!1)),r.run(0),o=!1},d(i){i&&y(e),j(n),i&&r&&r.end()}}}function yr(s,e){let n,t,r,o,a,l,i;return r=new ft({props:{size:"lg",src:e[39].admin.avatar}}),a=new ii({}),{key:s,first:null,c(){n=x("div"),t=x("div"),q(r.$$.fragment),o=B(),q(a.$$.fragment),m(t,"class","margin-right-5"),m(n,"class","message-typing part-group svelte-dgpjwc"),this.first=n},m(c,d){k(c,n,d),w(n,t),z(r,t,null),w(n,o),z(a,n,null),i=!0},p(c,d){e=c;const u={};d[0]&8192&&(u.src=e[39].admin.avatar),r.$set(u)},i(c){i||(f(r.$$.fragment,c),f(a.$$.fragment,c),l||ne(()=>{l=me(n,Me,{y:10}),l.start()}),i=!0)},o(c){v(r.$$.fragment,c),v(a.$$.fragment,c),i=!1},d(c){c&&y(n),j(r),j(a)}}}function _r(s){let e,n,t,r=[],o=new Map,a,l,i=s[33][0].addresseeType==="admin"&&s[33][0].componentType!=="popup"&&s[33][0].componentType!=="vote"&&s[33][0].componentType!=="chatbot_buttons"&&qr(s),c=s[33];const d=u=>u[36].id;for(let u=0;u<c.length;u+=1){let p=vr(s,c,u),$=d(p);o.set($,r[u]=jr($,p))}return{c(){e=x("div"),i&&i.c(),n=B(),t=x("div");for(let u=0;u<r.length;u+=1)r[u].c();m(e,"class",a="part-group "+s[33][0].addresseeType+" svelte-dgpjwc")},m(u,p){k(u,e,p),i&&i.m(e,null),w(e,n),w(e,t);for(let $=0;$<r.length;$+=1)r[$]&&r[$].m(t,null);l=!0},p(u,p){u[33][0].addresseeType==="admin"&&u[33][0].componentType!=="popup"&&u[33][0].componentType!=="vote"&&u[33][0].componentType!=="chatbot_buttons"?i?(i.p(u,p),p[0]&16384&&f(i,1)):(i=qr(u),i.c(),f(i,1),i.m(e,n)):i&&(U(),v(i,1,1,()=>{i=null}),P()),p[0]&147456&&(c=u[33],U(),r=Ze(r,p,d,1,u,c,o,t,Ke,jr,null,vr),P()),(!l||p[0]&16384&&a!==(a="part-group "+u[33][0].addresseeType+" svelte-dgpjwc"))&&m(e,"class",a)},i(u){if(!l){f(i);for(let p=0;p<c.length;p+=1)f(r[p]);l=!0}},o(u){v(i);for(let p=0;p<r.length;p+=1)v(r[p]);l=!1},d(u){u&&y(e),i&&i.d();for(let p=0;p<r.length;p+=1)r[p].d()}}}function qr(s){let e,n,t;return n=new ft({props:{size:"lg",src:ce.getContrastDefaultAvatar(s[33][0].from.avatar)}}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","sticky-avatar svelte-dgpjwc")},m(r,o){k(r,e,o),z(n,e,null),t=!0},p(r,o){const a={};o[0]&16384&&(a.src=ce.getContrastDefaultAvatar(r[33][0].from.avatar)),n.$set(a)},i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function _d(s){let e,n,t,r,o,a;const l=[Td,Cd],i=[];function c(u,p){return u[36].isSingleEmoji&&!u[36].removed?0:1}n=c(s),t=i[n]=l[n](s);let d=(s[36].edited||s[33].length===1||s[38]===s[33].length-1)&&zr(s);return{c(){e=x("div"),t.c(),r=B(),d&&d.c(),m(e,"class",o="part "+s[36].addresseeType+" svelte-dgpjwc")},m(u,p){k(u,e,p),i[n].m(e,null),w(e,r),d&&d.m(e,null),a=!0},p(u,p){let $=n;n=c(u),n===$?i[n].p(u,p):(U(),v(i[$],1,1,()=>{i[$]=null}),P(),t=i[n],t?t.p(u,p):(t=i[n]=l[n](u),t.c()),f(t,1),t.m(e,r)),u[36].edited||u[33].length===1||u[38]===u[33].length-1?d?(d.p(u,p),p[0]&16384&&f(d,1)):(d=zr(u),d.c(),f(d,1),d.m(e,null)):d&&(U(),v(d,1,1,()=>{d=null}),P()),(!a||p[0]&16384&&o!==(o="part "+u[36].addresseeType+" svelte-dgpjwc"))&&m(e,"class",o)},i(u){a||(f(t),f(d),a=!0)},o(u){v(t),v(d),a=!1},d(u){u&&y(e),i[n].d(),d&&d.d()}}}function qd(s){let e,n;return e=new ya({props:{part:s[36],actions:s[36].chatBot.actions,chatBotId:s[36].chatBot.chatBotId,firstWelcomeBotMessage:s[36].chatBot.firstWelcomeBotMessage,partId:s[36].id,setWelcomeBotAsPartOfDialog:s[17]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r[0]&16384&&(o.part=t[36]),r[0]&16384&&(o.actions=t[36].chatBot.actions),r[0]&16384&&(o.chatBotId=t[36].chatBot.chatBotId),r[0]&16384&&(o.firstWelcomeBotMessage=t[36].chatBot.firstWelcomeBotMessage),r[0]&16384&&(o.partId=t[36].id),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function zd(s){let e,n;return e=new Ka({props:{part:s[36]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r[0]&16384&&(o.part=t[36]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function jd(s){let e,n;return e=new Va({props:{part:s[36]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r[0]&16384&&(o.part=t[36]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Cd(s){let e,n;return e=new cd({props:{part:s[36],addresseeType:s[36].addresseeType,loading:s[36].loading,singleInGroup:s[33].length===1,firstInGroup:s[38]===0,lastInGroup:s[38]===s[33].length-1}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r[0]&16384&&(o.part=t[36]),r[0]&16384&&(o.addresseeType=t[36].addresseeType),r[0]&16384&&(o.loading=t[36].loading),r[0]&16384&&(o.singleInGroup=t[33].length===1),r[0]&16384&&(o.firstInGroup=t[38]===0),r[0]&16384&&(o.lastInGroup=t[38]===t[33].length-1),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Td(s){let e,n;return e=new Ji({props:{body:s[36].body,loading:s[36].loading,firstInGroup:s[38]===0}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r[0]&16384&&(o.body=t[36].body),r[0]&16384&&(o.loading=t[36].loading),r[0]&16384&&(o.firstInGroup=t[38]===0),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function zr(s){let e,n,t;return n=new hd({props:{created:s[36].created,edited:s[36].edited,loading:s[36].loading}}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","message-status svelte-dgpjwc")},m(r,o){k(r,e,o),z(n,e,null),t=!0},p(r,o){const a={};o[0]&16384&&(a.created=r[36].created),o[0]&16384&&(a.edited=r[36].edited),o[0]&16384&&(a.loading=r[36].loading),n.$set(a)},i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function jr(s,e){let n,t,r,o,a;const l=[jd,zd,qd,_d],i=[];function c(d,u){return d[36].componentType==="popup"?0:d[36].componentType==="vote"?1:d[36].componentType==="chatbot_buttons"?2:3}return t=c(e),r=i[t]=l[t](e),{key:s,first:null,c(){n=ae(),r.c(),o=ae(),this.first=n},m(d,u){k(d,n,u),i[t].m(d,u),k(d,o,u),a=!0},p(d,u){e=d;let p=t;t=c(e),t===p?i[t].p(e,u):(U(),v(i[p],1,1,()=>{i[p]=null}),P(),r=i[t],r?r.p(e,u):(r=i[t]=l[t](e),r.c()),f(r,1),r.m(o.parentNode,o))},i(d){a||(f(r),a=!0)},o(d){v(r),a=!1},d(d){d&&y(n),i[t].d(d),d&&y(o)}}}function Cr(s){let e,n,t=s[33][0].componentType!=="chatbot_field"&&_r(s);return{c(){t&&t.c(),e=ae()},m(r,o){t&&t.m(r,o),k(r,e,o),n=!0},p(r,o){r[33][0].componentType!=="chatbot_field"?t?(t.p(r,o),o[0]&16384&&f(t,1)):(t=_r(r),t.c(),f(t,1),t.m(e.parentNode,e)):t&&(U(),v(t,1,1,()=>{t=null}),P())},i(r){n||(f(t),n=!0)},o(r){v(t),n=!1},d(r){t&&t.d(r),r&&y(e)}}}function Tr(s){let e,n,t,r=s[30],o=[];for(let l=0;l<r.length;l+=1)o[l]=Cr(gr(s,r,l));const a=l=>v(o[l],1,1,()=>{o[l]=null});return n=new qi({props:{date:s[30][0][0].created}}),{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=B(),q(n.$$.fragment)},m(l,i){for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(l,i);k(l,e,i),z(n,l,i),t=!0},p(l,i){if(i[0]&147456){r=l[30];let d;for(d=0;d<r.length;d+=1){const u=gr(l,r,d);o[d]?(o[d].p(u,i),f(o[d],1)):(o[d]=Cr(u),o[d].c(),f(o[d],1),o[d].m(e.parentNode,e))}for(U(),d=r.length;d<o.length;d+=1)a(d);P()}const c={};i[0]&16384&&(c.date=l[30][0][0].created),n.$set(c)},i(l){if(!t){for(let i=0;i<r.length;i+=1)f(o[i]);f(n.$$.fragment,l),t=!0}},o(l){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)v(o[i]);v(n.$$.fragment,l),t=!1},d(l){Ee(o,l),l&&y(e),j(n,l)}}}function Id(s){let e,n;return e=new oi({props:{dialogElement:s[10]}}),e.$on("passFileInputWarning",s[19]),e.$on("passMessageLengthWarning",s[18]),e.$on("passUserDataProcessingToast",s[21]),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r[0]&1024&&(o.dialogElement=t[10]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Bd(s){let e,n;return e=new Gi({}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Nd(s){let e,n;return e=new Wi({}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Ad(s){var e,n,t;let r,o;return r=new Ha({props:{partCreated:s[12][0].created,partId:s[12][0].id,replyType:s[12][0].chatBot.replyType,chatBotId:s[12][0].chatBot.chatBotId,firstWelcomeBotMessage:s[12][0].chatBot.firstWelcomeBotMessage,actionId:(t=(n=(e=s[12][0].chatBot)==null?void 0:e.actions)==null?void 0:n[0])==null?void 0:t.id,setWelcomeBotAsPartOfDialog:s[17]}}),r.$on("passBotAnswerFieldWarning",s[20]),r.$on("passUserDataProcessingToast",s[21]),{c(){q(r.$$.fragment)},m(a,l){z(r,a,l),o=!0},p(a,l){var i,c,d;const u={};l[0]&4096&&(u.partCreated=a[12][0].created),l[0]&4096&&(u.partId=a[12][0].id),l[0]&4096&&(u.replyType=a[12][0].chatBot.replyType),l[0]&4096&&(u.chatBotId=a[12][0].chatBot.chatBotId),l[0]&4096&&(u.firstWelcomeBotMessage=a[12][0].chatBot.firstWelcomeBotMessage),l[0]&4096&&(u.actionId=(d=(c=(i=a[12][0].chatBot)==null?void 0:i.actions)==null?void 0:c[0])==null?void 0:d.id),r.$set(u)},i(a){o||(f(r.$$.fragment,a),o=!0)},o(a){v(r.$$.fragment,a),o=!1},d(a){j(r,a)}}}function Ed(s){let e,n,t,r,o,a,l,i,c,d=[],u=new Map,p,$,g,h,_,b,T,A=s[0]&&hr(s),H=s[1]&&xr(s),E=s[2]&&br(s),M=s[3]&&!s[11]&&wr(s),L=s[7]&&kr(s);i=new wi({});let F=s[13];const te=W=>W[39].admin.id;for(let W=0;W<F.length;W+=1){let I=$r(s,F,W),J=te(I);u.set(J,d[W]=yr(J,I))}let ue=s[14],V=[];for(let W=0;W<ue.length;W+=1)V[W]=Tr(mr(s,ue,W));const Ae=W=>v(V[W],1,1,()=>{V[W]=null}),we=[Ad,Nd,Bd,Id],X=[];function ke(W,I){var J;return((J=W[12][0])==null?void 0:J.componentType)==="chatbot_field"?0:W[15]?1:W[16]?2:W[9]?3:-1}return~(g=ke(s))&&(h=X[g]=we[g](s)),{c(){e=x("div"),A&&A.c(),n=B(),H&&H.c(),t=B(),E&&E.c(),r=B(),M&&M.c(),o=B(),a=x("div"),L&&L.c(),l=B(),q(i.$$.fragment),c=B();for(let W=0;W<d.length;W+=1)d[W].c();p=B();for(let W=0;W<V.length;W+=1)V[W].c();$=B(),h&&h.c(),m(a,"class","conversation scroll-a svelte-dgpjwc"),m(e,"class","container svelte-dgpjwc")},m(W,I){k(W,e,I),A&&A.m(e,null),w(e,n),H&&H.m(e,null),w(e,t),E&&E.m(e,null),w(e,r),M&&M.m(e,null),w(e,o),w(e,a),L&&L.m(a,null),w(a,l),z(i,a,null),w(a,c);for(let J=0;J<d.length;J+=1)d[J]&&d[J].m(a,null);w(a,p);for(let J=0;J<V.length;J+=1)V[J]&&V[J].m(a,null);s[26](a),w(e,$),~g&&X[g].m(e,null),_=!0,b||(T=R(a,"scroll",s[27]),b=!0)},p(W,I){if(W[0]?A?(A.p(W,I),I[0]&1&&f(A,1)):(A=hr(W),A.c(),f(A,1),A.m(e,n)):A&&(U(),v(A,1,1,()=>{A=null}),P()),W[1]?H?(H.p(W,I),I[0]&2&&f(H,1)):(H=xr(W),H.c(),f(H,1),H.m(e,t)):H&&(U(),v(H,1,1,()=>{H=null}),P()),W[2]?E?(E.p(W,I),I[0]&4&&f(E,1)):(E=br(W),E.c(),f(E,1),E.m(e,r)):E&&(U(),v(E,1,1,()=>{E=null}),P()),W[3]&&!W[11]?M?(M.p(W,I),I[0]&2056&&f(M,1)):(M=wr(W),M.c(),f(M,1),M.m(e,o)):M&&(U(),v(M,1,1,()=>{M=null}),P()),W[7]?L?(L.p(W,I),I[0]&128&&f(L,1)):(L=kr(W),L.c(),f(L,1),L.m(a,l)):L&&(U(),v(L,1,1,()=>{L=null}),P()),I[0]&8192&&(F=W[13],U(),d=Ze(d,I,te,1,W,F,u,a,Ke,yr,p,$r),P()),I[0]&147456){ue=W[14];let ee;for(ee=0;ee<ue.length;ee+=1){const ve=mr(W,ue,ee);V[ee]?(V[ee].p(ve,I),f(V[ee],1)):(V[ee]=Tr(ve),V[ee].c(),f(V[ee],1),V[ee].m(a,null))}for(U(),ee=ue.length;ee<V.length;ee+=1)Ae(ee);P()}let J=g;g=ke(W),g===J?~g&&X[g].p(W,I):(h&&(U(),v(X[J],1,1,()=>{X[J]=null}),P()),~g?(h=X[g],h?h.p(W,I):(h=X[g]=we[g](W),h.c()),f(h,1),h.m(e,null)):h=null)},i(W){if(!_){f(A),f(H),f(E),f(M),f(L),f(i.$$.fragment,W);for(let I=0;I<F.length;I+=1)f(d[I]);for(let I=0;I<ue.length;I+=1)f(V[I]);f(h),_=!0}},o(W){v(A),v(H),v(E),v(M),v(L),v(i.$$.fragment,W);for(let I=0;I<d.length;I+=1)v(d[I]);V=V.filter(Boolean);for(let I=0;I<V.length;I+=1)v(V[I]);v(h),_=!1},d(W){W&&y(e),A&&A.d(),H&&H.d(),E&&E.d(),M&&M.d(),L&&L.d(),j(i);for(let I=0;I<d.length;I+=1)d[I].d();Ee(V,W),s[26](null),~g&&X[g].d(),b=!1,T()}}}function Sd(s,e,n){let t,r,o,a,l,i;Z(s,K,I=>n(12,r=I)),Z(s,It,I=>n(13,o=I)),Z(s,Bs,I=>n(14,a=I)),Z(s,Ge,I=>n(15,l=I)),Z(s,Qe,I=>n(16,i=I));let{conversation:c}=e,d=!1,u=!1,p=!1,$=!1,g,h,_,b=!1,T=!1,A=!1,H=!(Qs(c)&&c.reply_type==="no"),E=!1,M;window.addMessages=(I,J=!1)=>{var ee,ve;for(let ye=0;ye<I.length;ye++){let Ht=I[ye],Ft=I[ye].body;Ft&&J&&(I[ye].body=so(Ft)),eo(Ht.type)&&an("bot_reply",us({},Ht))}K.removeWelcomeMessage(),b||Le(K,r=r.filter(ye=>!ye.firstWelcomeBotMessage),r);for(let ye=0;ye<I.length;ye++)K.addOrUpdate(I[ye]);J||It.remove((ve=(ee=I[I.length-1])==null?void 0:ee.from)==null?void 0:ve.id),ua(M,J),n(8,A=!1),!J&&setTimeout(()=>{n(8,A=!0)})},window.showTextfield=()=>{n(9,H=!0)};function L(){b=!0}function F(I){n(0,d=I.detail.visible)}function te(I){n(1,u=I.detail.visible),n(5,h=I.detail.warning)}function ue(I){n(2,p=I.detail.visible),n(6,_=I.detail.warning)}function V(I){n(3,$=I.detail.visible),n(4,g=I.detail.text)}function Ae(I){n(7,T=Math.abs(I.target.scrollTop)>vt),n(8,A=Math.abs(I.target.scrollTop)>vt?A:!1),n(8,A=Math.abs(I.target.scrollTop)>vt?A:!1)}function we(){return He(this,null,function*(){E||K.hasMore()&&(M.scrollHeight-(Math.abs(M.scrollTop)+M.clientHeight)>50||(E=!0,yield K.loadMore(),E=!1))})}tt(()=>{K.reset(),It.removeAll()});function X(I){A=I,n(8,A)}function ke(I){re[I?"unshift":"push"](()=>{M=I,n(10,M)})}const W=I=>{Ae(I),we()};return s.$$set=I=>{"conversation"in I&&n(24,c=I.conversation)},s.$$.update=()=>{s.$$.dirty[0]&7&&n(11,t=d||u||p)},[d,u,p,$,g,h,_,T,A,H,M,t,r,o,a,l,i,L,F,te,ue,V,Ae,we,c,X,ke,W]}let Dd=class extends S{constructor(s){super(),D(this,s,Sd,Ed,N,{conversation:24},xd,[-1,-1])}};function Md(s){O(s,"svelte-1vrtgwb",".grid-cell.svelte-1vrtgwb{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;grid-row:1;grid-column:1}.loader.svelte-1vrtgwb{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}")}function Wd(s){let e,n;return e=new rt({props:{slot:"right"}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Ld(s){let e,n,t,r,o,a,l,i;return n=new mt({props:{$$slots:{right:[Wd]},$$scope:{ctx:s}}}),o=new So({}),{c(){e=x("div"),q(n.$$.fragment),t=B(),r=x("div"),q(o.$$.fragment),m(r,"class","loader svelte-1vrtgwb"),m(e,"class","grid-cell svelte-1vrtgwb")},m(c,d){k(c,e,d),z(n,e,null),w(e,t),w(e,r),z(o,r,null),i=!0},p(c,[d]){const u={};d&1&&(u.$$scope={dirty:d,ctx:c}),n.$set(u)},i(c){i||(f(n.$$.fragment,c),f(o.$$.fragment,c),ne(()=>{i&&(l&&l.end(1),a=me(e,ie,{duration:250,delay:300}),a.start())}),i=!0)},o(c){v(n.$$.fragment,c),v(o.$$.fragment,c),a&&a.invalidate(),l=he(e,ie,{duration:250}),i=!1},d(c){c&&y(e),j(n),j(o),c&&l&&l.end()}}}let Ir=class extends S{constructor(s){super(),D(this,s,null,Ld,N,{},Md)}};function Od(s){return{c:C,m:C,p:C,i:C,o:C,d:C}}function Ud(s){let e,n;return e=new At({props:{$$slots:{header:[Hd],default:[Pd]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&133&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Pd(s){let e,n;return e=new Dd({props:{conversation:s[0]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.conversation=t[0]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Br(s){let e,n;return e=new da({props:{conversation:s[0]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.conversation=t[0]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Hd(s){let e,n,t=s[2]&&Br(s);return{c(){t&&t.c(),e=ae()},m(r,o){t&&t.m(r,o),k(r,e,o),n=!0},p(r,o){r[2]?t?(t.p(r,o),o&4&&f(t,1)):(t=Br(r),t.c(),f(t,1),t.m(e.parentNode,e)):t&&(U(),v(t,1,1,()=>{t=null}),P())},i(r){n||(f(t),n=!0)},o(r){v(t),n=!1},d(r){t&&t.d(r),r&&y(e)}}}function Fd(s){let e,n;return e=new Ir({}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Gd(s){let e,n,t,r={ctx:s,current:null,token:null,hasCatch:!1,pending:Fd,then:Ud,catch:Od,value:6,blocks:[,,,]};return dt(n=s[1],r),{c(){e=ae(),r.block.c()},m(o,a){k(o,e,a),r.block.m(o,r.anchor=a),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(o,[a]){s=o,r.ctx=s,a&2&&n!==(n=s[1])&&dt(n,r)||Tt(r,s,a)},i(o){t||(f(r.block),t=!0)},o(o){for(let a=0;a<3;a+=1){const l=r.blocks[a];v(l)}t=!1},d(o){o&&y(e),r.block.d(o),r.token=null,r=null}}}function Rd(s,e,n){let t,r;Z(s,K,c=>n(5,r=c));let{state:o}=e,{conversation:a}=e,{parts:l}=e,i;return o==="newConversation"?i=ce.startNewConversation().then(c=>{n(0,{conversation:a,parts:l}=c,a,n(3,l)),K.setCurrentConversation(a),K.setCurrentMeta({next_after:carrotquest.messenger.afterConversationPart}),Le(K,r=Ve(a,l),r)}):o==="openConversation"?i=ce.openConversation(a).then(c=>{n(0,{conversation:a,parts:l}=c,a,n(3,l)),K.setCurrentConversation(a),K.setCurrentMeta({next_after:carrotquest.messenger.afterConversationPart}),Le(K,r=Ve(a,l),r)}):o==="openConversationFromNotification"?i=ce.openConversationFromNotification(a,l).then(c=>{n(0,{conversation:a,parts:l}=c,a,n(3,l)),K.setCurrentConversation(a),K.setCurrentMeta({next_after:carrotquest.messenger.afterConversationPart}),Le(K,r=Ve(a,l),r)}):o==="openConversationWithWebinarBot"?i=ce.openConversationWithWebinarBot(a,l).then(c=>{n(0,{conversation:a,parts:l}=c,a,n(3,l)),K.setCurrentConversation(a),K.setCurrentMeta({next_after:carrotquest.messenger.afterConversationPart}),Le(K,r=Ve(a,l),r)}):o==="newConversationWithEmbeddedScreen"?i=ce.startNewConversation(a,l).then(c=>{n(0,{conversation:a,parts:l}=c,a,n(3,l)),K.setCurrentConversation(a),K.setCurrentMeta({next_after:carrotquest.messenger.afterConversationPart}),Le(K,r=Ve(a,l),r)}):o==="openConversationWithEmbeddedScreen"&&(i=ce.openConversationWithWebinarBot(a,l).then(c=>{n(0,{conversation:a,parts:l}=c,a,n(3,l)),K.setCurrentConversation(a),K.setCurrentMeta({next_after:carrotquest.messenger.afterConversationPart}),Le(K,r=Ve(a,l),r)})),s.$$set=c=>{"state"in c&&n(4,o=c.state),"conversation"in c&&n(0,a=c.conversation),"parts"in c&&n(3,l=c.parts)},s.$$.update=()=>{s.$$.dirty&16&&n(2,t=o!=="openConversationWithEmbeddedScreen"&&o!=="newConversationWithEmbeddedScreen")},[a,i,t,l,o]}class Vd extends S{constructor(e){super(),D(this,e,Rd,Gd,N,{state:4,conversation:0,parts:3})}}function Yd(s){let e,n;return e=new hn({props:{accent:!1,icon:"cqi-"+s[0],text:nn(s[0])}}),e.$on("click",s[1]),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.icon="cqi-"+t[0]),r&1&&(o.text=nn(t[0])),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Jd(s,e,n){let{socialNetwork:t}=e;function r(o){le.call(this,s,o)}return s.$$set=o=>{"socialNetwork"in o&&n(0,t=o.socialNetwork)},[t,r]}class Zd extends S{constructor(e){super(),D(this,e,Jd,Yd,N,{socialNetwork:0})}}function Kd(s){O(s,"svelte-qk11o",'@charset "UTF-8";.container.svelte-qk11o{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:7px;border:1px solid #e6e6e6;border-radius:15px}img.svelte-qk11o{-ms-flex-negative:0;flex-shrink:0;width:105px;margin-right:15px;border-radius:6px}.description.svelte-qk11o{font-size:12px;font-weight:bold}.dark-theme .container.svelte-qk11o{border-color:#595959}')}function Xd(s){let e,n,t,r,o;return{c(){e=x("div"),n=x("img"),r=B(),o=x("div"),Be(n.src,t=s[1])||m(n,"src",t),m(n,"class","svelte-qk11o"),m(o,"class","description svelte-qk11o"),m(e,"class","container svelte-qk11o")},m(a,l){k(a,e,l),w(e,n),w(e,r),w(e,o),o.innerHTML=s[0]},p(a,[l]){l&2&&!Be(n.src,t=a[1])&&m(n,"src",t),l&1&&(o.innerHTML=a[0])},i:C,o:C,d(a){a&&y(e)}}}function Qd(s,e,n){let t,r,{socialNetwork:o}=e;return s.$$set=a=>{"socialNetwork"in a&&n(2,o=a.socialNetwork)},s.$$.update=()=>{s.$$.dirty&4&&n(1,t=Ns(o)),s.$$.dirty&4&&n(0,r=As(o))},[r,t,o]}class eu extends S{constructor(e){super(),D(this,e,Qd,Xd,N,{socialNetwork:2},Kd)}}function tu(s){const e=ut(s);return carrotquest.i18n.social_network_page_open_button.replace("{{networkName}}",e)}function nu(s){const e=Es(s);window.open(e,"_target")}function ru(s){let e;return{c(){e=G(s[1])},m(n,t){k(n,e,t)},p(n,t){t&2&&Q(e,n[1])},d(n){n&&y(e)}}}function su(s){let e,n;return e=new ge({props:{fullWidth:!0,iconClassName:"cqi-"+s[0],$$slots:{default:[ru]},$$scope:{ctx:s}}}),e.$on("click",s[2]),e.$on("click",s[3]),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.iconClassName="cqi-"+t[0]),r&18&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function ou(s,e,n){let t,{socialNetwork:r}=e;function o(l){le.call(this,s,l)}const a=()=>nu(r);return s.$$set=l=>{"socialNetwork"in l&&n(0,r=l.socialNetwork)},s.$$.update=()=>{s.$$.dirty&1&&n(1,t=tu(r))},[r,t,o,a]}let au=class extends S{constructor(s){super(),D(this,s,ou,su,N,{socialNetwork:0})}};function lu(s){const e=ut(s);return carrotquest.i18n.social_network_page_title.replace("{{networkName}}",e)}function iu(s){return carrotquest.i18n[`social_network_page_desc_${s}`]}function cu(s){O(s,"svelte-16phwas",'@charset "UTF-8";h1.svelte-16phwas{font-size:18px;font-weight:bold;line-height:24px;margin:0 0 10px 0}ol.svelte-16phwas{margin:0 0 15px 0;padding-left:20px}li.svelte-16phwas:not(:first-child){margin-top:10px}.dark-theme .manual.svelte-16phwas{color:#ffffff}')}function Nr(s,e,n){const t=s.slice();return t[5]=e[n],t}function Ar(s){let e,n=s[5]+"",t;return{c(){e=x("li"),t=G(n),m(e,"class","svelte-16phwas")},m(r,o){k(r,e,o),w(e,t)},p(r,o){o&2&&n!==(n=r[5]+"")&&Q(t,n)},d(r){r&&y(e)}}}function du(s){let e,n,t,r,o,a,l,i,c,d,u,p=s[1],$=[];for(let g=0;g<p.length;g+=1)$[g]=Ar(Nr(s,p,g));return i=new au({props:{socialNetwork:s[0]}}),i.$on("click",s[4]),d=new eu({props:{socialNetwork:s[0]}}),{c(){e=x("div"),n=x("h1"),t=G(s[2]),r=B(),o=x("ol");for(let g=0;g<$.length;g+=1)$[g].c();a=B(),l=x("div"),q(i.$$.fragment),c=B(),q(d.$$.fragment),m(n,"class","svelte-16phwas"),m(o,"class","svelte-16phwas"),m(l,"class","margin-bottom-15"),m(e,"class","manual svelte-16phwas")},m(g,h){k(g,e,h),w(e,n),w(n,t),w(e,r),w(e,o);for(let _=0;_<$.length;_+=1)$[_]&&$[_].m(o,null);w(e,a),w(e,l),z(i,l,null),w(e,c),z(d,e,null),u=!0},p(g,[h]){if((!u||h&4)&&Q(t,g[2]),h&2){p=g[1];let T;for(T=0;T<p.length;T+=1){const A=Nr(g,p,T);$[T]?$[T].p(A,h):($[T]=Ar(A),$[T].c(),$[T].m(o,null))}for(;T<$.length;T+=1)$[T].d(1);$.length=p.length}const _={};h&1&&(_.socialNetwork=g[0]),i.$set(_);const b={};h&1&&(b.socialNetwork=g[0]),d.$set(b)},i(g){u||(f(i.$$.fragment,g),f(d.$$.fragment,g),u=!0)},o(g){v(i.$$.fragment,g),v(d.$$.fragment,g),u=!1},d(g){g&&y(e),Ee($,g),j(i),j(d)}}}function uu(s,e,n){let t,r,{socialNetwork:o}=e;function a(i){}const l=()=>{};return s.$$set=i=>{"socialNetwork"in i&&n(0,o=i.socialNetwork)},s.$$.update=()=>{s.$$.dirty&1&&n(2,t=lu(o)),s.$$.dirty&1&&n(1,r=iu(o))},[o,r,t,a,l]}let pu=class extends S{constructor(s){super(),D(this,s,uu,du,N,{socialNetwork:0},cu)}};function fu(s){O(s,"svelte-7d1k7c",".social-network-name.svelte-7d1k7c{font-size:14px;font-weight:bold}")}function mu(s){let e,n=ut(s[0])+"",t;return{c(){e=x("div"),t=G(n),m(e,"class","social-network-name svelte-7d1k7c")},m(r,o){k(r,e,o),w(e,t)},p(r,o){o&1&&n!==(n=ut(r[0])+"")&&Q(t,n)},d(r){r&&y(e)}}}function gu(s){let e,n;return e=new jn({props:{slot:"left"}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function vu(s){let e,n;return e=new rt({props:{slot:"right"}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function $u(s){let e,n;return e=new mt({props:{$$slots:{right:[vu],left:[gu],default:[mu]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,[r]){const o={};r&3&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function hu(s,e,n){let{socialNetwork:t}=e;return s.$$set=r=>{"socialNetwork"in r&&n(0,t=r.socialNetwork)},[t]}let xu=class extends S{constructor(s){super(),D(this,s,hu,$u,N,{socialNetwork:0},fu)}};function bu(s){O(s,"svelte-strcqc",".content.svelte-strcqc{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:auto;padding:20px 15px;-ms-overflow-style:none;scrollbar-width:none}.content.svelte-strcqc::-webkit-scrollbar{display:none}.powered-by.svelte-strcqc{margin:auto;padding:4px 0}")}function wu(s){let e,n,t;return n=new Pt({}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","powered-by svelte-strcqc")},m(r,o){k(r,e,o),z(n,e,null),t=!0},i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function ku(s){let e,n,t,r=Ut(),o,a;n=new pu({props:{socialNetwork:s[0]}});let l=r&&wu();return{c(){e=x("div"),q(n.$$.fragment),t=B(),l&&l.c(),o=ae(),m(e,"class","content svelte-strcqc")},m(i,c){k(i,e,c),z(n,e,null),k(i,t,c),l&&l.m(i,c),k(i,o,c),a=!0},p(i,c){const d={};c&1&&(d.socialNetwork=i[0]),n.$set(d)},i(i){a||(f(n.$$.fragment,i),f(l),a=!0)},o(i){v(n.$$.fragment,i),v(l),a=!1},d(i){i&&y(e),j(n),i&&y(t),l&&l.d(i),i&&y(o)}}}function yu(s){let e,n;return e=new xu({props:{socialNetwork:s[0],slot:"header"}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.socialNetwork=t[0]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function _u(s){let e,n;return e=new At({props:{$$slots:{header:[yu],default:[ku]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,[r]){const o={};r&3&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function qu(s,e,n){let{socialNetwork:t}=e;return s.$$set=r=>{"socialNetwork"in r&&n(0,t=r.socialNetwork)},[t]}class zu extends S{constructor(e){super(),D(this,e,qu,_u,N,{socialNetwork:0},bu)}}function ju(s){O(s,"svelte-1gutsbr",'@charset "UTF-8";.webinar.svelte-1gutsbr.svelte-1gutsbr{padding:10px 15px;border-radius:15px;background-color:#f2f2f2;-webkit-transition:background-color 0.15s;transition:background-color 0.15s}.date.svelte-1gutsbr.svelte-1gutsbr{padding-bottom:5px;font-size:12px;color:#999999}.heading.svelte-1gutsbr.svelte-1gutsbr{padding-bottom:10px;font-weight:bold;white-space:pre-line}.button.svelte-1gutsbr.svelte-1gutsbr{padding:7px 10px;border:1px solid var(--accent-color);-webkit-transition:color 0.15s, background-color 0.15s;transition:color 0.15s, background-color 0.15s}.svelte-1gutsbr:hover .button.svelte-1gutsbr{background-color:var(--accent-color);color:var(--contrast-color)}.dark-theme .webinar.svelte-1gutsbr.svelte-1gutsbr{background-color:#4d4d4d;color:#e6e6e6}.dark-theme .heading.svelte-1gutsbr.svelte-1gutsbr{color:#ffffff}')}function Cu(s){let e,n,t,r,o,a=s[0].heading+"",l,i,c,d=s[0].buttonText+"",u,p,$;return{c(){e=x("div"),n=x("div"),t=G(s[1]),r=B(),o=x("div"),l=G(a),i=B(),c=x("button"),u=G(d),m(n,"class","date svelte-1gutsbr"),m(o,"class","heading svelte-1gutsbr"),m(c,"class","button svelte-1gutsbr"),m(c,"type","button"),m(e,"class","webinar svelte-1gutsbr")},m(g,h){k(g,e,h),w(e,n),w(n,t),w(e,r),w(e,o),w(o,l),w(e,i),w(e,c),w(c,u),p||($=R(c,"click",s[3]),p=!0)},p(g,[h]){h&2&&Q(t,g[1]),h&1&&a!==(a=g[0].heading+"")&&Q(l,a),h&1&&d!==(d=g[0].buttonText+"")&&Q(u,d)},i:C,o:C,d(g){g&&y(e),p=!1,$()}}}function Tu(s,e,n){let t,{webinar:r}=e;function o(){to("Webinar chat widget - click",{webinar:r.heading}),Oe("GET",`/chat_bots/widget/${r.botId+""}/`,{}).then(l=>{let i=l.data.found;if(i){const c=no(l.data.chat_bot,l.data.message_sender,r.botId),d=ro(l.data.chat_bot,c,l.data.message_sender);Ne.go("conversation",{state:"openConversationWithWebinarBot",conversation:c,parts:d});return}if(!i){Ne.go("conversation",{state:"newConversation"});return}})}const a=()=>o();return s.$$set=l=>{"webinar"in l&&n(0,r=l.webinar)},s.$$.update=()=>{s.$$.dirty&1&&n(1,t=`${r.eventType} \u2022 ${r.date}`)},[r,t,o,a]}class Iu extends S{constructor(e){super(),D(this,e,Tu,Cu,N,{webinar:0},ju)}}function Er(s,e,n){const t=s.slice();return t[1]=e[n],t}function Sr(s){let e,n;return e=new Iu({props:{webinar:s[1]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.webinar=t[1]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Bu(s){let e,n,t=s[0],r=[];for(let a=0;a<t.length;a+=1)r[a]=Sr(Er(s,t,a));const o=a=>v(r[a],1,1,()=>{r[a]=null});return{c(){e=x("div");for(let a=0;a<r.length;a+=1)r[a].c();m(e,"class","space-y-10")},m(a,l){k(a,e,l);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(a,[l]){if(l&1){t=a[0];let i;for(i=0;i<t.length;i+=1){const c=Er(a,t,i);r[i]?(r[i].p(c,l),f(r[i],1)):(r[i]=Sr(c),r[i].c(),f(r[i],1),r[i].m(e,null))}for(U(),i=t.length;i<r.length;i+=1)o(i);P()}},i(a){if(!n){for(let l=0;l<t.length;l+=1)f(r[l]);n=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)v(r[l]);n=!1},d(a){a&&y(e),Ee(r,a)}}}function Nu(s,e,n){let t;return Z(s,rn,r=>n(0,t=r)),[t]}class Au extends S{constructor(e){super(),D(this,e,Nu,Bu,N,{})}}function Eu(s){O(s,"svelte-1eq9rp4",'@charset "UTF-8";.arrow.svelte-1eq9rp4.svelte-1eq9rp4{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px;border:none;background-color:#ffffff;color:var(--user-theme-dependent-color)}.arrow.left.svelte-1eq9rp4.svelte-1eq9rp4{left:0;margin-right:-10px;padding-right:10px;-webkit-mask-image:linear-gradient(to left, transparent 1px, rgba(0, 0, 0, 0.9) 8px, black 10px);mask-image:linear-gradient(to left, transparent 1px, rgba(0, 0, 0, 0.9) 8px, black 10px)}.arrow.right.svelte-1eq9rp4.svelte-1eq9rp4{right:0;margin-left:-10px;padding-left:10px;-webkit-mask-image:linear-gradient(to right, transparent 1px, rgba(0, 0, 0, 0.9) 8px, black 10px);mask-image:linear-gradient(to right, transparent 1px, rgba(0, 0, 0, 0.9) 8px, black 10px)}.arrow.svelte-1eq9rp4:hover .icon-container.svelte-1eq9rp4{background-color:rgba(var(--user-theme-dependent-rgb-color), 0.1)}.arrow[disabled].svelte-1eq9rp4.svelte-1eq9rp4{pointer-events:none}.arrow[disabled].svelte-1eq9rp4 .icon-container.svelte-1eq9rp4{opacity:0.25}.icon-container.svelte-1eq9rp4.svelte-1eq9rp4{padding:5px;border-radius:9999px;-webkit-transition:0.15s background-color, 0.15s opacity;transition:0.15s background-color, 0.15s opacity}.dark-theme .arrow.svelte-1eq9rp4.svelte-1eq9rp4{background-color:#333333}')}function Su(s){let e,n,t,r,o,a,l;return{c(){e=x("button"),n=x("div"),t=x("i"),m(t,"class",r="cqi-chat cqi-md cqi-chevron-"+s[0]+" svelte-1eq9rp4"),m(n,"class","icon-container svelte-1eq9rp4"),m(e,"class",o="arrow "+s[0]+" svelte-1eq9rp4"),e.disabled=s[1]},m(i,c){k(i,e,c),w(e,n),w(n,t),a||(l=R(e,"click",s[2]),a=!0)},p(i,[c]){c&1&&r!==(r="cqi-chat cqi-md cqi-chevron-"+i[0]+" svelte-1eq9rp4")&&m(t,"class",r),c&1&&o!==(o="arrow "+i[0]+" svelte-1eq9rp4")&&m(e,"class",o),c&2&&(e.disabled=i[1])},i:C,o:C,d(i){i&&y(e),a=!1,l()}}}function Du(s,e,n){let{direction:t}=e,{disabled:r}=e;function o(a){le.call(this,s,a)}return s.$$set=a=>{"direction"in a&&n(0,t=a.direction),"disabled"in a&&n(1,r=a.disabled)},[t,r,o]}class Dr extends S{constructor(e){super(),D(this,e,Du,Su,N,{direction:0,disabled:1},Eu)}}function Mu(s){let e,n;return e=new Zd({props:{socialNetwork:s[0]}}),e.$on("click",s[2]),e.$on("click",s[3]),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.socialNetwork=t[0]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Wu(s,e,n){let{socialNetwork:t}=e;function r(){Ne.go("socialNetwork",{socialNetwork:t})}function o(l){le.call(this,s,l)}const a=()=>r();return s.$$set=l=>{"socialNetwork"in l&&n(0,t=l.socialNetwork)},[t,r,o,a]}let Lu=class extends S{constructor(s){super(),D(this,s,Wu,Mu,N,{socialNetwork:0})}};function Mr(){Ne.go("conversation",{state:"newConversation"})}function Wr(){return carrotquest.i18n.button_start_message}function Ou(s){let e=Wr()+"",n;return{c(){n=G(e)},m(t,r){k(t,n,r)},p:C,d(t){t&&y(n)}}}function Uu(s){let e,n;return e=new ge({props:{fullWidth:!0,iconClassName:"cqi-pen",isAccent:!0,$$slots:{default:[Ou]},$$scope:{ctx:s}}}),e.$on("click",s[0]),e.$on("click",s[1]),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,[r]){const o={};r&4&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Pu(s){function e(n){le.call(this,s,n)}return[e,()=>Mr()]}class Hu extends S{constructor(e){super(),D(this,e,Pu,Uu,N,{})}}function Fu(s){let e,n;return e=new hn({props:{accent:"true",icon:"cqi-pen",text:Wr()}}),e.$on("click",s[0]),e.$on("click",s[1]),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Gu(s){function e(n){le.call(this,s,n)}return[e,()=>Mr()]}class Ru extends S{constructor(e){super(),D(this,e,Gu,Fu,N,{})}}function Vu(s){O(s,"svelte-rbju89",".carousel.svelte-rbju89{display:-webkit-box;display:-ms-flexbox;display:flex}.item-container.svelte-rbju89{display:-webkit-box;display:-ms-flexbox;display:flex;overflow:auto;margin:auto;-ms-overflow-style:none;scrollbar-width:none}.item-container.svelte-rbju89::-webkit-scrollbar{display:none}")}function Lr(s,e,n){const t=s.slice();return t[15]=e[n],t}function Or(s){let e,n;return e=new Dr({props:{direction:"left",disabled:s[1]}}),e.$on("click",s[10]),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.disabled=t[1]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Ur(s){let e,n;return e=new Ru({}),e.$on("click",s[11]),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Pr(s){let e,n;function t(){return s[12](s[15])}return e=new Lu({props:{socialNetwork:s[15]}}),e.$on("click",t),{c(){q(e.$$.fragment)},m(r,o){z(e,r,o),n=!0},p(r,o){s=r;const a={};o&32&&(a.socialNetwork=s[15]),e.$set(a)},i(r){n||(f(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function Hr(s){let e,n;return e=new Dr({props:{direction:"right",disabled:s[2]}}),e.$on("click",s[14]),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&4&&(o.disabled=t[2]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Yu(s){let e,n,t,r,o,a,l,i,c=s[3]&&Or(s),d=!s[4][nt.HIDE_CONVERSATIONS]&&Ur(s),u=s[5],p=[];for(let h=0;h<u.length;h+=1)p[h]=Pr(Lr(s,u,h));const $=h=>v(p[h],1,1,()=>{p[h]=null});let g=s[3]&&Hr(s);return{c(){e=x("div"),c&&c.c(),n=B(),t=x("div"),d&&d.c(),r=B();for(let h=0;h<p.length;h+=1)p[h].c();o=B(),g&&g.c(),m(t,"class","item-container svelte-rbju89"),m(e,"class","carousel svelte-rbju89")},m(h,_){k(h,e,_),c&&c.m(e,null),w(e,n),w(e,t),d&&d.m(t,null),w(t,r);for(let b=0;b<p.length;b+=1)p[b]&&p[b].m(t,null);s[13](t),w(e,o),g&&g.m(e,null),a=!0,l||(i=R(t,"scroll",s[9]),l=!0)},p(h,[_]){if(h[3]?c?(c.p(h,_),_&8&&f(c,1)):(c=Or(h),c.c(),f(c,1),c.m(e,n)):c&&(U(),v(c,1,1,()=>{c=null}),P()),h[4][nt.HIDE_CONVERSATIONS]?d&&(U(),v(d,1,1,()=>{d=null}),P()):d?(d.p(h,_),_&16&&f(d,1)):(d=Ur(h),d.c(),f(d,1),d.m(t,r)),_&160){u=h[5];let b;for(b=0;b<u.length;b+=1){const T=Lr(h,u,b);p[b]?(p[b].p(T,_),f(p[b],1)):(p[b]=Pr(T),p[b].c(),f(p[b],1),p[b].m(t,null))}for(U(),b=u.length;b<p.length;b+=1)$(b);P()}h[3]?g?(g.p(h,_),_&8&&f(g,1)):(g=Hr(h),g.c(),f(g,1),g.m(e,null)):g&&(U(),v(g,1,1,()=>{g=null}),P())},i(h){if(!a){f(c),f(d);for(let _=0;_<u.length;_+=1)f(p[_]);f(g),a=!0}},o(h){v(c),v(d),p=p.filter(Boolean);for(let _=0;_<p.length;_+=1)v(p[_]);v(g),a=!1},d(h){h&&y(e),c&&c.d(),d&&d.d(),Ee(p,h),s[13](null),g&&g.d(),l=!1,i()}}}function Ju(s,e,n){let t,r;Z(s,sn,b=>n(4,t=b)),Z(s,on,b=>n(5,r=b));let o,a,l,i=!1;function c(){}function d(b){}function u(b=!1){let T=70;!b&&o.scrollWidth-o.scrollLeft-o.offsetWidth<T*1.5&&(T=T*1.5),b&&o.scrollLeft<T*1.5&&(T=T*1.5),b&&(T=-T),o.scrollBy({left:T,behavior:"smooth"})}function p(){n(1,a=o.scrollLeft===0),n(2,l=Math.abs(o.scrollWidth-o.scrollLeft-o.offsetWidth)<1)}Re(()=>{n(3,i=o.scrollWidth>o.clientWidth),i&&p()});const $=()=>u(!0),g=()=>{},h=b=>{};function _(b){re[b?"unshift":"push"](()=>{o=b,n(0,o)})}return[o,a,l,i,t,r,c,d,u,p,$,g,h,_,()=>u()]}let Zu=class extends S{constructor(s){super(),D(this,s,Ju,Yu,N,{},Vu)}};function Ku(s){return s.reduce((e,n)=>e+n.unread_parts_count,0)}function Xu(s){O(s,"svelte-dq8s4u",'@charset "UTF-8";.decoration.svelte-dq8s4u.svelte-dq8s4u{position:relative;top:1;overflow:hidden}.decorator.svelte-dq8s4u.svelte-dq8s4u{position:relative;height:7px;margin:0 auto 0 auto;background-color:#e6e6e6;border-width:0 1px 1px 1px;border-style:solid;border-color:#ffffff;border-bottom-left-radius:15px 7px;border-bottom-right-radius:15px 7px;-webkit-transform-origin:top;-ms-transform-origin:top;transform-origin:top;-webkit-transition:0.15s -webkit-transform;transition:0.15s -webkit-transform;transition:0.15s transform;transition:0.15s transform, 0.15s -webkit-transform}.decorator.svelte-dq8s4u.svelte-dq8s4u:nth-of-type(1){bottom:2px;margin-right:15px;margin-left:15px;z-index:1}.card:hover+.decoration.svelte-dq8s4u .decorator.svelte-dq8s4u:nth-of-type(1){-webkit-transform:translateY(2px);-ms-transform:translateY(2px);transform:translateY(2px)}.decorator.svelte-dq8s4u.svelte-dq8s4u:nth-of-type(2){bottom:4px;margin-right:25px;margin-left:25px;z-index:0}.card:hover+.decoration.svelte-dq8s4u .decorator.svelte-dq8s4u:nth-of-type(2){-webkit-transform:translateY(4px);-ms-transform:translateY(4px);transform:translateY(4px)}.dark-theme .decorator.svelte-dq8s4u.svelte-dq8s4u{background-color:#595959;border-color:#333333}')}function Fr(s,e,n){const t=s.slice();return t[10]=e[n],t}function Gr(s,e,n){const t=s.slice();return t[13]=e[n],t}function Rr(s){let e,n,t,r,o=Array(s[3]),a=[];for(let l=0;l<o.length;l+=1)a[l]=Vr(Gr(s,o,l));return{c(){e=x("div");for(let l=0;l<a.length;l+=1)a[l].c();m(e,"class","decoration svelte-dq8s4u"),se(e,"margin-bottom",s[3]*-Zr+"px")},m(l,i){k(l,e,i);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null);r=!0},p(l,i){if(i&8){o=Array(l[3]);let c;for(c=0;c<o.length;c+=1){const d=Gr(l,o,c);a[c]?a[c].p(d,i):(a[c]=Vr(),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=o.length}i&8&&se(e,"margin-bottom",l[3]*-Zr+"px")},i(l){r||(l&&ne(()=>{r&&(t&&t.end(1),n=me(e,xe,{duration:300,delay:300}),n.start())}),r=!0)},o(l){n&&n.invalidate(),l&&(t=he(e,xe,{duration:10})),r=!1},d(l){l&&y(e),Ee(a,l),l&&t&&t.end()}}}function Vr(s){let e;return{c(){e=x("div"),m(e,"class","decorator svelte-dq8s4u")},m(n,t){k(n,e,t)},p:C,d(n){n&&y(e)}}}function Yr(s,e){let n,t,r,o;function a(){return e[8](e[10])}return t=new qn({props:{conversation:e[10]}}),t.$on("click",a),{key:s,first:null,c(){n=x("div"),q(t.$$.fragment),se(n,"padding-top","10px"),this.first=n},m(l,i){k(l,n,i),z(t,n,null),o=!0},p(l,i){e=l;const c={};i&16&&(c.conversation=e[10]),t.$set(c)},i(l){o||(f(t.$$.fragment,l),l&&ne(()=>{o&&(r||(r=pe(n,xe,{duration:300},!0)),r.run(1))}),o=!0)},o(l){v(t.$$.fragment,l),l&&(r||(r=pe(n,xe,{duration:300},!1)),r.run(0)),o=!1},d(l){l&&y(n),j(t),l&&r&&r.end()}}}function Jr(s){let e,n,t,r;return n=new ge({props:{iconClassName:"cqi-chevron-up",fullWidth:"true",size:"xs",$$slots:{default:[Qu]},$$scope:{ctx:s}}}),n.$on("click",s[9]),{c(){e=x("div"),q(n.$$.fragment),se(e,"padding-top","10px")},m(o,a){k(o,e,a),z(n,e,null),r=!0},p(o,a){const l={};a&65536&&(l.$$scope={dirty:a,ctx:o}),n.$set(l)},i(o){r||(f(n.$$.fragment,o),o&&ne(()=>{r&&(t||(t=pe(e,xe,{duration:300},!0)),t.run(1))}),r=!0)},o(o){v(n.$$.fragment,o),o&&(t||(t=pe(e,xe,{duration:300},!1)),t.run(0)),r=!1},d(o){o&&y(e),j(n),o&&t&&t.end()}}}function Qu(s){let e=carrotquest.i18n.history_group_collapse+"",n;return{c(){n=G(e)},m(t,r){k(t,n,r)},p:C,d(t){t&&y(n)}}}function ep(s){let e,n,t,r,o=[],a=new Map,l,i,c;n=new qn({props:{conversation:s[0][0],unreadPartsCountOverride:s[2]}}),n.$on("click",s[7]);let d=!s[1]&&Rr(s),u=s[4];const p=g=>g[10].id;for(let g=0;g<u.length;g+=1){let h=Fr(s,u,g),_=p(h);a.set(_,o[g]=Yr(_,h))}let $=s[1]&&Jr(s);return{c(){e=x("div"),q(n.$$.fragment),t=B(),d&&d.c(),r=B();for(let g=0;g<o.length;g+=1)o[g].c();l=B(),$&&$.c(),i=ae(),m(e,"class","card")},m(g,h){k(g,e,h),z(n,e,null),k(g,t,h),d&&d.m(g,h),k(g,r,h);for(let _=0;_<o.length;_+=1)o[_]&&o[_].m(g,h);k(g,l,h),$&&$.m(g,h),k(g,i,h),c=!0},p(g,[h]){const _={};h&1&&(_.conversation=g[0][0]),h&4&&(_.unreadPartsCountOverride=g[2]),n.$set(_),g[1]?d&&(U(),v(d,1,1,()=>{d=null}),P()):d?(d.p(g,h),h&2&&f(d,1)):(d=Rr(g),d.c(),f(d,1),d.m(r.parentNode,r)),h&80&&(u=g[4],U(),o=Ze(o,h,p,1,g,u,a,l.parentNode,Ke,Yr,l,Fr),P()),g[1]?$?($.p(g,h),h&2&&f($,1)):($=Jr(g),$.c(),f($,1),$.m(i.parentNode,i)):$&&(U(),v($,1,1,()=>{$=null}),P())},i(g){if(!c){f(n.$$.fragment,g),f(d);for(let h=0;h<u.length;h+=1)f(o[h]);f($),c=!0}},o(g){v(n.$$.fragment,g),v(d);for(let h=0;h<o.length;h+=1)v(o[h]);v($),c=!1},d(g){g&&y(e),j(n),g&&y(t),d&&d.d(g),g&&y(r);for(let h=0;h<o.length;h+=1)o[h].d(g);g&&y(l),$&&$.d(g),g&&y(i)}}}const Zr=2,Kr=2;function tp(s,e,n){let t,r,o,{conversationList:a}=e,l=!1;function i($){if(a.length===1){Ne.go("conversation",{state:"openConversation",conversation:$});return}if(l===!1){n(1,l=!0);return}Ne.go("conversation",{state:"openConversation",conversation:$})}function c(){}const d=()=>{i(a[0])},u=$=>{Ne.go("conversation",{state:"openConversation",conversation:$})},p=()=>n(1,l=!1);return s.$$set=$=>{"conversationList"in $&&n(0,a=$.conversationList)},s.$$.update=()=>{s.$$.dirty&3&&n(4,t=l?a.slice(1,a.length):[]),s.$$.dirty&1&&n(3,r=Kr<a.length-1?Kr:a.length-1),s.$$.dirty&3&&n(2,o=l?null:Ku(a))},[a,l,o,r,t,i,c,d,u,p]}class np extends S{constructor(e){super(),D(this,e,tp,ep,N,{conversationList:0},Xu)}}function rp(s){O(s,"svelte-1mxz93p",'@charset "UTF-8";.divider.svelte-1mxz93p{position:relative;height:15px;margin-left:-10px;text-align:right}.divider.svelte-1mxz93p:before{content:"";position:absolute;top:7px;display:block;width:100%;height:1px;background-color:#e6e6e6}.text.svelte-1mxz93p{position:relative;display:inline-block;padding:0 10px 0 5px;line-height:15px;background-color:#ffffff;color:#999999;font-size:12px;font-weight:bold}.dark-theme .divider.svelte-1mxz93p:before{background-color:#595959}.dark-theme .text.svelte-1mxz93p{color:#999999;background-color:#333333}')}function sp(s){let e,n,t;return{c(){e=x("div"),n=x("div"),t=G(s[0]),m(n,"class","text svelte-1mxz93p"),m(e,"class","divider svelte-1mxz93p")},m(r,o){k(r,e,o),w(e,n),w(n,t)},p(r,[o]){o&1&&Q(t,r[0])},i:C,o:C,d(r){r&&y(e)}}}function op(s,e,n){let{text:t=""}=e;return s.$$set=r=>{"text"in r&&n(0,t=r.text)},[t]}class ap extends S{constructor(e){super(),D(this,e,op,sp,N,{text:0},rp)}}function Xr(s,e,n){const t=s.slice();return t[2]=e[n],t}function Qr(s){let e,n,t,r;return n=new np({props:{conversationList:s[2]}}),{c(){e=x("div"),q(n.$$.fragment),t=B()},m(o,a){k(o,e,a),z(n,e,null),w(e,t),r=!0},p(o,a){const l={};a&2&&(l.conversationList=o[2]),n.$set(l)},i(o){r||(f(n.$$.fragment,o),r=!0)},o(o){v(n.$$.fragment,o),r=!1},d(o){o&&y(e),j(n)}}}function lp(s){let e,n,t,r;e=new ap({props:{text:carrotquest.i18n[`history_section_${s[0]}`]}});let o=s[1],a=[];for(let i=0;i<o.length;i+=1)a[i]=Qr(Xr(s,o,i));const l=i=>v(a[i],1,1,()=>{a[i]=null});return{c(){q(e.$$.fragment),n=B(),t=x("div");for(let i=0;i<a.length;i+=1)a[i].c();m(t,"class","margin-top-10 space-y-10")},m(i,c){z(e,i,c),k(i,n,c),k(i,t,c);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(t,null);r=!0},p(i,[c]){const d={};if(c&1&&(d.text=carrotquest.i18n[`history_section_${i[0]}`]),e.$set(d),c&2){o=i[1];let u;for(u=0;u<o.length;u+=1){const p=Xr(i,o,u);a[u]?(a[u].p(p,c),f(a[u],1)):(a[u]=Qr(p),a[u].c(),f(a[u],1),a[u].m(t,null))}for(U(),u=o.length;u<a.length;u+=1)l(u);P()}},i(i){if(!r){f(e.$$.fragment,i);for(let c=0;c<o.length;c+=1)f(a[c]);r=!0}},o(i){v(e.$$.fragment,i),a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)v(a[c]);r=!1},d(i){j(e,i),i&&y(n),i&&y(t),Ee(a,i)}}}function ip(s,e,n){let{name:t}=e,{groupedConversations:r}=e;return s.$$set=o=>{"name"in o&&n(0,t=o.name),"groupedConversations"in o&&n(1,r=o.groupedConversations)},[t,r]}class es extends S{constructor(e){super(),D(this,e,ip,lp,N,{name:0,groupedConversations:1})}}function cp(s){O(s,"svelte-1ak0t9q",'@charset "UTF-8";.container.svelte-1ak0t9q{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;padding:15px;background-color:#f2f2f2;border-radius:15px;color:#595959}.zero-data.svelte-1ak0t9q{margin:auto;text-align:center}.image.svelte-1ak0t9q{height:50px;widows:50px}.title.svelte-1ak0t9q{margin-top:15px;font-weight:bold}.description.svelte-1ak0t9q{margin-top:5px;font-size:12px}.dark-theme .container.svelte-1ak0t9q{background-color:#4d4d4d;color:#e6e6e6}')}function dp(s){let e,n,t,r,o,a,l,i;return{c(){e=x("div"),n=x("div"),t=x("img"),o=B(),a=x("div"),a.textContent=`${carrotquest.i18n.history_zero_data_title}`,l=B(),i=x("div"),i.textContent=`${carrotquest.i18n.history_zero_data_desc}`,m(t,"class","image svelte-1ak0t9q"),Be(t.src,r="https://cdn.carrotquest.app/img/themes/"+s[0]+"/history-zero-data.svg")||m(t,"src",r),m(a,"class","title svelte-1ak0t9q"),m(i,"class","description svelte-1ak0t9q"),m(n,"class","zero-data svelte-1ak0t9q"),m(e,"class","container svelte-1ak0t9q")},m(c,d){k(c,e,d),w(e,n),w(n,t),w(n,o),w(n,a),w(n,l),w(n,i)},p:C,i:C,o:C,d(c){c&&y(e)}}}function up(s){return[carrotquest.darkTheme?"dark":"default"]}class pp extends S{constructor(e){super(),D(this,e,up,dp,N,{},cp)}}function fp(s){let e,n;return e=new pp({}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function mp(s){let e,n,t,r=s[0].length&&ts(s),o=s[1].length&&ns(s);return{c(){e=x("div"),r&&r.c(),n=B(),o&&o.c(),m(e,"class","history space-y-10")},m(a,l){k(a,e,l),r&&r.m(e,null),w(e,n),o&&o.m(e,null),t=!0},p(a,l){a[0].length?r?(r.p(a,l),l&1&&f(r,1)):(r=ts(a),r.c(),f(r,1),r.m(e,n)):r&&(U(),v(r,1,1,()=>{r=null}),P()),a[1].length?o?(o.p(a,l),l&2&&f(o,1)):(o=ns(a),o.c(),f(o,1),o.m(e,null)):o&&(U(),v(o,1,1,()=>{o=null}),P())},i(a){t||(f(r),f(o),t=!0)},o(a){v(r),v(o),t=!1},d(a){a&&y(e),r&&r.d(),o&&o.d()}}}function ts(s){let e,n;return e=new es({props:{name:"actual",groupedConversations:s[0]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.groupedConversations=t[0]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function ns(s){let e,n;return e=new es({props:{name:"archive",groupedConversations:s[1]}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.groupedConversations=t[1]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function gp(s){let e,n,t,r;const o=[mp,fp],a=[];function l(i,c){return i[0].length||i[1].length?0:1}return e=l(s),n=a[e]=o[e](s),{c(){n.c(),t=ae()},m(i,c){a[e].m(i,c),k(i,t,c),r=!0},p(i,[c]){let d=e;e=l(i),e===d?a[e].p(i,c):(U(),v(a[d],1,1,()=>{a[d]=null}),P(),n=a[e],n?n.p(i,c):(n=a[e]=o[e](i),n.c()),f(n,1),n.m(t.parentNode,t))},i(i){r||(f(n),r=!0)},o(i){v(n),r=!1},d(i){a[e].d(i),i&&y(t)}}}function vp(s,e,n){let t,r;return Z(s,Ss,o=>n(0,t=o)),Z(s,Ds,o=>n(1,r=o)),[t,r]}class $p extends S{constructor(e){super(),D(this,e,vp,gp,N,{})}}function hp(s){return Ms(carrotquest.data.app.admins).slice(0,s).map(e=>e.avatar)}function xp(){return carrotquest.data.app.settings.messenger_name}function bp(s){O(s,"svelte-1qqlvyu",".new-avatars.svelte-1qqlvyu{margin-bottom:15px}.title.svelte-1qqlvyu{font-size:18px;font-weight:bold;line-height:21px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.description.svelte-1qqlvyu{margin-top:5px;font-size:12px;opacity:0.8}")}function rs(s){let e,n,t,r,o,a,l;return t=new po({props:{avatars:s[2]}}),{c(){e=x("div"),n=x("div"),q(t.$$.fragment),m(e,"class","new-avatars svelte-1qqlvyu")},m(i,c){k(i,e,c),w(e,n),z(t,n,null),l=!0},p(i,c){s=i},i(i){l||(f(t.$$.fragment,i),i&&ne(()=>{l&&(o&&o.end(1),r=me(n,ie,{duration:100,delay:250,easing:We}),r.start())}),i&&ne(()=>{l&&(a||(a=pe(e,xe,{duration:300,easing:We},!0)),a.run(1))}),l=!0)},o(i){v(t.$$.fragment,i),r&&r.invalidate(),i&&(o=he(n,ie,{duration:100,easing:We})),i&&(a||(a=pe(e,xe,{duration:300,easing:We},!1)),a.run(0)),l=!1},d(i){i&&y(e),j(t),i&&o&&o.end(),i&&a&&a.end()}}}function ss(s){let e,n,t,r,o,a,l;return{c(){e=x("div"),n=x("div"),t=G(s[1]),m(e,"class","description svelte-1qqlvyu")},m(i,c){k(i,e,c),w(e,n),w(n,t),l=!0},p(i,c){s=i,(!l||c&2)&&Q(t,s[1])},i(i){l||(i&&ne(()=>{l&&(o&&o.end(1),r=me(n,ie,{duration:100,delay:250,easing:We}),r.start())}),i&&ne(()=>{l&&(a||(a=pe(e,xe,{duration:300,easing:We},!0)),a.run(1))}),l=!0)},o(i){r&&r.invalidate(),i&&(o=he(n,ie,{duration:100,easing:We})),i&&(a||(a=pe(e,xe,{duration:300,easing:We},!1)),a.run(0)),l=!1},d(i){i&&y(e),i&&o&&o.end(),i&&a&&a.end()}}}function wp(s){let e,n,t,r,o,a=s[2].length&&!s[0]&&rs(s),l=s[1]&&!s[0]&&ss(s);return{c(){a&&a.c(),e=B(),n=x("div"),n.textContent=`${xp()}`,t=B(),l&&l.c(),r=ae(),m(n,"class","title svelte-1qqlvyu")},m(i,c){a&&a.m(i,c),k(i,e,c),k(i,n,c),k(i,t,c),l&&l.m(i,c),k(i,r,c),o=!0},p(i,c){i[2].length&&!i[0]?a?(a.p(i,c),c&1&&f(a,1)):(a=rs(i),a.c(),f(a,1),a.m(e.parentNode,e)):a&&(U(),v(a,1,1,()=>{a=null}),P()),i[1]&&!i[0]?l?(l.p(i,c),c&3&&f(l,1)):(l=ss(i),l.c(),f(l,1),l.m(r.parentNode,r)):l&&(U(),v(l,1,1,()=>{l=null}),P())},i(i){o||(f(a),f(l),o=!0)},o(i){v(a),v(l),o=!1},d(i){a&&a.d(i),i&&y(e),i&&y(n),i&&y(t),l&&l.d(i),i&&y(r)}}}function kp(s){let e,n,t;return n=new rt({}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","invisible"),m(e,"slot","left")},m(r,o){k(r,e,o),z(n,e,null),t=!0},p:C,i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function yp(s){let e,n;return e=new rt({props:{slot:"right"}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function _p(s){let e,n;return e=new mt({props:{$$slots:{right:[yp],left:[kp],default:[wp]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,[r]){const o={};r&11&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function qp(s,e,n){let t;Z(s,Ws,a=>n(1,t=a));let{showOnlyTitle:r}=e;const o=hp(3);return s.$$set=a=>{"showOnlyTitle"in a&&n(0,r=a.showOnlyTitle)},[r,t,o]}class zp extends S{constructor(e){super(),D(this,e,qp,_p,N,{showOnlyTitle:0},bp)}}function jp(s){O(s,"svelte-8a28w4",".content.svelte-8a28w4{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:auto;padding:20px 10px 10px;-ms-overflow-style:none;scrollbar-width:none}.content.svelte-8a28w4::-webkit-scrollbar{display:none}.powered-by.svelte-8a28w4{margin:auto;padding:4px 0}")}function Cp(s){return{c:C,m:C,p:C,i:C,o:C,d:C}}function Tp(s){let e,n;return e=new At({props:{$$slots:{header:[Ep],default:[Ap]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&271&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Ip(s){let e,n,t;return n=new Hu({}),n.$on("click",s[6]),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","margin-bottom-15")},m(r,o){k(r,e,o),z(n,e,null),t=!0},p:C,i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function Bp(s){let e,n,t;return n=new Zu({}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","margin-bottom-15")},m(r,o){k(r,e,o),z(n,e,null),t=!0},p:C,i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function os(s){let e,n,t;return n=new Au({}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","margin-bottom-10")},m(r,o){k(r,e,o),z(n,e,null),t=!0},i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function as(s){let e,n;return e=new $p({}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Np(s){let e,n,t;return n=new Pt({}),{c(){e=x("div"),q(n.$$.fragment),m(e,"class","powered-by svelte-8a28w4")},m(r,o){k(r,e,o),z(n,e,null),t=!0},i(r){t||(f(n.$$.fragment,r),t=!0)},o(r){v(n.$$.fragment,r),t=!1},d(r){r&&y(e),j(n)}}}function Ap(s){let e,n,t,r,o,a,l=Ut(),i,c,d,u;const p=[Bp,Ip],$=[];function g(T,A){return T[1].length?0:T[2][nt.HIDE_CONVERSATIONS]?-1:1}~(n=g(s))&&(t=$[n]=p[n](s));let h=s[3].length&&os(),_=!s[2][nt.HIDE_CONVERSATIONS]&&as(),b=l&&Np();return{c(){e=x("div"),t&&t.c(),r=B(),h&&h.c(),o=B(),_&&_.c(),a=B(),b&&b.c(),i=ae(),m(e,"class","content svelte-8a28w4")},m(T,A){k(T,e,A),~n&&$[n].m(e,null),w(e,r),h&&h.m(e,null),w(e,o),_&&_.m(e,null),k(T,a,A),b&&b.m(T,A),k(T,i,A),c=!0,d||(u=R(e,"scroll",s[4]),d=!0)},p(T,A){let H=n;n=g(T),n===H?~n&&$[n].p(T,A):(t&&(U(),v($[H],1,1,()=>{$[H]=null}),P()),~n?(t=$[n],t?t.p(T,A):(t=$[n]=p[n](T),t.c()),f(t,1),t.m(e,r)):t=null),T[3].length?h?A&8&&f(h,1):(h=os(),h.c(),f(h,1),h.m(e,o)):h&&(U(),v(h,1,1,()=>{h=null}),P()),T[2][nt.HIDE_CONVERSATIONS]?_&&(U(),v(_,1,1,()=>{_=null}),P()):_?A&4&&f(_,1):(_=as(),_.c(),f(_,1),_.m(e,null))},i(T){c||(f(t),f(h),f(_),f(b),c=!0)},o(T){v(t),v(h),v(_),v(b),c=!1},d(T){T&&y(e),~n&&$[n].d(),h&&h.d(),_&&_.d(),T&&y(a),b&&b.d(T),T&&y(i),d=!1,u()}}}function Ep(s){let e,n;return e=new zp({props:{showOnlyTitle:s[0],slot:"header"}}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.showOnlyTitle=t[0]),e.$set(o)},i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Sp(s){let e,n;return e=new Ir({}),{c(){q(e.$$.fragment)},m(t,r){z(e,t,r),n=!0},p:C,i(t){n||(f(e.$$.fragment,t),n=!0)},o(t){v(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Dp(s){let e,n,t={ctx:s,current:null,token:null,hasCatch:!1,pending:Sp,then:Tp,catch:Cp,value:7,blocks:[,,,]};return dt(Ls.fetch(),t),{c(){e=ae(),t.block.c()},m(r,o){k(r,e,o),t.block.m(r,t.anchor=o),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(r,[o]){s=r,Tt(t,s,o)},i(r){n||(f(t.block),n=!0)},o(r){for(let o=0;o<3;o+=1){const a=t.blocks[o];v(a)}n=!1},d(r){r&&y(e),t.block.d(r),t.token=null,t=null}}}function Mp(s,e,n){let t,r,o;Z(s,on,c=>n(1,t=c)),Z(s,sn,c=>n(2,r=c)),Z(s,rn,c=>n(3,o=c));let a=!1;function l(c){const d=c.target;let u=d.scrollHeight-d.clientHeight>100;d.scrollTop>0&&u&&n(0,a=!0),d.scrollTop===0&&n(0,a=!1)}function i(){}return[a,t,r,o,l,i,()=>{}]}class Wp extends S{constructor(e){super(),D(this,e,Mp,Dp,N,{},jp)}}function Lp(s){O(s,"svelte-z3mqeq","*{-webkit-box-sizing:border-box;box-sizing:border-box}.hidden{display:none}")}function ls(s){let e,n;const t=[s[0].params,s[1]];let r={};for(let o=0;o<t.length;o+=1)r=oe(r,t[o]);return e=new Wp({props:r}),{c(){q(e.$$.fragment)},m(o,a){z(e,o,a),n=!0},p(o,a){const l=a&3?$e(t,[a&1&&fe(o[0].params),a&2&&fe(o[1])]):{};e.$set(l)},i(o){n||(f(e.$$.fragment,o),n=!0)},o(o){v(e.$$.fragment,o),n=!1},d(o){j(e,o)}}}function is(s){let e,n;const t=[s[0].params,s[1]];let r={};for(let o=0;o<t.length;o+=1)r=oe(r,t[o]);return e=new Vd({props:r}),{c(){q(e.$$.fragment)},m(o,a){z(e,o,a),n=!0},p(o,a){const l=a&3?$e(t,[a&1&&fe(o[0].params),a&2&&fe(o[1])]):{};e.$set(l)},i(o){n||(f(e.$$.fragment,o),n=!0)},o(o){v(e.$$.fragment,o),n=!1},d(o){j(e,o)}}}function cs(s){let e,n;const t=[s[0].params,s[1]];let r={};for(let o=0;o<t.length;o+=1)r=oe(r,t[o]);return e=new zu({props:r}),{c(){q(e.$$.fragment)},m(o,a){z(e,o,a),n=!0},p(o,a){const l=a&3?$e(t,[a&1&&fe(o[0].params),a&2&&fe(o[1])]):{};e.$set(l)},i(o){n||(f(e.$$.fragment,o),n=!0)},o(o){v(e.$$.fragment,o),n=!1},d(o){j(e,o)}}}function Op(s){let e,n,t,r,o=s[0].route==="startScreen"&&ls(s),a=s[0].route==="conversation"&&is(s),l=s[0].route==="socialNetwork"&&cs(s);return{c(){o&&o.c(),e=B(),a&&a.c(),n=B(),l&&l.c(),t=ae()},m(i,c){o&&o.m(i,c),k(i,e,c),a&&a.m(i,c),k(i,n,c),l&&l.m(i,c),k(i,t,c),r=!0},p(i,[c]){i[0].route==="startScreen"?o?(o.p(i,c),c&1&&f(o,1)):(o=ls(i),o.c(),f(o,1),o.m(e.parentNode,e)):o&&(U(),v(o,1,1,()=>{o=null}),P()),i[0].route==="conversation"?a?(a.p(i,c),c&1&&f(a,1)):(a=is(i),a.c(),f(a,1),a.m(n.parentNode,n)):a&&(U(),v(a,1,1,()=>{a=null}),P()),i[0].route==="socialNetwork"?l?(l.p(i,c),c&1&&f(l,1)):(l=cs(i),l.c(),f(l,1),l.m(t.parentNode,t)):l&&(U(),v(l,1,1,()=>{l=null}),P())},i(i){r||(f(o),f(a),f(l),r=!0)},o(i){v(o),v(a),v(l),r=!1},d(i){o&&o.d(i),i&&y(e),a&&a.d(i),i&&y(n),l&&l.d(i),i&&y(t)}}}function Up(s,e,n){let t;Z(s,Ne,u=>n(0,t=u));let{settings:r}=e,{data:o}=e,{route:a,routeParams:l}=r,i=o,{hooks:c}=i,d=ps(i,["hooks"]);return Os(c),Ne.go(a,l),s.$$set=u=>{"settings"in u&&n(2,r=u.settings),"data"in u&&n(3,o=u.data)},[t,d,r,o]}class Pp extends S{constructor(e){super(),D(this,e,Up,Op,N,{settings:2,data:3},Lp)}}window.carrotquestChat=(s,e,n,t)=>(window.carrotquest=t,new Pp({target:s,props:{settings:e,data:n}}));
