! function(e) {
    e(function() {
        function t(t) {
            var i = 0;
            return t.each(function(t, n) {
                i += e(n).outerWidth(true)
            }), i
        }

        function i(e) {
            for (var t = 0, i = 0; i < e.length && 3 != i; i++) t += e.outerHeight();
            return t
        }
        var n = e("#links-sidebar"),
            r = e("#news"),
            tl = e("#type_line"),
            tli = e("#type_line_inner");
        e("#menu-btn").on("click", function() {
            "none" == e("#menu").css("display") ? (e("#menu").slideDown(500), e(this).addClass("l-menu-btn--active")) : (e("#menu").slideUp(500), e(this).removeClass("l-menu-btn--active"))
        });
        var s = (new Swiper("#slider-main", {
                pagination: ".slider-main-pagination",
                paginationClickable: !0,
                prevButton: ".slider-main-prev",
                nextButton: ".slider-main-next",
                spaceBetween: 0,
                autoplay:5000,
                loop: !0
            }), new Swiper("#slider-direction", {
                prevButton: ".slider-direction-prev",
                nextButton: ".slider-direction-next",
                spaceBetween: 0,
                /*loop: !0,*/
                slidesPerView: 5,
                breakpoints: {
                    767: {
                        slidesPerView: 3
                    },
                    479: {
                        slidesPerView: 2
                    }
                }
            }), new Swiper("#document-slider", {
                slidesPerView: 6,
                loop: false,
                spaceBetween: 5,
                prevButton: ".l-document-slider-prev",
                nextButton: ".l-document-slider-next",
                breakpoints: {
                    767: {
                        slidesPerView: 4
                    }
                },
                onInit: function () {
                    var countSlide = $('#document-slider').find('.swiper-slide').length;
                    //var windowCur = $('body').width();
                    if(countSlide <= 3)
                    {
                        $('.l-document-slider .l-document-slider-btn').css('display', 'none');
                        $('.l-document-slider .swiper-wrapper').addClass('no-margin-swiper');
                }
                  }
            }), 
            SwHead = new Swiper("#timing-header", {
                slidesPerView: 7,
                prevButton: ".timing-arrow-prev",
                nextButton: ".timing-arrow-next",
                /*slideActiveClass: "timing-active",*/
                /*centeredSlides: !0,*/
                slideToClickedSlide: !0,
                loop: false,
                breakpoints: {
                    767: {
                        slidesPerView: 1
                    }
                }
            })),
            l = new Swiper("#timing-body", {
                slidesPerView: 7,
                /*centeredSlides: !0,*/
                loop: false,
                slideToClickedSlide: !0,
                breakpoints: {
                    767: {
                        slidesPerView: 1
                    }
                }
            });
            
            var SwTeach = new Swiper("#teacher-slider", {
                slidesPerView: 7,
                loop: false,
                centeredSlides:false,
                prevButton: ".l-teacher-slider-prev",
                nextButton: ".l-teacher-slider-next",
                breakpoints: {
                    767: {
                        slidesPerView: 4
                    },
                    479: {
                        slidesPerView: 3
                    }
                },
//                on: {
                    onInit: function () {
                      var countSlide = $('#teacher-slider').find('.swiper-slide').length;
                      //var windowCur = $('body').width();
                      if(countSlide <= 3)
                      {
                          $('.l-teacher-slider .l-teacher-slider-btn').css('display', 'none');
                          $('.l-teacher-slider .swiper-wrapper').addClass('no-margin-swiper');
                      }
                    }
//                }
            });

        s.params.control = l, l.params.control = s;
        var o = e("#links-sidebar a");
        var to = e('#type_line .swiper-slide');
        var toi = e('#type_line_index .swiper-slide');
        e(window).on("load resize", function() {
            var s = e(this).innerWidth(),
                l = e(".s-news-block");
            n.perfectScrollbar()/*, r.perfectScrollbar()*/, tl.perfectScrollbar(), tli.perfectScrollbar();
            var a = e("#timing-table"),
                c = a.find(".swiper-slide div").outerHeight(),
                d = 7;
            a.find(".timing-date div").length > d ? (a.height(c * d).perfectScrollbar(), a.height(c * d).perfectScrollbar("update")) : a.height("").perfectScrollbar("destroy"), 768 > s ? (n.height(""), e(".s-links-wrapper").width(t(e(".s-links-wrapper > a")) + 20), n.perfectScrollbar("update")/*, l.width(t(e(".s-news-wrapper"))), r.perfectScrollbar("update")*/) : (n.height(i(o)), e(".s-links-wrapper").width(""), n.perfectScrollbar("update"), l.width(""), r.perfectScrollbar("destroy")), s > 991 && e("#menu, .tab-section").css("display", "");
            if(992 > s)
            {
                tl.perfectScrollbar("destroy");
                tl.height("");
                e(".s-line-wrapper").width(t(e(".s-line-wrapper > .swiper-slide")) + 20);
                
                tli.height("");

                tli.height("");
 
                e(".s-line-inner-wrapper").width(t(e(".s-line-inner-wrapper > .swiper-slide")) + 20 );
                tli.perfectScrollbar("update");
  
            }
            else
            {
                if(i(o) == 0)
                    tl.height(700);
                else
                    tl.height(i(o));
  
                e(".s-line-wrapper").width("");
                tl.perfectScrollbar("update");
                
                tli.height(400);
                tli.perfectScrollbar("update");
            }
           
            
        }), e(".tab").on("click", function() {
            e(this).siblings(".tab-section").slideToggle(300)
        });
        /*var a = '<li id="menu-line"></li>',
            c = e("#menu");
        c.append(a);
        var d = e("#menu .active"),
            p = d.offset().left - c.offset().left,
            u = d.offset().top - d.parents('.l-menu-block').offset().top + d.height(),
            h = d.css("width"),
            f = {
                width: h,
                left: p,
                top: u
            };
        e("#menu-line").css(f), e("#menu li").hover(function() {
            var t = e(this).offset().left - c.offset().left;
            e("#menu-line").css({
                width: e(this).width(),
                left: t,
                top: e(this).offset().top - e(this).parents('.l-menu-block').offset().top + e(this).height()
            })
        }, function() {
            e("#menu-line").css(f)
        }),*/ e(".tab-select").on("click", function() {
            e(this).find(".tab-option").toggle()
        }), e(".tab-option li").on("click", function() {
            var t = e(this).text();
            var valSel = e(this).attr('data-val');
            e(this).parents('.tab-select').next(".select").find('option').val(valSel), e(this).parents(".tab-select").find("span").text(t)
            e(this).closest("form").submit();
        }), e(".fancybox").fancybox()
    })
}(jQuery),
function(e) {
    var t = navigator.userAgent.match(/MSIE/gi);
    t && (e("form").find("input, textarea").each(function() {
        var t = e(this).attr("placeholder");
        e(this).attr("value", t).css("color", "#ccc")
    }).focusin(function() {
        var t = e(this).attr("placeholder");
        e(this).val() == t && e(this).attr("value", "").css("color", "#303030")
    }).focusout(function() {
        var t = e(this).attr("placeholder");
        "" == e(this).val() && e(this).attr("value", t).css("color", "#ccc")
    }), e("form").submit(function() {
        e(this).find("input, textarea").each(function() {
            var t = e(this).attr("placeholder");
            e(this).val() == t && e(this).attr("value", "")
        })
    }))
}(jQuery);

$(window).load(function(){                
    ResizeTimetable($('body').width());
});
$(window).resize(function(){                
    ResizeTimetable($('body').width());
});

$(document).ready(function(){
    if($('.swiper-wrapper').length > 0)
    {
        $('.swiper-wrapper').each(function(index1, parent){
            var widthParent = $(parent).width();
            var widthChild = 0;
            //console.log('widthParent = ' + widthParent)
            $(parent).find('.swiper-slide').each(function(index2, child){
                widthChild = widthChild + $(child).width();
            })
            //console.log('widthChild = ' + widthChild)
            if(widthParent > widthChild)
            {
                $(parent).width(widthChild);
                $(parent).css('margin', '0 auto');
            }
        })
    }
    
    $('.tooltip-block').tooltipster({
        functionInit: function(instance, helper)
        {
            var content = $(helper.origin).find('.tooltip_content').detach();
            instance.content(content);
           
        },
        functionReady:function(instance, helper)
        {
            var color = $(helper.origin).attr('data-color');
            $('.tooltipster-base.tooltipster-sidetip .tooltipster-arrow-background').addClass(color);
        },
        contentAsHTML: true,
		interactive: true,
        theme: 'tooltipster-light',
        side: ['bottom']
    });
    
    $(".swiper-container .swiper-slide a:not(.fancybox)").on("click", function() {
        window.location.href=$(this).attr('href');
    });
    
    $('#myModalConsent, .modalConsent').on('shown.bs.modal', function (e) {
	   $('.mibok-consent-text').perfectScrollbar('update');
    })
	$('#myModalConsent, .modalConsent').on('show.bs.modal', function (e) {
		$('.mibok-consent-text').perfectScrollbar();
		var $bodyWidth = $("body").width();
        $("body").css({'overflow-y': "hidden"}).css({'padding-right': ($("body").width()-$bodyWidth)});
    })
	$('#myModalConsent, .modalConsent').on('hide.bs.modal', function (e) {
		 $("body").css({'padding-right': "0", 'overflow-y': "auto"});
    })
})

$(document)
	.on('click','label[for=iblock_consent]',function(){
		return false;
	})
	.on('click','.mibok-consent-yes',function(){
        
        if($(this).parents('#myModalConsentRew').length > 0)
            $('#iblock_consent.consent-review').prop('checked',true);
        else
            $('#iblock_consent:not(.consent-review)').prop('checked',true);
	})
	.on('click','.mibok-consent-no',function(){
		//$('#iblock_consent').prop('checked',false)
        if($(this).parents('#myModalConsentRew').length > 0)
            $('#iblock_consent.consent-review').prop('checked',false);
        else
            $('#iblock_consent:not(.consent-review)').prop('checked',false);
	})
    .on('click', '.add-rating', function(){
        var rating = $(this).attr('data-star');
        $('.add-rating-value').val(rating)
        $(this).prevAll().addClass('active');
        $(this).addClass('active');
        $(this).nextAll().removeClass('active');
        return false;
    })
    .on('click', '.footer-cookie-btn', function(){
        $(this).parents('.footer-cookie').addClass('no');
        setCookie('MIBOK_COOKIE_PRIVACY', 'Y', {expires:(3600 * 24 * 365), path : '/'});
        return false;
    })

function getCookie(name) 
{
  var matches = document.cookie.match(new RegExp(
    "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
  ));
  return matches ? decodeURIComponent(matches[1]) : undefined;
}

// options - (expires, path, domain, secure)
function setCookie(name, value, options) 
{
  options = options || {};

  var expires = options.expires;

  if (typeof expires == "number" && expires) {
    var d = new Date();
    d.setTime(d.getTime() + expires * 1000);
    expires = options.expires = d;
  }
  if (expires && expires.toUTCString) {
    options.expires = expires.toUTCString();
  }

  value = encodeURIComponent(value);

  var updatedCookie = name + "=" + value;

  for (var propName in options) {
    updatedCookie += "; " + propName;
    var propValue = options[propName];
    if (propValue !== true) {
      updatedCookie += "=" + propValue;
    }
  }

  document.cookie = updatedCookie;
}

function deleteCookie(name) 
{
  setCookie(name, "", {
    expires: -1
  })
}

function ResizeTimetable(width)
{
    if(width < 992 && width > 767)
    {
        $('.timing-cell').each(function(ind, elem){
            topCell = 0;
            heightCell = 0;
            heightCell = parseInt($(this).attr('data-height'))  * 0.72;
            $(this).css('height', heightCell + "px")
            topCell = parseInt($(this).attr('data-top'))  * 0.72;
            $(this).css('top', topCell + "px")
        })
    }
    else if(width <= 767)
    {
        $('.timing-cell').each(function(ind, elem){
            topCell = 0;
            heightCell = 0;
            heightCell = parseInt($(this).attr('data-height'))  * 0.35;
            $(this).css('height', heightCell + "px")
            topCell = parseInt($(this).attr('data-top'))  * 0.35;
            $(this).css('top', topCell + "px")
        })
    }
    else if(width >= 992)
    {
        $('.timing-cell').each(function(ind, elem){
            topCell = 0;
            heightCell = 0;
            heightCell = parseInt($(this).attr('data-height'));
            $(this).css('height', heightCell + "px")
            topCell = parseInt($(this).attr('data-top'));
            $(this).css('top', topCell + "px")
        })
    }
}

